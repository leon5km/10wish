[ 2014-08-12T08:56:09+08:00 ] 127.0.0.1 /php_demo/shizhan/10/10wish/index.php/Njb
INFO: [ route_check ] --START--
INFO: CheckRoute Behavior ::run [ RunTime:0.026001s ]
INFO: [ route_check ] --END-- [ RunTime:0.037002s ]
INFO: [ app_begin ] --START--
INFO: ReadHtmlCache Behavior ::run [ RunTime:0.026001s ]
INFO: [ app_begin ] --END-- [ RunTime:0.038003s ]
INFO: [ view_parse ] --START--
INFO: ParseTemplate Behavior ::run [ RunTime:0.236014s ]
INFO: [ view_parse ] --END-- [ RunTime:0.249014s ]
INFO: [ view_filter ] --START--
INFO: ContentReplace Behavior ::run [ RunTime:0.019001s ]
INFO: TokenBuild Behavior ::run [ RunTime:0.022002s ]
INFO: WriteHtmlCache Behavior ::run [ RunTime:0.012001s ]
INFO: ShowRuntime Behavior ::run [ RunTime:0.031002s ]
INFO: [ view_filter ] --END-- [ RunTime:0.118007s ]
INFO: [ view_end ] --START--
INFO: ShowPageTrace Behavior ::run [ RunTime:0.036002s ]
INFO: [ view_end ] --END-- [ RunTime:0.047003s ]

[ 2014-08-12T08:56:38+08:00 ] 127.0.0.1 /php_demo/shizhan/10/10wish/index.php/Njb/Index/tongji?checkbox%5B%5D=24521&checkbox%5B%5D=24543&checkbox%5B%5D=24561&date_begin=2014-08-11&date_end=2014-08-12
INFO: [ route_check ] --START--
INFO: CheckRoute Behavior ::run [ RunTime:0.018001s ]
INFO: [ route_check ] --END-- [ RunTime:0.032002s ]
INFO: [ app_begin ] --START--
INFO: ReadHtmlCache Behavior ::run [ RunTime:0.024001s ]
INFO: [ app_begin ] --END-- [ RunTime:0.037002s ]
SQL: SELECT l.name,COALESCE(a.ucount,0) as yhs,COALESCE(c.ulcount,0) as dlyhs,COALESCE(c.logCount,0) as dlcs FROM location l LEFT JOIN (SELECT ud.locid locid,COUNT(ud.id) ucount FROM   (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24521,24543,24561)    UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24521,24543,24561)) ud     GROUP BY ud.locid  ) a ON l.id=a.locid  LEFT JOIN (SELECT ud.locid locid,COUNT(DISTINCT ud.id) ulcount,COUNT(ud.id) logCount FROM login_log lo,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24521,24543,24561)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24521,24543,24561)) ud  WHERE lo.user_id=ud.id   AND lo.login_time>="2014-08-11 00:00:00" AND lo.login_time<"2014-08-12 00:00:00"   GROUP BY ud.locid) c ON l.id=c.locid WHERE l.id IN(24521,24543,24561) [ RunTime:0.112006s ]
SQL: SELECT l.name,COALESCE(a.noticeCount,0) noticeCount,COALESCE(a.userCount,0) userCount FROM location l LEFT JOIN  (SELECT ud.locid locid,COUNT(n.id) noticeCount,COUNT(DISTINCT ud.id) userCount FROM notice n,   (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24521,24543,24561)    UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24521,24543,24561)) ud   WHERE n.owner_id=ud.id AND n.publish_time>="2014-08-11 00:00:00"    AND n.publish_time<"2014-08-12 00:00:00" GROUP BY ud.locid) a  ON l.id=a.locid WHERE l.id IN(24521,24543,24561) [ RunTime:0.008001s ]
SQL: SELECT l.name,COALESCE(a.asCount,0) a,COALESCE(b.adminCount,0) b,COALESCE(c.noAdminCount,0) c FROM location l LEFT JOIN  (SELECT ud.locid locid,COUNT(t.id) asCount FROM assignment t,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24521,24543,24561)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24521,24543,24561)) ud  WHERE t.creator_id=ud.id AND t.create_time>="2014-08-11 00:00:00" AND  t.create_time<"2014-08-12 00:00:00"  GROUP BY ud.locid) a ON l.id=a.locid  LEFT JOIN (SELECT ud.locid locid,COUNT(DISTINCT ud.id) adminCount FROM assignment t,app_user_role r,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24521,24543,24561)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24521,24543,24561)) ud   WHERE t.creator_id=ud.id AND ud.id=r.user_id AND r.role='TechAdmin'   AND t.create_time>="2014-08-11 00:00:00" AND  t.create_time<"2014-08-12 00:00:00"  GROUP BY ud.locid ) b ON l.id=b.locid LEFT JOIN (SELECT ud.locid locid,COUNT(DISTINCT ud.id) noAdminCount FROM assignment t,app_user_role r,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24521,24543,24561)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24521,24543,24561)) ud  WHERE t.creator_id=ud.id AND ud.id=r.user_id AND r.role='Technician'   AND t.create_time>="2014-08-11 00:00:00" AND  t.create_time<"2014-08-12 00:00:00"  GROUP BY ud.locid ) c ON l.id=c.locid  WHERE l.id IN(24521,24543,24561) [ RunTime:0.020001s ]
SQL: SELECT l.name,COALESCE(a.worklogCount,0) a,COALESCE(a.uCount,0) b,COALESCE(b.docCount,0) c,COALESCE(c.phoCount,0) d,COALESCE(d.audioCount,0) e FROM location l LEFT JOIN  (SELECT ud.locid locid,COUNT(DISTINCT w.id) worklogCount,COUNT(DISTINCT w.owner_id) uCount FROM work_log w,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24521,24543,24561)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24521,24543,24561)) ud  WHERE w.owner_id=ud.id    AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00"  GROUP BY ud.locid) a ON l.id=a.locid LEFT JOIN  (SELECT ud.locid locid,i.media_type,COUNT(i.id) docCount FROM work_log w,work_log_item i,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24521,24543,24561)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24521,24543,24561)) ud  WHERE w.owner_id=ud.id AND w.id=i.work_log_id   AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00"  AND i.media_type=1   GROUP BY ud.locid ) b ON l.id=b.locid LEFT JOIN  (SELECT ud.locid locid,i.media_type,COUNT(i.id) phoCount FROM work_log w,work_log_item i,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24521,24543,24561)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24521,24543,24561)) ud  WHERE w.owner_id=ud.id AND w.id=i.work_log_id   AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00"  AND i.media_type=2   GROUP BY ud.locid ) c ON l.id=c.locid LEFT JOIN  (SELECT ud.locid locid,i.media_type,COUNT(i.id) audioCount FROM work_log w,work_log_item i,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24521,24543,24561)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24521,24543,24561)) ud  WHERE w.owner_id=ud.id AND w.id=i.work_log_id   AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00"  AND i.media_type=3   GROUP BY ud.locid ) d ON l.id=d.locid   WHERE l.id IN(24521,24543,24561) [ RunTime:0.074004s ]
SQL: SELECT l.name,COALESCE(a.photoCount,0) a,COALESCE(a.ucount,0) b,COALESCE(b.priseCount,0) c,COALESCE(c.comCount,0) d FROM location l LEFT JOIN (SELECT ud.locid locid,COUNT(i.id) photoCount,COUNT(DISTINCT ud.id) ucount FROM album m,album_item i,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24521,24543,24561)  UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24521,24543,24561)) ud  WHERE m.owner_id=ud.id AND i.album_id=m.id   AND i.create_time>="2014-08-11 00:00:00" AND i.create_time<"2014-08-12 00:00:00"  GROUP BY ud.locid) a ON l.id=a.locid LEFT JOIN  (SELECT ud.locid locid,COUNT(uc.id) priseCount FROM user_comment uc,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24521,24543,24561)  UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24521,24543,24561)) ud  WHERE ud.id=uc.creator_id AND uc.obj_type='AlbumItem'   AND uc.create_time>"2014-08-11 00:00:00" AND uc.create_time<"2014-08-12 00:00:00"   GROUP BY ud.locid ) b ON l.id=b.locid LEFT JOIN (SELECT ud.locid locid,COUNT(uc.id) comCount FROM user_comment uc,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24521,24543,24561)  UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24521,24543,24561)) ud  WHERE ud.id=uc.creator_id AND uc.obj_type='SystemComment'   AND uc.create_time>="2014-08-11 00:00:00" AND uc.create_time<"2014-08-12 00:00:00"  GROUP BY ud.locid) c ON l.id=c.locid  WHERE l.id IN(24521,24543,24561) [ RunTime:0.051002s ]
SQL: SELECT a.rname a,l.name b,d.name c,a.age d FROM (SELECT u.id uid,u.real_name rname,u.location_id locid,u.dept_id depId,(2014-(SELECT SUBSTR(u.identify_value,7,4))+0) age FROM app_user u WHERE NOT EXISTS ( SELECT lo.user_id FROM login_log lo WHERE u.id=lo.user_id  ) AND u.id IN( SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24521,24543,24561)   UNION ALL SELECT u.id FROM app_user u WHERE u.location_id IN(24521,24543,24561) )) a,location l,department d WHERE a.depId=d.id AND a.locid=l.id [ RunTime:5.382307s ]
SQL: SELECT u.id,u.real_name,COALESCE(a.worklogCount,0) worklogCount,COALESCE(b.logCount,0) logCount FROM app_user u LEFT JOIN (SELECT w.owner_id uid,COALESCE(COUNT(w.id)) worklogCount FROM work_log w WHERE w.owner_id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24561 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24561 ) AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00" GROUP BY w.owner_id) a ON u.id=a.uid LEFT JOIN (SELECT lo.user_id uid,COUNT(lo.user_id) logCount FROM login_log lo WHERE lo.user_id IN( SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24561 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24561 ) AND lo.login_time>="2014-08-11 00:00:00" AND lo.login_time<"2014-08-12 00:00:00" GROUP BY lo.user_id ) b ON u.id=b.uid WHERE u.id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24561 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24561 ) ORDER BY a.worklogCount DESC,b.logCount DESC LIMIT 10 [ RunTime:0.708041s ]
SQL: SELECT u.id,u.real_name,COALESCE(a.worklogCount,0) worklogCount,COALESCE(b.logCount,0) logCount FROM app_user u LEFT JOIN (SELECT w.owner_id uid,COALESCE(COUNT(w.id)) worklogCount FROM work_log w WHERE w.owner_id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24521 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24521 ) AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00" GROUP BY w.owner_id) a ON u.id=a.uid LEFT JOIN (SELECT lo.user_id uid,COUNT(lo.user_id) logCount FROM login_log lo WHERE lo.user_id IN( SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24521 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24521 ) AND lo.login_time>="2014-08-11 00:00:00" AND lo.login_time<"2014-08-12 00:00:00" GROUP BY lo.user_id ) b ON u.id=b.uid WHERE u.id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24521 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24521 ) ORDER BY a.worklogCount DESC,b.logCount DESC LIMIT 10 [ RunTime:0.612035s ]
SQL: SELECT u.id,u.real_name,COALESCE(a.worklogCount,0) worklogCount,COALESCE(b.logCount,0) logCount FROM app_user u LEFT JOIN (SELECT w.owner_id uid,COALESCE(COUNT(w.id)) worklogCount FROM work_log w WHERE w.owner_id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24543 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24543 ) AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00" GROUP BY w.owner_id) a ON u.id=a.uid LEFT JOIN (SELECT lo.user_id uid,COUNT(lo.user_id) logCount FROM login_log lo WHERE lo.user_id IN( SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24543 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24543 ) AND lo.login_time>="2014-08-11 00:00:00" AND lo.login_time<"2014-08-12 00:00:00" GROUP BY lo.user_id ) b ON u.id=b.uid WHERE u.id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24543 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24543 ) ORDER BY a.worklogCount DESC,b.logCount DESC LIMIT 10 [ RunTime:0.568033s ]
SQL: SELECT u.id,u.real_name,COALESCE(a.worklogCount,0) worklogCount,COALESCE(b.logCount,0) logCount FROM app_user u LEFT JOIN (SELECT w.owner_id uid,COALESCE(COUNT(w.id)) worklogCount FROM work_log w WHERE w.owner_id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =28422 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =28422 ) AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00" GROUP BY w.owner_id) a ON u.id=a.uid LEFT JOIN (SELECT lo.user_id uid,COUNT(lo.user_id) logCount FROM login_log lo WHERE lo.user_id IN( SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =28422 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =28422 ) AND lo.login_time>="2014-08-11 00:00:00" AND lo.login_time<"2014-08-12 00:00:00" GROUP BY lo.user_id ) b ON u.id=b.uid WHERE u.id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =28422 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =28422 ) ORDER BY a.worklogCount DESC,b.logCount DESC LIMIT 10 [ RunTime:0.534031s ]
SQL: SELECT l.name,COALESCE(a.ulcount,0) b FROM  location l LEFT JOIN (SELECT ud.locid locid,COUNT(DISTINCT ud.id) ulcount,COUNT(ud.id) logCount FROM login_log lo,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24521,24543,24561)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24521,24543,24561)) ud  WHERE lo.user_id=ud.id   AND lo.login_time>="2014-08-11 00:00:00"   GROUP BY ud.locid) a ON a.locid=l.id WHERE l.id IN (24521,24543,24561) [ RunTime:0.045002s ]
SQL: 
				CALL count_worklog_all("2014-08-11 00:00:00","2014-08-12 00:00:00",("24521,24543,24561"))
				 [ RunTime:0.076004s ]
INFO: [ view_parse ] --START--
INFO: ParseTemplate Behavior ::run [ RunTime:1.608092s ]
INFO: [ view_parse ] --END-- [ RunTime:1.617092s ]
INFO: [ view_filter ] --START--
INFO: ContentReplace Behavior ::run [ RunTime:0.016001s ]
INFO: TokenBuild Behavior ::run [ RunTime:0.026001s ]
INFO: WriteHtmlCache Behavior ::run [ RunTime:0.012000s ]
INFO: ShowRuntime Behavior ::run [ RunTime:0.031001s ]
INFO: [ view_filter ] --END-- [ RunTime:0.117007s ]
INFO: [ view_end ] --START--
INFO: ShowPageTrace Behavior ::run [ RunTime:0.020001s ]
INFO: [ view_end ] --END-- [ RunTime:0.031002s ]

[ 2014-08-12T08:58:57+08:00 ] 127.0.0.1 /php_demo/shizhan/10/10wish/index.php/Njb/Index/tongji?checkbox%5B%5D=28422&date_begin=2014-08-11&date_end=2014-08-12
INFO: [ route_check ] --START--
INFO: CheckRoute Behavior ::run [ RunTime:0.019001s ]
INFO: [ route_check ] --END-- [ RunTime:0.032002s ]
INFO: [ app_begin ] --START--
INFO: ReadHtmlCache Behavior ::run [ RunTime:0.023002s ]
INFO: [ app_begin ] --END-- [ RunTime:0.035002s ]
SQL: SELECT l.name,COALESCE(a.ucount,0) as yhs,COALESCE(c.ulcount,0) as dlyhs,COALESCE(c.logCount,0) as dlcs FROM location l LEFT JOIN (SELECT ud.locid locid,COUNT(ud.id) ucount FROM   (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(28422)    UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(28422)) ud     GROUP BY ud.locid  ) a ON l.id=a.locid  LEFT JOIN (SELECT ud.locid locid,COUNT(DISTINCT ud.id) ulcount,COUNT(ud.id) logCount FROM login_log lo,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(28422)) ud  WHERE lo.user_id=ud.id   AND lo.login_time>="2014-08-11 00:00:00" AND lo.login_time<"2014-08-12 00:00:00"   GROUP BY ud.locid) c ON l.id=c.locid WHERE l.id IN(28422) [ RunTime:0.060003s ]
SQL: SELECT l.name,COALESCE(a.noticeCount,0) noticeCount,COALESCE(a.userCount,0) userCount FROM location l LEFT JOIN  (SELECT ud.locid locid,COUNT(n.id) noticeCount,COUNT(DISTINCT ud.id) userCount FROM notice n,   (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(28422)    UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(28422)) ud   WHERE n.owner_id=ud.id AND n.publish_time>="2014-08-11 00:00:00"    AND n.publish_time<"2014-08-12 00:00:00" GROUP BY ud.locid) a  ON l.id=a.locid WHERE l.id IN(28422) [ RunTime:0.006000s ]
SQL: SELECT l.name,COALESCE(a.asCount,0) a,COALESCE(b.adminCount,0) b,COALESCE(c.noAdminCount,0) c FROM location l LEFT JOIN  (SELECT ud.locid locid,COUNT(t.id) asCount FROM assignment t,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(28422)) ud  WHERE t.creator_id=ud.id AND t.create_time>="2014-08-11 00:00:00" AND  t.create_time<"2014-08-12 00:00:00"  GROUP BY ud.locid) a ON l.id=a.locid  LEFT JOIN (SELECT ud.locid locid,COUNT(DISTINCT ud.id) adminCount FROM assignment t,app_user_role r,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(28422)) ud   WHERE t.creator_id=ud.id AND ud.id=r.user_id AND r.role='TechAdmin'   AND t.create_time>="2014-08-11 00:00:00" AND  t.create_time<"2014-08-12 00:00:00"  GROUP BY ud.locid ) b ON l.id=b.locid LEFT JOIN (SELECT ud.locid locid,COUNT(DISTINCT ud.id) noAdminCount FROM assignment t,app_user_role r,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(28422)) ud  WHERE t.creator_id=ud.id AND ud.id=r.user_id AND r.role='Technician'   AND t.create_time>="2014-08-11 00:00:00" AND  t.create_time<"2014-08-12 00:00:00"  GROUP BY ud.locid ) c ON l.id=c.locid  WHERE l.id IN(28422) [ RunTime:0.010001s ]
SQL: SELECT l.name,COALESCE(a.worklogCount,0) a,COALESCE(a.uCount,0) b,COALESCE(b.docCount,0) c,COALESCE(c.phoCount,0) d,COALESCE(d.audioCount,0) e FROM location l LEFT JOIN  (SELECT ud.locid locid,COUNT(DISTINCT w.id) worklogCount,COUNT(DISTINCT w.owner_id) uCount FROM work_log w,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(28422)) ud  WHERE w.owner_id=ud.id    AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00"  GROUP BY ud.locid) a ON l.id=a.locid LEFT JOIN  (SELECT ud.locid locid,i.media_type,COUNT(i.id) docCount FROM work_log w,work_log_item i,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(28422)) ud  WHERE w.owner_id=ud.id AND w.id=i.work_log_id   AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00"  AND i.media_type=1   GROUP BY ud.locid ) b ON l.id=b.locid LEFT JOIN  (SELECT ud.locid locid,i.media_type,COUNT(i.id) phoCount FROM work_log w,work_log_item i,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(28422)) ud  WHERE w.owner_id=ud.id AND w.id=i.work_log_id   AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00"  AND i.media_type=2   GROUP BY ud.locid ) c ON l.id=c.locid LEFT JOIN  (SELECT ud.locid locid,i.media_type,COUNT(i.id) audioCount FROM work_log w,work_log_item i,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(28422)) ud  WHERE w.owner_id=ud.id AND w.id=i.work_log_id   AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00"  AND i.media_type=3   GROUP BY ud.locid ) d ON l.id=d.locid   WHERE l.id IN(28422) [ RunTime:0.020001s ]
SQL: SELECT l.name,COALESCE(a.photoCount,0) a,COALESCE(a.ucount,0) b,COALESCE(b.priseCount,0) c,COALESCE(c.comCount,0) d FROM location l LEFT JOIN (SELECT ud.locid locid,COUNT(i.id) photoCount,COUNT(DISTINCT ud.id) ucount FROM album m,album_item i,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(28422)  UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(28422)) ud  WHERE m.owner_id=ud.id AND i.album_id=m.id   AND i.create_time>="2014-08-11 00:00:00" AND i.create_time<"2014-08-12 00:00:00"  GROUP BY ud.locid) a ON l.id=a.locid LEFT JOIN  (SELECT ud.locid locid,COUNT(uc.id) priseCount FROM user_comment uc,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(28422)  UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(28422)) ud  WHERE ud.id=uc.creator_id AND uc.obj_type='AlbumItem'   AND uc.create_time>"2014-08-11 00:00:00" AND uc.create_time<"2014-08-12 00:00:00"   GROUP BY ud.locid ) b ON l.id=b.locid LEFT JOIN (SELECT ud.locid locid,COUNT(uc.id) comCount FROM user_comment uc,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(28422)  UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(28422)) ud  WHERE ud.id=uc.creator_id AND uc.obj_type='SystemComment'   AND uc.create_time>="2014-08-11 00:00:00" AND uc.create_time<"2014-08-12 00:00:00"  GROUP BY ud.locid) c ON l.id=c.locid  WHERE l.id IN(28422) [ RunTime:0.013001s ]
SQL: SELECT a.rname a,l.name b,d.name c,a.age d FROM (SELECT u.id uid,u.real_name rname,u.location_id locid,u.dept_id depId,(2014-(SELECT SUBSTR(u.identify_value,7,4))+0) age FROM app_user u WHERE NOT EXISTS ( SELECT lo.user_id FROM login_log lo WHERE u.id=lo.user_id  ) AND u.id IN( SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(28422)   UNION ALL SELECT u.id FROM app_user u WHERE u.location_id IN(28422) )) a,location l,department d WHERE a.depId=d.id AND a.locid=l.id [ RunTime:5.233299s ]
SQL: SELECT u.id,u.real_name,COALESCE(a.worklogCount,0) worklogCount,COALESCE(b.logCount,0) logCount FROM app_user u LEFT JOIN (SELECT w.owner_id uid,COALESCE(COUNT(w.id)) worklogCount FROM work_log w WHERE w.owner_id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24561 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24561 ) AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00" GROUP BY w.owner_id) a ON u.id=a.uid LEFT JOIN (SELECT lo.user_id uid,COUNT(lo.user_id) logCount FROM login_log lo WHERE lo.user_id IN( SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24561 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24561 ) AND lo.login_time>="2014-08-11 00:00:00" AND lo.login_time<"2014-08-12 00:00:00" GROUP BY lo.user_id ) b ON u.id=b.uid WHERE u.id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24561 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24561 ) ORDER BY a.worklogCount DESC,b.logCount DESC LIMIT 10 [ RunTime:0.808046s ]
SQL: SELECT u.id,u.real_name,COALESCE(a.worklogCount,0) worklogCount,COALESCE(b.logCount,0) logCount FROM app_user u LEFT JOIN (SELECT w.owner_id uid,COALESCE(COUNT(w.id)) worklogCount FROM work_log w WHERE w.owner_id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24521 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24521 ) AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00" GROUP BY w.owner_id) a ON u.id=a.uid LEFT JOIN (SELECT lo.user_id uid,COUNT(lo.user_id) logCount FROM login_log lo WHERE lo.user_id IN( SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24521 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24521 ) AND lo.login_time>="2014-08-11 00:00:00" AND lo.login_time<"2014-08-12 00:00:00" GROUP BY lo.user_id ) b ON u.id=b.uid WHERE u.id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24521 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24521 ) ORDER BY a.worklogCount DESC,b.logCount DESC LIMIT 10 [ RunTime:0.649037s ]
SQL: SELECT u.id,u.real_name,COALESCE(a.worklogCount,0) worklogCount,COALESCE(b.logCount,0) logCount FROM app_user u LEFT JOIN (SELECT w.owner_id uid,COALESCE(COUNT(w.id)) worklogCount FROM work_log w WHERE w.owner_id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24543 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24543 ) AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00" GROUP BY w.owner_id) a ON u.id=a.uid LEFT JOIN (SELECT lo.user_id uid,COUNT(lo.user_id) logCount FROM login_log lo WHERE lo.user_id IN( SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24543 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24543 ) AND lo.login_time>="2014-08-11 00:00:00" AND lo.login_time<"2014-08-12 00:00:00" GROUP BY lo.user_id ) b ON u.id=b.uid WHERE u.id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24543 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24543 ) ORDER BY a.worklogCount DESC,b.logCount DESC LIMIT 10 [ RunTime:0.583033s ]
SQL: SELECT u.id,u.real_name,COALESCE(a.worklogCount,0) worklogCount,COALESCE(b.logCount,0) logCount FROM app_user u LEFT JOIN (SELECT w.owner_id uid,COALESCE(COUNT(w.id)) worklogCount FROM work_log w WHERE w.owner_id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =28422 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =28422 ) AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00" GROUP BY w.owner_id) a ON u.id=a.uid LEFT JOIN (SELECT lo.user_id uid,COUNT(lo.user_id) logCount FROM login_log lo WHERE lo.user_id IN( SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =28422 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =28422 ) AND lo.login_time>="2014-08-11 00:00:00" AND lo.login_time<"2014-08-12 00:00:00" GROUP BY lo.user_id ) b ON u.id=b.uid WHERE u.id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =28422 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =28422 ) ORDER BY a.worklogCount DESC,b.logCount DESC LIMIT 10 [ RunTime:0.582033s ]
SQL: SELECT l.name,COALESCE(a.ulcount,0) b FROM  location l LEFT JOIN (SELECT ud.locid locid,COUNT(DISTINCT ud.id) ulcount,COUNT(ud.id) logCount FROM login_log lo,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(28422)) ud  WHERE lo.user_id=ud.id   AND lo.login_time>="2014-08-11 00:00:00"   GROUP BY ud.locid) a ON a.locid=l.id WHERE l.id IN (28422) [ RunTime:0.031002s ]
SQL: 
				CALL count_worklog_all("2014-08-11 00:00:00","2014-08-12 00:00:00",("28422"))
				 [ RunTime:0.017001s ]
INFO: [ view_parse ] --START--
INFO: ParseTemplate Behavior ::run [ RunTime:0.817046s ]
INFO: [ view_parse ] --END-- [ RunTime:0.824047s ]
INFO: [ view_filter ] --START--
INFO: ContentReplace Behavior ::run [ RunTime:0.011001s ]
INFO: TokenBuild Behavior ::run [ RunTime:0.013001s ]
INFO: WriteHtmlCache Behavior ::run [ RunTime:0.006000s ]
INFO: ShowRuntime Behavior ::run [ RunTime:0.017001s ]
INFO: [ view_filter ] --END-- [ RunTime:0.067004s ]
INFO: [ view_end ] --START--
INFO: ShowPageTrace Behavior ::run [ RunTime:0.012001s ]
INFO: [ view_end ] --END-- [ RunTime:0.019001s ]

[ 2014-08-12T09:32:13+08:00 ] 127.0.0.1 /php_demo/shizhan/10/10wish/index.php/Njb/Index/tongji?checkbox%5B%5D=28422&date_begin=2014-08-11&date_end=2014-08-12
INFO: [ route_check ] --START--
INFO: CheckRoute Behavior ::run [ RunTime:0.019001s ]
INFO: [ route_check ] --END-- [ RunTime:0.087005s ]
INFO: [ app_begin ] --START--
INFO: ReadHtmlCache Behavior ::run [ RunTime:0.023001s ]
INFO: [ app_begin ] --END-- [ RunTime:0.041003s ]
SQL: SELECT l.name,COALESCE(a.ucount,0) as yhs,COALESCE(c.ulcount,0) as dlyhs,COALESCE(c.logCount,0) as dlcs FROM location l LEFT JOIN (SELECT ud.locid locid,COUNT(ud.id) ucount FROM   (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(28422)    UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(28422)) ud     GROUP BY ud.locid  ) a ON l.id=a.locid  LEFT JOIN (SELECT ud.locid locid,COUNT(DISTINCT ud.id) ulcount,COUNT(ud.id) logCount FROM login_log lo,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(28422)) ud  WHERE lo.user_id=ud.id   AND lo.login_time>="2014-08-11 00:00:00" AND lo.login_time<"2014-08-12 00:00:00"   GROUP BY ud.locid) c ON l.id=c.locid WHERE l.id IN(28422) [ RunTime:2.943169s ]
SQL: SELECT l.name,COALESCE(a.noticeCount,0) noticeCount,COALESCE(a.userCount,0) userCount FROM location l LEFT JOIN  (SELECT ud.locid locid,COUNT(n.id) noticeCount,COUNT(DISTINCT ud.id) userCount FROM notice n,   (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(28422)    UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(28422)) ud   WHERE n.owner_id=ud.id AND n.publish_time>="2014-08-11 00:00:00"    AND n.publish_time<"2014-08-12 00:00:00" GROUP BY ud.locid) a  ON l.id=a.locid WHERE l.id IN(28422) [ RunTime:0.013000s ]
SQL: SELECT l.name,COALESCE(a.asCount,0) a,COALESCE(b.adminCount,0) b,COALESCE(c.noAdminCount,0) c FROM location l LEFT JOIN  (SELECT ud.locid locid,COUNT(t.id) asCount FROM assignment t,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(28422)) ud  WHERE t.creator_id=ud.id AND t.create_time>="2014-08-11 00:00:00" AND  t.create_time<"2014-08-12 00:00:00"  GROUP BY ud.locid) a ON l.id=a.locid  LEFT JOIN (SELECT ud.locid locid,COUNT(DISTINCT ud.id) adminCount FROM assignment t,app_user_role r,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(28422)) ud   WHERE t.creator_id=ud.id AND ud.id=r.user_id AND r.role='TechAdmin'   AND t.create_time>="2014-08-11 00:00:00" AND  t.create_time<"2014-08-12 00:00:00"  GROUP BY ud.locid ) b ON l.id=b.locid LEFT JOIN (SELECT ud.locid locid,COUNT(DISTINCT ud.id) noAdminCount FROM assignment t,app_user_role r,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(28422)) ud  WHERE t.creator_id=ud.id AND ud.id=r.user_id AND r.role='Technician'   AND t.create_time>="2014-08-11 00:00:00" AND  t.create_time<"2014-08-12 00:00:00"  GROUP BY ud.locid ) c ON l.id=c.locid  WHERE l.id IN(28422) [ RunTime:0.380021s ]
SQL: SELECT l.name,COALESCE(a.worklogCount,0) a,COALESCE(a.uCount,0) b,COALESCE(b.docCount,0) c,COALESCE(c.phoCount,0) d,COALESCE(d.audioCount,0) e FROM location l LEFT JOIN  (SELECT ud.locid locid,COUNT(DISTINCT w.id) worklogCount,COUNT(DISTINCT w.owner_id) uCount FROM work_log w,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(28422)) ud  WHERE w.owner_id=ud.id    AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00"  GROUP BY ud.locid) a ON l.id=a.locid LEFT JOIN  (SELECT ud.locid locid,i.media_type,COUNT(i.id) docCount FROM work_log w,work_log_item i,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(28422)) ud  WHERE w.owner_id=ud.id AND w.id=i.work_log_id   AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00"  AND i.media_type=1   GROUP BY ud.locid ) b ON l.id=b.locid LEFT JOIN  (SELECT ud.locid locid,i.media_type,COUNT(i.id) phoCount FROM work_log w,work_log_item i,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(28422)) ud  WHERE w.owner_id=ud.id AND w.id=i.work_log_id   AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00"  AND i.media_type=2   GROUP BY ud.locid ) c ON l.id=c.locid LEFT JOIN  (SELECT ud.locid locid,i.media_type,COUNT(i.id) audioCount FROM work_log w,work_log_item i,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(28422)) ud  WHERE w.owner_id=ud.id AND w.id=i.work_log_id   AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00"  AND i.media_type=3   GROUP BY ud.locid ) d ON l.id=d.locid   WHERE l.id IN(28422) [ RunTime:0.853048s ]
SQL: SELECT l.name,COALESCE(a.photoCount,0) a,COALESCE(a.ucount,0) b,COALESCE(b.priseCount,0) c,COALESCE(c.comCount,0) d FROM location l LEFT JOIN (SELECT ud.locid locid,COUNT(i.id) photoCount,COUNT(DISTINCT ud.id) ucount FROM album m,album_item i,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(28422)  UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(28422)) ud  WHERE m.owner_id=ud.id AND i.album_id=m.id   AND i.create_time>="2014-08-11 00:00:00" AND i.create_time<"2014-08-12 00:00:00"  GROUP BY ud.locid) a ON l.id=a.locid LEFT JOIN  (SELECT ud.locid locid,COUNT(uc.id) priseCount FROM user_comment uc,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(28422)  UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(28422)) ud  WHERE ud.id=uc.creator_id AND uc.obj_type='AlbumItem'   AND uc.create_time>"2014-08-11 00:00:00" AND uc.create_time<"2014-08-12 00:00:00"   GROUP BY ud.locid ) b ON l.id=b.locid LEFT JOIN (SELECT ud.locid locid,COUNT(uc.id) comCount FROM user_comment uc,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(28422)  UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(28422)) ud  WHERE ud.id=uc.creator_id AND uc.obj_type='SystemComment'   AND uc.create_time>="2014-08-11 00:00:00" AND uc.create_time<"2014-08-12 00:00:00"  GROUP BY ud.locid) c ON l.id=c.locid  WHERE l.id IN(28422) [ RunTime:0.418024s ]
SQL: SELECT a.rname a,l.name b,d.name c,a.age d FROM (SELECT u.id uid,u.real_name rname,u.location_id locid,u.dept_id depId,(2014-(SELECT SUBSTR(u.identify_value,7,4))+0) age FROM app_user u WHERE NOT EXISTS ( SELECT lo.user_id FROM login_log lo WHERE u.id=lo.user_id  ) AND u.id IN( SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(28422)   UNION ALL SELECT u.id FROM app_user u WHERE u.location_id IN(28422) )) a,location l,department d WHERE a.depId=d.id AND a.locid=l.id [ RunTime:5.522316s ]
SQL: SELECT u.id,u.real_name,COALESCE(a.worklogCount,0) worklogCount,COALESCE(b.logCount,0) logCount FROM app_user u LEFT JOIN (SELECT w.owner_id uid,COALESCE(COUNT(w.id)) worklogCount FROM work_log w WHERE w.owner_id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24561 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24561 ) AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00" GROUP BY w.owner_id) a ON u.id=a.uid LEFT JOIN (SELECT lo.user_id uid,COUNT(lo.user_id) logCount FROM login_log lo WHERE lo.user_id IN( SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24561 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24561 ) AND lo.login_time>="2014-08-11 00:00:00" AND lo.login_time<"2014-08-12 00:00:00" GROUP BY lo.user_id ) b ON u.id=b.uid WHERE u.id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24561 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24561 ) ORDER BY a.worklogCount DESC,b.logCount DESC LIMIT 10 [ RunTime:1.155066s ]
SQL: SELECT u.id,u.real_name,COALESCE(a.worklogCount,0) worklogCount,COALESCE(b.logCount,0) logCount FROM app_user u LEFT JOIN (SELECT w.owner_id uid,COALESCE(COUNT(w.id)) worklogCount FROM work_log w WHERE w.owner_id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24521 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24521 ) AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00" GROUP BY w.owner_id) a ON u.id=a.uid LEFT JOIN (SELECT lo.user_id uid,COUNT(lo.user_id) logCount FROM login_log lo WHERE lo.user_id IN( SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24521 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24521 ) AND lo.login_time>="2014-08-11 00:00:00" AND lo.login_time<"2014-08-12 00:00:00" GROUP BY lo.user_id ) b ON u.id=b.uid WHERE u.id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24521 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24521 ) ORDER BY a.worklogCount DESC,b.logCount DESC LIMIT 10 [ RunTime:0.839048s ]
SQL: SELECT u.id,u.real_name,COALESCE(a.worklogCount,0) worklogCount,COALESCE(b.logCount,0) logCount FROM app_user u LEFT JOIN (SELECT w.owner_id uid,COALESCE(COUNT(w.id)) worklogCount FROM work_log w WHERE w.owner_id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24543 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24543 ) AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00" GROUP BY w.owner_id) a ON u.id=a.uid LEFT JOIN (SELECT lo.user_id uid,COUNT(lo.user_id) logCount FROM login_log lo WHERE lo.user_id IN( SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24543 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24543 ) AND lo.login_time>="2014-08-11 00:00:00" AND lo.login_time<"2014-08-12 00:00:00" GROUP BY lo.user_id ) b ON u.id=b.uid WHERE u.id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24543 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24543 ) ORDER BY a.worklogCount DESC,b.logCount DESC LIMIT 10 [ RunTime:0.955054s ]
SQL: SELECT u.id,u.real_name,COALESCE(a.worklogCount,0) worklogCount,COALESCE(b.logCount,0) logCount FROM app_user u LEFT JOIN (SELECT w.owner_id uid,COALESCE(COUNT(w.id)) worklogCount FROM work_log w WHERE w.owner_id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =28422 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =28422 ) AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00" GROUP BY w.owner_id) a ON u.id=a.uid LEFT JOIN (SELECT lo.user_id uid,COUNT(lo.user_id) logCount FROM login_log lo WHERE lo.user_id IN( SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =28422 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =28422 ) AND lo.login_time>="2014-08-11 00:00:00" AND lo.login_time<"2014-08-12 00:00:00" GROUP BY lo.user_id ) b ON u.id=b.uid WHERE u.id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =28422 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =28422 ) ORDER BY a.worklogCount DESC,b.logCount DESC LIMIT 10 [ RunTime:0.781045s ]
SQL: SELECT l.name,COALESCE(a.ulcount,0) b FROM  location l LEFT JOIN (SELECT ud.locid locid,COUNT(DISTINCT ud.id) ulcount,COUNT(ud.id) logCount FROM login_log lo,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(28422)) ud  WHERE lo.user_id=ud.id   AND lo.login_time>="2014-08-11 00:00:00"   GROUP BY ud.locid) a ON a.locid=l.id WHERE l.id IN (28422) [ RunTime:0.044002s ]
SQL: 
				CALL count_worklog_all("2014-08-11 00:00:00","2014-08-12 00:00:00",("28422"))
				 [ RunTime:0.503029s ]
INFO: [ view_parse ] --START--
INFO: ParseTemplate Behavior ::run [ RunTime:1.652095s ]
INFO: [ view_parse ] --END-- [ RunTime:1.664095s ]
INFO: [ view_filter ] --START--
INFO: ContentReplace Behavior ::run [ RunTime:0.048003s ]
INFO: TokenBuild Behavior ::run [ RunTime:0.028002s ]
INFO: WriteHtmlCache Behavior ::run [ RunTime:0.023001s ]
INFO: ShowRuntime Behavior ::run [ RunTime:0.032002s ]
INFO: [ view_filter ] --END-- [ RunTime:0.162009s ]
INFO: [ view_end ] --START--
INFO: ShowPageTrace Behavior ::run [ RunTime:0.032002s ]
INFO: [ view_end ] --END-- [ RunTime:0.043003s ]

[ 2014-08-12T09:33:49+08:00 ] 127.0.0.1 /php_demo/shizhan/10/10wish/index.php/Njb/Index/tongji?checkbox%5B%5D=28422&date_begin=2014-08-11&date_end=2014-08-12
INFO: [ route_check ] --START--
INFO: CheckRoute Behavior ::run [ RunTime:0.018001s ]
INFO: [ route_check ] --END-- [ RunTime:0.052003s ]
INFO: [ app_begin ] --START--
INFO: ReadHtmlCache Behavior ::run [ RunTime:0.037003s ]
INFO: [ app_begin ] --END-- [ RunTime:0.057003s ]
SQL: SELECT l.name,COALESCE(a.ucount,0) as yhs,COALESCE(c.ulcount,0) as dlyhs,COALESCE(c.logCount,0) as dlcs FROM location l LEFT JOIN (SELECT ud.locid locid,COUNT(ud.id) ucount FROM   (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(28422)    UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(28422)) ud     GROUP BY ud.locid  ) a ON l.id=a.locid  LEFT JOIN (SELECT ud.locid locid,COUNT(DISTINCT ud.id) ulcount,COUNT(ud.id) logCount FROM login_log lo,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(28422)) ud  WHERE lo.user_id=ud.id   AND lo.login_time>="2014-08-11 00:00:00" AND lo.login_time<"2014-08-12 00:00:00"   GROUP BY ud.locid) c ON l.id=c.locid WHERE l.id IN(28422) [ RunTime:0.049003s ]
SQL: SELECT l.name,COALESCE(a.noticeCount,0) noticeCount,COALESCE(a.userCount,0) userCount FROM location l LEFT JOIN  (SELECT ud.locid locid,COUNT(n.id) noticeCount,COUNT(DISTINCT ud.id) userCount FROM notice n,   (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(28422)    UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(28422)) ud   WHERE n.owner_id=ud.id AND n.publish_time>="2014-08-11 00:00:00"    AND n.publish_time<"2014-08-12 00:00:00" GROUP BY ud.locid) a  ON l.id=a.locid WHERE l.id IN(28422) [ RunTime:0.007000s ]
SQL: SELECT l.name,COALESCE(a.asCount,0) a,COALESCE(b.adminCount,0) b,COALESCE(c.noAdminCount,0) c FROM location l LEFT JOIN  (SELECT ud.locid locid,COUNT(t.id) asCount FROM assignment t,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(28422)) ud  WHERE t.creator_id=ud.id AND t.create_time>="2014-08-11 00:00:00" AND  t.create_time<"2014-08-12 00:00:00"  GROUP BY ud.locid) a ON l.id=a.locid  LEFT JOIN (SELECT ud.locid locid,COUNT(DISTINCT ud.id) adminCount FROM assignment t,app_user_role r,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(28422)) ud   WHERE t.creator_id=ud.id AND ud.id=r.user_id AND r.role='TechAdmin'   AND t.create_time>="2014-08-11 00:00:00" AND  t.create_time<"2014-08-12 00:00:00"  GROUP BY ud.locid ) b ON l.id=b.locid LEFT JOIN (SELECT ud.locid locid,COUNT(DISTINCT ud.id) noAdminCount FROM assignment t,app_user_role r,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(28422)) ud  WHERE t.creator_id=ud.id AND ud.id=r.user_id AND r.role='Technician'   AND t.create_time>="2014-08-11 00:00:00" AND  t.create_time<"2014-08-12 00:00:00"  GROUP BY ud.locid ) c ON l.id=c.locid  WHERE l.id IN(28422) [ RunTime:0.010001s ]
SQL: SELECT l.name,COALESCE(a.worklogCount,0) a,COALESCE(a.uCount,0) b,COALESCE(b.docCount,0) c,COALESCE(c.phoCount,0) d,COALESCE(d.audioCount,0) e FROM location l LEFT JOIN  (SELECT ud.locid locid,COUNT(DISTINCT w.id) worklogCount,COUNT(DISTINCT w.owner_id) uCount FROM work_log w,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(28422)) ud  WHERE w.owner_id=ud.id    AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00"  GROUP BY ud.locid) a ON l.id=a.locid LEFT JOIN  (SELECT ud.locid locid,i.media_type,COUNT(i.id) docCount FROM work_log w,work_log_item i,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(28422)) ud  WHERE w.owner_id=ud.id AND w.id=i.work_log_id   AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00"  AND i.media_type=1   GROUP BY ud.locid ) b ON l.id=b.locid LEFT JOIN  (SELECT ud.locid locid,i.media_type,COUNT(i.id) phoCount FROM work_log w,work_log_item i,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(28422)) ud  WHERE w.owner_id=ud.id AND w.id=i.work_log_id   AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00"  AND i.media_type=2   GROUP BY ud.locid ) c ON l.id=c.locid LEFT JOIN  (SELECT ud.locid locid,i.media_type,COUNT(i.id) audioCount FROM work_log w,work_log_item i,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(28422)) ud  WHERE w.owner_id=ud.id AND w.id=i.work_log_id   AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00"  AND i.media_type=3   GROUP BY ud.locid ) d ON l.id=d.locid   WHERE l.id IN(28422) [ RunTime:0.019001s ]
SQL: SELECT l.name,COALESCE(a.photoCount,0) a,COALESCE(a.ucount,0) b,COALESCE(b.priseCount,0) c,COALESCE(c.comCount,0) d FROM location l LEFT JOIN (SELECT ud.locid locid,COUNT(i.id) photoCount,COUNT(DISTINCT ud.id) ucount FROM album m,album_item i,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(28422)  UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(28422)) ud  WHERE m.owner_id=ud.id AND i.album_id=m.id   AND i.create_time>="2014-08-11 00:00:00" AND i.create_time<"2014-08-12 00:00:00"  GROUP BY ud.locid) a ON l.id=a.locid LEFT JOIN  (SELECT ud.locid locid,COUNT(uc.id) priseCount FROM user_comment uc,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(28422)  UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(28422)) ud  WHERE ud.id=uc.creator_id AND uc.obj_type='AlbumItem'   AND uc.create_time>"2014-08-11 00:00:00" AND uc.create_time<"2014-08-12 00:00:00"   GROUP BY ud.locid ) b ON l.id=b.locid LEFT JOIN (SELECT ud.locid locid,COUNT(uc.id) comCount FROM user_comment uc,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(28422)  UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(28422)) ud  WHERE ud.id=uc.creator_id AND uc.obj_type='SystemComment'   AND uc.create_time>="2014-08-11 00:00:00" AND uc.create_time<"2014-08-12 00:00:00"  GROUP BY ud.locid) c ON l.id=c.locid  WHERE l.id IN(28422) [ RunTime:0.050003s ]
SQL: SELECT a.rname a,l.name b,d.name c,a.age d FROM (SELECT u.id uid,u.real_name rname,u.location_id locid,u.dept_id depId,(2014-(SELECT SUBSTR(u.identify_value,7,4))+0) age FROM app_user u WHERE NOT EXISTS ( SELECT lo.user_id FROM login_log lo WHERE u.id=lo.user_id  ) AND u.id IN( SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(28422)   UNION ALL SELECT u.id FROM app_user u WHERE u.location_id IN(28422) )) a,location l,department d WHERE a.depId=d.id AND a.locid=l.id [ RunTime:5.264301s ]
SQL: SELECT u.id,u.real_name,COALESCE(a.worklogCount,0) worklogCount,COALESCE(b.logCount,0) logCount FROM app_user u LEFT JOIN (SELECT w.owner_id uid,COALESCE(COUNT(w.id)) worklogCount FROM work_log w WHERE w.owner_id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24561 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24561 ) AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00" GROUP BY w.owner_id) a ON u.id=a.uid LEFT JOIN (SELECT lo.user_id uid,COUNT(lo.user_id) logCount FROM login_log lo WHERE lo.user_id IN( SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24561 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24561 ) AND lo.login_time>="2014-08-11 00:00:00" AND lo.login_time<"2014-08-12 00:00:00" GROUP BY lo.user_id ) b ON u.id=b.uid WHERE u.id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24561 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24561 ) ORDER BY a.worklogCount DESC,b.logCount DESC LIMIT 10 [ RunTime:1.279074s ]
SQL: SELECT u.id,u.real_name,COALESCE(a.worklogCount,0) worklogCount,COALESCE(b.logCount,0) logCount FROM app_user u LEFT JOIN (SELECT w.owner_id uid,COALESCE(COUNT(w.id)) worklogCount FROM work_log w WHERE w.owner_id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24521 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24521 ) AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00" GROUP BY w.owner_id) a ON u.id=a.uid LEFT JOIN (SELECT lo.user_id uid,COUNT(lo.user_id) logCount FROM login_log lo WHERE lo.user_id IN( SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24521 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24521 ) AND lo.login_time>="2014-08-11 00:00:00" AND lo.login_time<"2014-08-12 00:00:00" GROUP BY lo.user_id ) b ON u.id=b.uid WHERE u.id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24521 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24521 ) ORDER BY a.worklogCount DESC,b.logCount DESC LIMIT 10 [ RunTime:1.218070s ]
SQL: SELECT u.id,u.real_name,COALESCE(a.worklogCount,0) worklogCount,COALESCE(b.logCount,0) logCount FROM app_user u LEFT JOIN (SELECT w.owner_id uid,COALESCE(COUNT(w.id)) worklogCount FROM work_log w WHERE w.owner_id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24543 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24543 ) AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00" GROUP BY w.owner_id) a ON u.id=a.uid LEFT JOIN (SELECT lo.user_id uid,COUNT(lo.user_id) logCount FROM login_log lo WHERE lo.user_id IN( SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24543 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24543 ) AND lo.login_time>="2014-08-11 00:00:00" AND lo.login_time<"2014-08-12 00:00:00" GROUP BY lo.user_id ) b ON u.id=b.uid WHERE u.id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24543 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24543 ) ORDER BY a.worklogCount DESC,b.logCount DESC LIMIT 10 [ RunTime:1.359078s ]
SQL: SELECT u.id,u.real_name,COALESCE(a.worklogCount,0) worklogCount,COALESCE(b.logCount,0) logCount FROM app_user u LEFT JOIN (SELECT w.owner_id uid,COALESCE(COUNT(w.id)) worklogCount FROM work_log w WHERE w.owner_id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =28422 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =28422 ) AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00" GROUP BY w.owner_id) a ON u.id=a.uid LEFT JOIN (SELECT lo.user_id uid,COUNT(lo.user_id) logCount FROM login_log lo WHERE lo.user_id IN( SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =28422 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =28422 ) AND lo.login_time>="2014-08-11 00:00:00" AND lo.login_time<"2014-08-12 00:00:00" GROUP BY lo.user_id ) b ON u.id=b.uid WHERE u.id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =28422 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =28422 ) ORDER BY a.worklogCount DESC,b.logCount DESC LIMIT 10 [ RunTime:0.975056s ]
SQL: SELECT l.name,COALESCE(a.ulcount,0) b FROM  location l LEFT JOIN (SELECT ud.locid locid,COUNT(DISTINCT ud.id) ulcount,COUNT(ud.id) logCount FROM login_log lo,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(28422)) ud  WHERE lo.user_id=ud.id   AND lo.login_time>="2014-08-11 00:00:00"   GROUP BY ud.locid) a ON a.locid=l.id WHERE l.id IN (28422) [ RunTime:0.043002s ]
SQL: 
				CALL count_worklog_all("2014-08-11 00:00:00","2014-08-12 00:00:00",("28422"))
				 [ RunTime:0.020001s ]
INFO: [ view_parse ] --START--
INFO: ParseTemplate Behavior ::run [ RunTime:1.222070s ]
INFO: [ view_parse ] --END-- [ RunTime:1.234071s ]
INFO: [ view_filter ] --START--
INFO: ContentReplace Behavior ::run [ RunTime:0.015000s ]
INFO: TokenBuild Behavior ::run [ RunTime:0.020001s ]
INFO: WriteHtmlCache Behavior ::run [ RunTime:0.009001s ]
INFO: ShowRuntime Behavior ::run [ RunTime:0.020001s ]
INFO: [ view_filter ] --END-- [ RunTime:0.094006s ]
INFO: [ view_end ] --START--
INFO: ShowPageTrace Behavior ::run [ RunTime:0.026001s ]
INFO: [ view_end ] --END-- [ RunTime:0.042003s ]

[ 2014-08-12T09:34:14+08:00 ] 127.0.0.1 /php_demo/shizhan/10/10wish/index.php/Njb/Index/tongji?checkbox%5B%5D=24561&checkbox%5B%5D=28422&date_begin=2014-08-11&date_end=2014-08-12
INFO: [ route_check ] --START--
INFO: CheckRoute Behavior ::run [ RunTime:0.010000s ]
INFO: [ route_check ] --END-- [ RunTime:0.017001s ]
INFO: [ app_begin ] --START--
INFO: ReadHtmlCache Behavior ::run [ RunTime:0.022001s ]
INFO: [ app_begin ] --END-- [ RunTime:0.037002s ]
SQL: SELECT l.name,COALESCE(a.ucount,0) as yhs,COALESCE(c.ulcount,0) as dlyhs,COALESCE(c.logCount,0) as dlcs FROM location l LEFT JOIN (SELECT ud.locid locid,COUNT(ud.id) ucount FROM   (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)    UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud     GROUP BY ud.locid  ) a ON l.id=a.locid  LEFT JOIN (SELECT ud.locid locid,COUNT(DISTINCT ud.id) ulcount,COUNT(ud.id) logCount FROM login_log lo,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE lo.user_id=ud.id   AND lo.login_time>="2014-08-11 00:00:00" AND lo.login_time<"2014-08-12 00:00:00"   GROUP BY ud.locid) c ON l.id=c.locid WHERE l.id IN(24561,28422) [ RunTime:0.064004s ]
SQL: SELECT l.name,COALESCE(a.noticeCount,0) noticeCount,COALESCE(a.userCount,0) userCount FROM location l LEFT JOIN  (SELECT ud.locid locid,COUNT(n.id) noticeCount,COUNT(DISTINCT ud.id) userCount FROM notice n,   (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)    UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud   WHERE n.owner_id=ud.id AND n.publish_time>="2014-08-11 00:00:00"    AND n.publish_time<"2014-08-12 00:00:00" GROUP BY ud.locid) a  ON l.id=a.locid WHERE l.id IN(24561,28422) [ RunTime:0.004000s ]
SQL: SELECT l.name,COALESCE(a.asCount,0) a,COALESCE(b.adminCount,0) b,COALESCE(c.noAdminCount,0) c FROM location l LEFT JOIN  (SELECT ud.locid locid,COUNT(t.id) asCount FROM assignment t,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE t.creator_id=ud.id AND t.create_time>="2014-08-11 00:00:00" AND  t.create_time<"2014-08-12 00:00:00"  GROUP BY ud.locid) a ON l.id=a.locid  LEFT JOIN (SELECT ud.locid locid,COUNT(DISTINCT ud.id) adminCount FROM assignment t,app_user_role r,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud   WHERE t.creator_id=ud.id AND ud.id=r.user_id AND r.role='TechAdmin'   AND t.create_time>="2014-08-11 00:00:00" AND  t.create_time<"2014-08-12 00:00:00"  GROUP BY ud.locid ) b ON l.id=b.locid LEFT JOIN (SELECT ud.locid locid,COUNT(DISTINCT ud.id) noAdminCount FROM assignment t,app_user_role r,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE t.creator_id=ud.id AND ud.id=r.user_id AND r.role='Technician'   AND t.create_time>="2014-08-11 00:00:00" AND  t.create_time<"2014-08-12 00:00:00"  GROUP BY ud.locid ) c ON l.id=c.locid  WHERE l.id IN(24561,28422) [ RunTime:0.030001s ]
SQL: SELECT l.name,COALESCE(a.worklogCount,0) a,COALESCE(a.uCount,0) b,COALESCE(b.docCount,0) c,COALESCE(c.phoCount,0) d,COALESCE(d.audioCount,0) e FROM location l LEFT JOIN  (SELECT ud.locid locid,COUNT(DISTINCT w.id) worklogCount,COUNT(DISTINCT w.owner_id) uCount FROM work_log w,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE w.owner_id=ud.id    AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00"  GROUP BY ud.locid) a ON l.id=a.locid LEFT JOIN  (SELECT ud.locid locid,i.media_type,COUNT(i.id) docCount FROM work_log w,work_log_item i,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE w.owner_id=ud.id AND w.id=i.work_log_id   AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00"  AND i.media_type=1   GROUP BY ud.locid ) b ON l.id=b.locid LEFT JOIN  (SELECT ud.locid locid,i.media_type,COUNT(i.id) phoCount FROM work_log w,work_log_item i,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE w.owner_id=ud.id AND w.id=i.work_log_id   AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00"  AND i.media_type=2   GROUP BY ud.locid ) c ON l.id=c.locid LEFT JOIN  (SELECT ud.locid locid,i.media_type,COUNT(i.id) audioCount FROM work_log w,work_log_item i,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE w.owner_id=ud.id AND w.id=i.work_log_id   AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00"  AND i.media_type=3   GROUP BY ud.locid ) d ON l.id=d.locid   WHERE l.id IN(24561,28422) [ RunTime:0.021001s ]
SQL: SELECT l.name,COALESCE(a.photoCount,0) a,COALESCE(a.ucount,0) b,COALESCE(b.priseCount,0) c,COALESCE(c.comCount,0) d FROM location l LEFT JOIN (SELECT ud.locid locid,COUNT(i.id) photoCount,COUNT(DISTINCT ud.id) ucount FROM album m,album_item i,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)  UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE m.owner_id=ud.id AND i.album_id=m.id   AND i.create_time>="2014-08-11 00:00:00" AND i.create_time<"2014-08-12 00:00:00"  GROUP BY ud.locid) a ON l.id=a.locid LEFT JOIN  (SELECT ud.locid locid,COUNT(uc.id) priseCount FROM user_comment uc,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)  UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE ud.id=uc.creator_id AND uc.obj_type='AlbumItem'   AND uc.create_time>"2014-08-11 00:00:00" AND uc.create_time<"2014-08-12 00:00:00"   GROUP BY ud.locid ) b ON l.id=b.locid LEFT JOIN (SELECT ud.locid locid,COUNT(uc.id) comCount FROM user_comment uc,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)  UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE ud.id=uc.creator_id AND uc.obj_type='SystemComment'   AND uc.create_time>="2014-08-11 00:00:00" AND uc.create_time<"2014-08-12 00:00:00"  GROUP BY ud.locid) c ON l.id=c.locid  WHERE l.id IN(24561,28422) [ RunTime:0.029002s ]
SQL: SELECT a.rname a,l.name b,d.name c,a.age d FROM (SELECT u.id uid,u.real_name rname,u.location_id locid,u.dept_id depId,(2014-(SELECT SUBSTR(u.identify_value,7,4))+0) age FROM app_user u WHERE NOT EXISTS ( SELECT lo.user_id FROM login_log lo WHERE u.id=lo.user_id  ) AND u.id IN( SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id FROM app_user u WHERE u.location_id IN(24561,28422) )) a,location l,department d WHERE a.depId=d.id AND a.locid=l.id [ RunTime:2.854164s ]
SQL: SELECT u.id,u.real_name,COALESCE(a.worklogCount,0) worklogCount,COALESCE(b.logCount,0) logCount FROM app_user u LEFT JOIN (SELECT w.owner_id uid,COALESCE(COUNT(w.id)) worklogCount FROM work_log w WHERE w.owner_id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24561 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24561 ) AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00" GROUP BY w.owner_id) a ON u.id=a.uid LEFT JOIN (SELECT lo.user_id uid,COUNT(lo.user_id) logCount FROM login_log lo WHERE lo.user_id IN( SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24561 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24561 ) AND lo.login_time>="2014-08-11 00:00:00" AND lo.login_time<"2014-08-12 00:00:00" GROUP BY lo.user_id ) b ON u.id=b.uid WHERE u.id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24561 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24561 ) ORDER BY a.worklogCount DESC,b.logCount DESC LIMIT 10 [ RunTime:0.426025s ]
SQL: SELECT u.id,u.real_name,COALESCE(a.worklogCount,0) worklogCount,COALESCE(b.logCount,0) logCount FROM app_user u LEFT JOIN (SELECT w.owner_id uid,COALESCE(COUNT(w.id)) worklogCount FROM work_log w WHERE w.owner_id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24521 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24521 ) AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00" GROUP BY w.owner_id) a ON u.id=a.uid LEFT JOIN (SELECT lo.user_id uid,COUNT(lo.user_id) logCount FROM login_log lo WHERE lo.user_id IN( SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24521 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24521 ) AND lo.login_time>="2014-08-11 00:00:00" AND lo.login_time<"2014-08-12 00:00:00" GROUP BY lo.user_id ) b ON u.id=b.uid WHERE u.id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24521 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24521 ) ORDER BY a.worklogCount DESC,b.logCount DESC LIMIT 10 [ RunTime:0.419024s ]
SQL: SELECT u.id,u.real_name,COALESCE(a.worklogCount,0) worklogCount,COALESCE(b.logCount,0) logCount FROM app_user u LEFT JOIN (SELECT w.owner_id uid,COALESCE(COUNT(w.id)) worklogCount FROM work_log w WHERE w.owner_id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24543 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24543 ) AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00" GROUP BY w.owner_id) a ON u.id=a.uid LEFT JOIN (SELECT lo.user_id uid,COUNT(lo.user_id) logCount FROM login_log lo WHERE lo.user_id IN( SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24543 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24543 ) AND lo.login_time>="2014-08-11 00:00:00" AND lo.login_time<"2014-08-12 00:00:00" GROUP BY lo.user_id ) b ON u.id=b.uid WHERE u.id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24543 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24543 ) ORDER BY a.worklogCount DESC,b.logCount DESC LIMIT 10 [ RunTime:0.400023s ]
SQL: SELECT u.id,u.real_name,COALESCE(a.worklogCount,0) worklogCount,COALESCE(b.logCount,0) logCount FROM app_user u LEFT JOIN (SELECT w.owner_id uid,COALESCE(COUNT(w.id)) worklogCount FROM work_log w WHERE w.owner_id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =28422 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =28422 ) AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00" GROUP BY w.owner_id) a ON u.id=a.uid LEFT JOIN (SELECT lo.user_id uid,COUNT(lo.user_id) logCount FROM login_log lo WHERE lo.user_id IN( SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =28422 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =28422 ) AND lo.login_time>="2014-08-11 00:00:00" AND lo.login_time<"2014-08-12 00:00:00" GROUP BY lo.user_id ) b ON u.id=b.uid WHERE u.id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =28422 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =28422 ) ORDER BY a.worklogCount DESC,b.logCount DESC LIMIT 10 [ RunTime:0.462027s ]
SQL: SELECT l.name,COALESCE(a.ulcount,0) b FROM  location l LEFT JOIN (SELECT ud.locid locid,COUNT(DISTINCT ud.id) ulcount,COUNT(ud.id) logCount FROM login_log lo,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE lo.user_id=ud.id   AND lo.login_time>="2014-08-11 00:00:00"   GROUP BY ud.locid) a ON a.locid=l.id WHERE l.id IN (24561,28422) [ RunTime:0.037002s ]
SQL: 
				CALL count_worklog_all("2014-08-11 00:00:00","2014-08-12 00:00:00",("24561,28422"))
				 [ RunTime:0.045003s ]
INFO: [ view_parse ] --START--
INFO: ParseTemplate Behavior ::run [ RunTime:0.689039s ]
INFO: [ view_parse ] --END-- [ RunTime:0.696040s ]
INFO: [ view_filter ] --START--
INFO: ContentReplace Behavior ::run [ RunTime:0.007000s ]
INFO: TokenBuild Behavior ::run [ RunTime:0.009001s ]
INFO: WriteHtmlCache Behavior ::run [ RunTime:0.006000s ]
INFO: ShowRuntime Behavior ::run [ RunTime:0.012000s ]
INFO: [ view_filter ] --END-- [ RunTime:0.050002s ]
INFO: [ view_end ] --START--
INFO: ShowPageTrace Behavior ::run [ RunTime:0.010001s ]
INFO: [ view_end ] --END-- [ RunTime:0.016001s ]

[ 2014-08-12T09:38:23+08:00 ] 127.0.0.1 /php_demo/shizhan/10/10wish/index.php/Njb/Index/tongji?checkbox%5B%5D=24561&checkbox%5B%5D=28422&date_begin=2014-08-11&date_end=2014-08-12
INFO: [ route_check ] --START--
INFO: CheckRoute Behavior ::run [ RunTime:0.019001s ]
INFO: [ route_check ] --END-- [ RunTime:0.040002s ]
INFO: [ app_begin ] --START--
INFO: ReadHtmlCache Behavior ::run [ RunTime:0.023001s ]
INFO: [ app_begin ] --END-- [ RunTime:0.045003s ]
SQL: SELECT l.name,COALESCE(a.ucount,0) as yhs,COALESCE(c.ulcount,0) as dlyhs,COALESCE(c.logCount,0) as dlcs FROM location l LEFT JOIN (SELECT ud.locid locid,COUNT(ud.id) ucount FROM   (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)    UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud     GROUP BY ud.locid  ) a ON l.id=a.locid  LEFT JOIN (SELECT ud.locid locid,COUNT(DISTINCT ud.id) ulcount,COUNT(ud.id) logCount FROM login_log lo,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE lo.user_id=ud.id   AND lo.login_time>="2014-08-11 00:00:00" AND lo.login_time<"2014-08-12 00:00:00"   GROUP BY ud.locid) c ON l.id=c.locid WHERE l.id IN(24561,28422) [ RunTime:0.064003s ]
SQL: SELECT l.name,COALESCE(a.noticeCount,0) noticeCount,COALESCE(a.userCount,0) userCount FROM location l LEFT JOIN  (SELECT ud.locid locid,COUNT(n.id) noticeCount,COUNT(DISTINCT ud.id) userCount FROM notice n,   (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)    UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud   WHERE n.owner_id=ud.id AND n.publish_time>="2014-08-11 00:00:00"    AND n.publish_time<"2014-08-12 00:00:00" GROUP BY ud.locid) a  ON l.id=a.locid WHERE l.id IN(24561,28422) [ RunTime:0.006001s ]
SQL: SELECT l.name,COALESCE(a.asCount,0) a,COALESCE(b.adminCount,0) b,COALESCE(c.noAdminCount,0) c FROM location l LEFT JOIN  (SELECT ud.locid locid,COUNT(t.id) asCount FROM assignment t,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE t.creator_id=ud.id AND t.create_time>="2014-08-11 00:00:00" AND  t.create_time<"2014-08-12 00:00:00"  GROUP BY ud.locid) a ON l.id=a.locid  LEFT JOIN (SELECT ud.locid locid,COUNT(DISTINCT ud.id) adminCount FROM assignment t,app_user_role r,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud   WHERE t.creator_id=ud.id AND ud.id=r.user_id AND r.role='TechAdmin'   AND t.create_time>="2014-08-11 00:00:00" AND  t.create_time<"2014-08-12 00:00:00"  GROUP BY ud.locid ) b ON l.id=b.locid LEFT JOIN (SELECT ud.locid locid,COUNT(DISTINCT ud.id) noAdminCount FROM assignment t,app_user_role r,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE t.creator_id=ud.id AND ud.id=r.user_id AND r.role='Technician'   AND t.create_time>="2014-08-11 00:00:00" AND  t.create_time<"2014-08-12 00:00:00"  GROUP BY ud.locid ) c ON l.id=c.locid  WHERE l.id IN(24561,28422) [ RunTime:0.014001s ]
SQL: SELECT l.name,COALESCE(a.worklogCount,0) a,COALESCE(a.uCount,0) b,COALESCE(b.docCount,0) c,COALESCE(c.phoCount,0) d,COALESCE(d.audioCount,0) e FROM location l LEFT JOIN  (SELECT ud.locid locid,COUNT(DISTINCT w.id) worklogCount,COUNT(DISTINCT w.owner_id) uCount FROM work_log w,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE w.owner_id=ud.id    AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00"  GROUP BY ud.locid) a ON l.id=a.locid LEFT JOIN  (SELECT ud.locid locid,i.media_type,COUNT(i.id) docCount FROM work_log w,work_log_item i,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE w.owner_id=ud.id AND w.id=i.work_log_id   AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00"  AND i.media_type=1   GROUP BY ud.locid ) b ON l.id=b.locid LEFT JOIN  (SELECT ud.locid locid,i.media_type,COUNT(i.id) phoCount FROM work_log w,work_log_item i,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE w.owner_id=ud.id AND w.id=i.work_log_id   AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00"  AND i.media_type=2   GROUP BY ud.locid ) c ON l.id=c.locid LEFT JOIN  (SELECT ud.locid locid,i.media_type,COUNT(i.id) audioCount FROM work_log w,work_log_item i,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE w.owner_id=ud.id AND w.id=i.work_log_id   AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00"  AND i.media_type=3   GROUP BY ud.locid ) d ON l.id=d.locid   WHERE l.id IN(24561,28422) [ RunTime:0.083004s ]
SQL: SELECT l.name,COALESCE(a.photoCount,0) a,COALESCE(a.ucount,0) b,COALESCE(b.priseCount,0) c,COALESCE(c.comCount,0) d FROM location l LEFT JOIN (SELECT ud.locid locid,COUNT(i.id) photoCount,COUNT(DISTINCT ud.id) ucount FROM album m,album_item i,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)  UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE m.owner_id=ud.id AND i.album_id=m.id   AND i.create_time>="2014-08-11 00:00:00" AND i.create_time<"2014-08-12 00:00:00"  GROUP BY ud.locid) a ON l.id=a.locid LEFT JOIN  (SELECT ud.locid locid,COUNT(uc.id) priseCount FROM user_comment uc,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)  UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE ud.id=uc.creator_id AND uc.obj_type='AlbumItem'   AND uc.create_time>"2014-08-11 00:00:00" AND uc.create_time<"2014-08-12 00:00:00"   GROUP BY ud.locid ) b ON l.id=b.locid LEFT JOIN (SELECT ud.locid locid,COUNT(uc.id) comCount FROM user_comment uc,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)  UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE ud.id=uc.creator_id AND uc.obj_type='SystemComment'   AND uc.create_time>="2014-08-11 00:00:00" AND uc.create_time<"2014-08-12 00:00:00"  GROUP BY ud.locid) c ON l.id=c.locid  WHERE l.id IN(24561,28422) [ RunTime:0.053003s ]
SQL: SELECT a.rname a,l.name b,d.name c,a.age d FROM (SELECT u.id uid,u.real_name rname,u.location_id locid,u.dept_id depId,(2014-(SELECT SUBSTR(u.identify_value,7,4))+0) age FROM app_user u WHERE NOT EXISTS ( SELECT lo.user_id FROM login_log lo WHERE u.id=lo.user_id  ) AND u.id IN( SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id FROM app_user u WHERE u.location_id IN(24561,28422) )) a,location l,department d WHERE a.depId=d.id AND a.locid=l.id [ RunTime:4.498257s ]
SQL: SELECT u.id,u.real_name,COALESCE(a.worklogCount,0) worklogCount,COALESCE(b.logCount,0) logCount FROM app_user u LEFT JOIN (SELECT w.owner_id uid,COALESCE(COUNT(w.id)) worklogCount FROM work_log w WHERE w.owner_id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24561 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24561 ) AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00" GROUP BY w.owner_id) a ON u.id=a.uid LEFT JOIN (SELECT lo.user_id uid,COUNT(lo.user_id) logCount FROM login_log lo WHERE lo.user_id IN( SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24561 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24561 ) AND lo.login_time>="2014-08-11 00:00:00" AND lo.login_time<"2014-08-12 00:00:00" GROUP BY lo.user_id ) b ON u.id=b.uid WHERE u.id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24561 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24561 ) ORDER BY a.worklogCount DESC,b.logCount DESC LIMIT 10 [ RunTime:0.665038s ]
SQL: SELECT u.id,u.real_name,COALESCE(a.worklogCount,0) worklogCount,COALESCE(b.logCount,0) logCount FROM app_user u LEFT JOIN (SELECT w.owner_id uid,COALESCE(COUNT(w.id)) worklogCount FROM work_log w WHERE w.owner_id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24521 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24521 ) AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00" GROUP BY w.owner_id) a ON u.id=a.uid LEFT JOIN (SELECT lo.user_id uid,COUNT(lo.user_id) logCount FROM login_log lo WHERE lo.user_id IN( SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24521 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24521 ) AND lo.login_time>="2014-08-11 00:00:00" AND lo.login_time<"2014-08-12 00:00:00" GROUP BY lo.user_id ) b ON u.id=b.uid WHERE u.id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24521 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24521 ) ORDER BY a.worklogCount DESC,b.logCount DESC LIMIT 10 [ RunTime:0.631036s ]
SQL: SELECT u.id,u.real_name,COALESCE(a.worklogCount,0) worklogCount,COALESCE(b.logCount,0) logCount FROM app_user u LEFT JOIN (SELECT w.owner_id uid,COALESCE(COUNT(w.id)) worklogCount FROM work_log w WHERE w.owner_id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24543 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24543 ) AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00" GROUP BY w.owner_id) a ON u.id=a.uid LEFT JOIN (SELECT lo.user_id uid,COUNT(lo.user_id) logCount FROM login_log lo WHERE lo.user_id IN( SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24543 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24543 ) AND lo.login_time>="2014-08-11 00:00:00" AND lo.login_time<"2014-08-12 00:00:00" GROUP BY lo.user_id ) b ON u.id=b.uid WHERE u.id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24543 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24543 ) ORDER BY a.worklogCount DESC,b.logCount DESC LIMIT 10 [ RunTime:0.575032s ]
SQL: SELECT u.id,u.real_name,COALESCE(a.worklogCount,0) worklogCount,COALESCE(b.logCount,0) logCount FROM app_user u LEFT JOIN (SELECT w.owner_id uid,COALESCE(COUNT(w.id)) worklogCount FROM work_log w WHERE w.owner_id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =28422 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =28422 ) AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00" GROUP BY w.owner_id) a ON u.id=a.uid LEFT JOIN (SELECT lo.user_id uid,COUNT(lo.user_id) logCount FROM login_log lo WHERE lo.user_id IN( SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =28422 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =28422 ) AND lo.login_time>="2014-08-11 00:00:00" AND lo.login_time<"2014-08-12 00:00:00" GROUP BY lo.user_id ) b ON u.id=b.uid WHERE u.id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =28422 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =28422 ) ORDER BY a.worklogCount DESC,b.logCount DESC LIMIT 10 [ RunTime:0.565032s ]
SQL: SELECT l.name,COALESCE(a.ulcount,0) b FROM  location l LEFT JOIN (SELECT ud.locid locid,COUNT(DISTINCT ud.id) ulcount,COUNT(ud.id) logCount FROM login_log lo,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE lo.user_id=ud.id   AND lo.login_time>="2014-08-11 00:00:00"   GROUP BY ud.locid) a ON a.locid=l.id WHERE l.id IN (24561,28422) [ RunTime:0.039002s ]
SQL: 
				CALL count_worklog_all("2014-08-11 00:00:00","2014-08-12 00:00:00",("24561,28422"))
				 [ RunTime:0.029002s ]
INFO: [ view_parse ] --START--
INFO: ParseTemplate Behavior ::run [ RunTime:0.738042s ]
INFO: [ view_parse ] --END-- [ RunTime:0.744043s ]
INFO: [ view_filter ] --START--
INFO: ContentReplace Behavior ::run [ RunTime:0.009001s ]
INFO: TokenBuild Behavior ::run [ RunTime:0.010001s ]
INFO: WriteHtmlCache Behavior ::run [ RunTime:0.005000s ]
INFO: ShowRuntime Behavior ::run [ RunTime:0.015001s ]
INFO: [ view_filter ] --END-- [ RunTime:0.055003s ]
INFO: [ view_end ] --START--
INFO: ShowPageTrace Behavior ::run [ RunTime:0.011001s ]
INFO: [ view_end ] --END-- [ RunTime:0.019001s ]

[ 2014-08-12T09:39:06+08:00 ] 127.0.0.1 /php_demo/shizhan/10/10wish/index.php/Njb/Index/tongji?checkbox%5B%5D=24561&checkbox%5B%5D=28422&date_begin=2014-08-11&date_end=2014-08-12
INFO: [ route_check ] --START--
INFO: CheckRoute Behavior ::run [ RunTime:0.021001s ]
INFO: [ route_check ] --END-- [ RunTime:0.039002s ]
INFO: [ app_begin ] --START--
INFO: ReadHtmlCache Behavior ::run [ RunTime:0.021001s ]
INFO: [ app_begin ] --END-- [ RunTime:0.031001s ]
SQL: SELECT l.name,COALESCE(a.ucount,0) as yhs,COALESCE(c.ulcount,0) as dlyhs,COALESCE(c.logCount,0) as dlcs FROM location l LEFT JOIN (SELECT ud.locid locid,COUNT(ud.id) ucount FROM   (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)    UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud     GROUP BY ud.locid  ) a ON l.id=a.locid  LEFT JOIN (SELECT ud.locid locid,COUNT(DISTINCT ud.id) ulcount,COUNT(ud.id) logCount FROM login_log lo,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE lo.user_id=ud.id   AND lo.login_time>="2014-08-11 00:00:00" AND lo.login_time<"2014-08-12 00:00:00"   GROUP BY ud.locid) c ON l.id=c.locid WHERE l.id IN(24561,28422) [ RunTime:0.077004s ]
SQL: SELECT l.name,COALESCE(a.noticeCount,0) noticeCount,COALESCE(a.userCount,0) userCount FROM location l LEFT JOIN  (SELECT ud.locid locid,COUNT(n.id) noticeCount,COUNT(DISTINCT ud.id) userCount FROM notice n,   (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)    UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud   WHERE n.owner_id=ud.id AND n.publish_time>="2014-08-11 00:00:00"    AND n.publish_time<"2014-08-12 00:00:00" GROUP BY ud.locid) a  ON l.id=a.locid WHERE l.id IN(24561,28422) [ RunTime:0.029002s ]
SQL: SELECT l.name,COALESCE(a.asCount,0) a,COALESCE(b.adminCount,0) b,COALESCE(c.noAdminCount,0) c FROM location l LEFT JOIN  (SELECT ud.locid locid,COUNT(t.id) asCount FROM assignment t,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE t.creator_id=ud.id AND t.create_time>="2014-08-11 00:00:00" AND  t.create_time<"2014-08-12 00:00:00"  GROUP BY ud.locid) a ON l.id=a.locid  LEFT JOIN (SELECT ud.locid locid,COUNT(DISTINCT ud.id) adminCount FROM assignment t,app_user_role r,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud   WHERE t.creator_id=ud.id AND ud.id=r.user_id AND r.role='TechAdmin'   AND t.create_time>="2014-08-11 00:00:00" AND  t.create_time<"2014-08-12 00:00:00"  GROUP BY ud.locid ) b ON l.id=b.locid LEFT JOIN (SELECT ud.locid locid,COUNT(DISTINCT ud.id) noAdminCount FROM assignment t,app_user_role r,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE t.creator_id=ud.id AND ud.id=r.user_id AND r.role='Technician'   AND t.create_time>="2014-08-11 00:00:00" AND  t.create_time<"2014-08-12 00:00:00"  GROUP BY ud.locid ) c ON l.id=c.locid  WHERE l.id IN(24561,28422) [ RunTime:0.014000s ]
SQL: SELECT l.name,COALESCE(a.worklogCount,0) a,COALESCE(a.uCount,0) b,COALESCE(b.docCount,0) c,COALESCE(c.phoCount,0) d,COALESCE(d.audioCount,0) e FROM location l LEFT JOIN  (SELECT ud.locid locid,COUNT(DISTINCT w.id) worklogCount,COUNT(DISTINCT w.owner_id) uCount FROM work_log w,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE w.owner_id=ud.id    AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00"  GROUP BY ud.locid) a ON l.id=a.locid LEFT JOIN  (SELECT ud.locid locid,i.media_type,COUNT(i.id) docCount FROM work_log w,work_log_item i,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE w.owner_id=ud.id AND w.id=i.work_log_id   AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00"  AND i.media_type=1   GROUP BY ud.locid ) b ON l.id=b.locid LEFT JOIN  (SELECT ud.locid locid,i.media_type,COUNT(i.id) phoCount FROM work_log w,work_log_item i,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE w.owner_id=ud.id AND w.id=i.work_log_id   AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00"  AND i.media_type=2   GROUP BY ud.locid ) c ON l.id=c.locid LEFT JOIN  (SELECT ud.locid locid,i.media_type,COUNT(i.id) audioCount FROM work_log w,work_log_item i,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE w.owner_id=ud.id AND w.id=i.work_log_id   AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00"  AND i.media_type=3   GROUP BY ud.locid ) d ON l.id=d.locid   WHERE l.id IN(24561,28422) [ RunTime:0.034002s ]
SQL: SELECT l.name,COALESCE(a.photoCount,0) a,COALESCE(a.ucount,0) b,COALESCE(b.priseCount,0) c,COALESCE(c.comCount,0) d FROM location l LEFT JOIN (SELECT ud.locid locid,COUNT(i.id) photoCount,COUNT(DISTINCT ud.id) ucount FROM album m,album_item i,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)  UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE m.owner_id=ud.id AND i.album_id=m.id   AND i.create_time>="2014-08-11 00:00:00" AND i.create_time<"2014-08-12 00:00:00"  GROUP BY ud.locid) a ON l.id=a.locid LEFT JOIN  (SELECT ud.locid locid,COUNT(uc.id) priseCount FROM user_comment uc,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)  UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE ud.id=uc.creator_id AND uc.obj_type='AlbumItem'   AND uc.create_time>"2014-08-11 00:00:00" AND uc.create_time<"2014-08-12 00:00:00"   GROUP BY ud.locid ) b ON l.id=b.locid LEFT JOIN (SELECT ud.locid locid,COUNT(uc.id) comCount FROM user_comment uc,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)  UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE ud.id=uc.creator_id AND uc.obj_type='SystemComment'   AND uc.create_time>="2014-08-11 00:00:00" AND uc.create_time<"2014-08-12 00:00:00"  GROUP BY ud.locid) c ON l.id=c.locid  WHERE l.id IN(24561,28422) [ RunTime:0.019002s ]
SQL: SELECT a.rname a,l.name b,d.name c,a.age d FROM (SELECT u.id uid,u.real_name rname,u.location_id locid,u.dept_id depId,(2014-(SELECT SUBSTR(u.identify_value,7,4))+0) age FROM app_user u WHERE NOT EXISTS ( SELECT lo.user_id FROM login_log lo WHERE u.id=lo.user_id  ) AND u.id IN( SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id FROM app_user u WHERE u.location_id IN(24561,28422) )) a,location l,department d WHERE a.depId=d.id AND a.locid=l.id [ RunTime:5.137294s ]
SQL: SELECT u.id,u.real_name,COALESCE(a.worklogCount,0) worklogCount,COALESCE(b.logCount,0) logCount FROM app_user u LEFT JOIN (SELECT w.owner_id uid,COALESCE(COUNT(w.id)) worklogCount FROM work_log w WHERE w.owner_id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24561 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24561 ) AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00" GROUP BY w.owner_id) a ON u.id=a.uid LEFT JOIN (SELECT lo.user_id uid,COUNT(lo.user_id) logCount FROM login_log lo WHERE lo.user_id IN( SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24561 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24561 ) AND lo.login_time>="2014-08-11 00:00:00" AND lo.login_time<"2014-08-12 00:00:00" GROUP BY lo.user_id ) b ON u.id=b.uid WHERE u.id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24561 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24561 ) ORDER BY a.worklogCount DESC,b.logCount DESC LIMIT 10 [ RunTime:1.156066s ]
SQL: SELECT u.id,u.real_name,COALESCE(a.worklogCount,0) worklogCount,COALESCE(b.logCount,0) logCount FROM app_user u LEFT JOIN (SELECT w.owner_id uid,COALESCE(COUNT(w.id)) worklogCount FROM work_log w WHERE w.owner_id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24521 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24521 ) AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00" GROUP BY w.owner_id) a ON u.id=a.uid LEFT JOIN (SELECT lo.user_id uid,COUNT(lo.user_id) logCount FROM login_log lo WHERE lo.user_id IN( SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24521 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24521 ) AND lo.login_time>="2014-08-11 00:00:00" AND lo.login_time<"2014-08-12 00:00:00" GROUP BY lo.user_id ) b ON u.id=b.uid WHERE u.id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24521 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24521 ) ORDER BY a.worklogCount DESC,b.logCount DESC LIMIT 10 [ RunTime:1.223070s ]
SQL: SELECT u.id,u.real_name,COALESCE(a.worklogCount,0) worklogCount,COALESCE(b.logCount,0) logCount FROM app_user u LEFT JOIN (SELECT w.owner_id uid,COALESCE(COUNT(w.id)) worklogCount FROM work_log w WHERE w.owner_id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24543 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24543 ) AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00" GROUP BY w.owner_id) a ON u.id=a.uid LEFT JOIN (SELECT lo.user_id uid,COUNT(lo.user_id) logCount FROM login_log lo WHERE lo.user_id IN( SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24543 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24543 ) AND lo.login_time>="2014-08-11 00:00:00" AND lo.login_time<"2014-08-12 00:00:00" GROUP BY lo.user_id ) b ON u.id=b.uid WHERE u.id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24543 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24543 ) ORDER BY a.worklogCount DESC,b.logCount DESC LIMIT 10 [ RunTime:1.110063s ]
SQL: SELECT u.id,u.real_name,COALESCE(a.worklogCount,0) worklogCount,COALESCE(b.logCount,0) logCount FROM app_user u LEFT JOIN (SELECT w.owner_id uid,COALESCE(COUNT(w.id)) worklogCount FROM work_log w WHERE w.owner_id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =28422 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =28422 ) AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00" GROUP BY w.owner_id) a ON u.id=a.uid LEFT JOIN (SELECT lo.user_id uid,COUNT(lo.user_id) logCount FROM login_log lo WHERE lo.user_id IN( SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =28422 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =28422 ) AND lo.login_time>="2014-08-11 00:00:00" AND lo.login_time<"2014-08-12 00:00:00" GROUP BY lo.user_id ) b ON u.id=b.uid WHERE u.id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =28422 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =28422 ) ORDER BY a.worklogCount DESC,b.logCount DESC LIMIT 10 [ RunTime:1.010058s ]
SQL: SELECT l.name,COALESCE(a.ulcount,0) b FROM  location l LEFT JOIN (SELECT ud.locid locid,COUNT(DISTINCT ud.id) ulcount,COUNT(ud.id) logCount FROM login_log lo,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE lo.user_id=ud.id   AND lo.login_time>="2014-08-11 00:00:00"   GROUP BY ud.locid) a ON a.locid=l.id WHERE l.id IN (24561,28422) [ RunTime:0.086005s ]
SQL: 
				CALL count_worklog_all("2014-08-11 00:00:00","2014-08-12 00:00:00",("24561,28422"))
				 [ RunTime:0.047003s ]
INFO: [ view_parse ] --START--
INFO: ParseTemplate Behavior ::run [ RunTime:1.103063s ]
INFO: [ view_parse ] --END-- [ RunTime:1.112063s ]
INFO: [ view_filter ] --START--
INFO: ContentReplace Behavior ::run [ RunTime:0.011000s ]
INFO: TokenBuild Behavior ::run [ RunTime:0.017001s ]
INFO: WriteHtmlCache Behavior ::run [ RunTime:0.008000s ]
INFO: ShowRuntime Behavior ::run [ RunTime:0.019002s ]
INFO: [ view_filter ] --END-- [ RunTime:0.076005s ]
INFO: [ view_end ] --START--
INFO: ShowPageTrace Behavior ::run [ RunTime:0.012000s ]
INFO: [ view_end ] --END-- [ RunTime:0.020002s ]

[ 2014-08-12T09:42:12+08:00 ] 127.0.0.1 /php_demo/shizhan/10/10wish/index.php/Njb/Index/tongji?checkbox%5B%5D=24561&checkbox%5B%5D=28422&date_begin=2014-08-11&date_end=2014-08-12
INFO: [ route_check ] --START--
INFO: CheckRoute Behavior ::run [ RunTime:0.024002s ]
INFO: [ route_check ] --END-- [ RunTime:0.044003s ]
INFO: [ app_begin ] --START--
INFO: ReadHtmlCache Behavior ::run [ RunTime:0.021001s ]
INFO: [ app_begin ] --END-- [ RunTime:0.035002s ]
SQL: SELECT l.name,COALESCE(a.ucount,0) as yhs,COALESCE(c.ulcount,0) as dlyhs,COALESCE(c.logCount,0) as dlcs FROM location l LEFT JOIN (SELECT ud.locid locid,COUNT(ud.id) ucount FROM   (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)    UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud     GROUP BY ud.locid  ) a ON l.id=a.locid  LEFT JOIN (SELECT ud.locid locid,COUNT(DISTINCT ud.id) ulcount,COUNT(ud.id) logCount FROM login_log lo,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE lo.user_id=ud.id   AND lo.login_time>="2014-08-11 00:00:00" AND lo.login_time<"2014-08-12 00:00:00"   GROUP BY ud.locid) c ON l.id=c.locid WHERE l.id IN(24561,28422) [ RunTime:0.062003s ]
SQL: SELECT l.name,COALESCE(a.noticeCount,0) noticeCount,COALESCE(a.userCount,0) userCount FROM location l LEFT JOIN  (SELECT ud.locid locid,COUNT(n.id) noticeCount,COUNT(DISTINCT ud.id) userCount FROM notice n,   (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)    UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud   WHERE n.owner_id=ud.id AND n.publish_time>="2014-08-11 00:00:00"    AND n.publish_time<"2014-08-12 00:00:00" GROUP BY ud.locid) a  ON l.id=a.locid WHERE l.id IN(24561,28422) [ RunTime:0.007001s ]
SQL: SELECT l.name,COALESCE(a.asCount,0) a,COALESCE(b.adminCount,0) b,COALESCE(c.noAdminCount,0) c FROM location l LEFT JOIN  (SELECT ud.locid locid,COUNT(t.id) asCount FROM assignment t,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE t.creator_id=ud.id AND t.create_time>="2014-08-11 00:00:00" AND  t.create_time<"2014-08-12 00:00:00"  GROUP BY ud.locid) a ON l.id=a.locid  LEFT JOIN (SELECT ud.locid locid,COUNT(DISTINCT ud.id) adminCount FROM assignment t,app_user_role r,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud   WHERE t.creator_id=ud.id AND ud.id=r.user_id AND r.role='TechAdmin'   AND t.create_time>="2014-08-11 00:00:00" AND  t.create_time<"2014-08-12 00:00:00"  GROUP BY ud.locid ) b ON l.id=b.locid LEFT JOIN (SELECT ud.locid locid,COUNT(DISTINCT ud.id) noAdminCount FROM assignment t,app_user_role r,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE t.creator_id=ud.id AND ud.id=r.user_id AND r.role='Technician'   AND t.create_time>="2014-08-11 00:00:00" AND  t.create_time<"2014-08-12 00:00:00"  GROUP BY ud.locid ) c ON l.id=c.locid  WHERE l.id IN(24561,28422) [ RunTime:0.015000s ]
SQL: SELECT l.name,COALESCE(a.worklogCount,0) a,COALESCE(a.uCount,0) b,COALESCE(b.docCount,0) c,COALESCE(c.phoCount,0) d,COALESCE(d.audioCount,0) e FROM location l LEFT JOIN  (SELECT ud.locid locid,COUNT(DISTINCT w.id) worklogCount,COUNT(DISTINCT w.owner_id) uCount FROM work_log w,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE w.owner_id=ud.id    AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00"  GROUP BY ud.locid) a ON l.id=a.locid LEFT JOIN  (SELECT ud.locid locid,i.media_type,COUNT(i.id) docCount FROM work_log w,work_log_item i,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE w.owner_id=ud.id AND w.id=i.work_log_id   AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00"  AND i.media_type=1   GROUP BY ud.locid ) b ON l.id=b.locid LEFT JOIN  (SELECT ud.locid locid,i.media_type,COUNT(i.id) phoCount FROM work_log w,work_log_item i,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE w.owner_id=ud.id AND w.id=i.work_log_id   AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00"  AND i.media_type=2   GROUP BY ud.locid ) c ON l.id=c.locid LEFT JOIN  (SELECT ud.locid locid,i.media_type,COUNT(i.id) audioCount FROM work_log w,work_log_item i,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE w.owner_id=ud.id AND w.id=i.work_log_id   AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00"  AND i.media_type=3   GROUP BY ud.locid ) d ON l.id=d.locid   WHERE l.id IN(24561,28422) [ RunTime:0.035002s ]
SQL: SELECT l.name,COALESCE(a.photoCount,0) a,COALESCE(a.ucount,0) b,COALESCE(b.priseCount,0) c,COALESCE(c.comCount,0) d FROM location l LEFT JOIN (SELECT ud.locid locid,COUNT(i.id) photoCount,COUNT(DISTINCT ud.id) ucount FROM album m,album_item i,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)  UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE m.owner_id=ud.id AND i.album_id=m.id   AND i.create_time>="2014-08-11 00:00:00" AND i.create_time<"2014-08-12 00:00:00"  GROUP BY ud.locid) a ON l.id=a.locid LEFT JOIN  (SELECT ud.locid locid,COUNT(uc.id) priseCount FROM user_comment uc,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)  UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE ud.id=uc.creator_id AND uc.obj_type='AlbumItem'   AND uc.create_time>"2014-08-11 00:00:00" AND uc.create_time<"2014-08-12 00:00:00"   GROUP BY ud.locid ) b ON l.id=b.locid LEFT JOIN (SELECT ud.locid locid,COUNT(uc.id) comCount FROM user_comment uc,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)  UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE ud.id=uc.creator_id AND uc.obj_type='SystemComment'   AND uc.create_time>="2014-08-11 00:00:00" AND uc.create_time<"2014-08-12 00:00:00"  GROUP BY ud.locid) c ON l.id=c.locid  WHERE l.id IN(24561,28422) [ RunTime:0.017001s ]
SQL: SELECT a.rname a,l.name b,d.name c,a.age d FROM (SELECT u.id uid,u.real_name rname,u.location_id locid,u.dept_id depId,(2014-(SELECT SUBSTR(u.identify_value,7,4))+0) age FROM app_user u WHERE NOT EXISTS ( SELECT lo.user_id FROM login_log lo WHERE u.id=lo.user_id  ) AND u.id IN( SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id FROM app_user u WHERE u.location_id IN(24561,28422) )) a,location l,department d WHERE a.depId=d.id AND a.locid=l.id [ RunTime:5.360306s ]
SQL: SELECT u.id,u.real_name,COALESCE(a.worklogCount,0) worklogCount,COALESCE(b.logCount,0) logCount FROM app_user u LEFT JOIN (SELECT w.owner_id uid,COALESCE(COUNT(w.id)) worklogCount FROM work_log w WHERE w.owner_id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24561 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24561 ) AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00" GROUP BY w.owner_id) a ON u.id=a.uid LEFT JOIN (SELECT lo.user_id uid,COUNT(lo.user_id) logCount FROM login_log lo WHERE lo.user_id IN( SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24561 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24561 ) AND lo.login_time>="2014-08-11 00:00:00" AND lo.login_time<"2014-08-12 00:00:00" GROUP BY lo.user_id ) b ON u.id=b.uid WHERE u.id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24561 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24561 ) ORDER BY a.worklogCount DESC,b.logCount DESC LIMIT 10 [ RunTime:0.853049s ]
SQL: SELECT u.id,u.real_name,COALESCE(a.worklogCount,0) worklogCount,COALESCE(b.logCount,0) logCount FROM app_user u LEFT JOIN (SELECT w.owner_id uid,COALESCE(COUNT(w.id)) worklogCount FROM work_log w WHERE w.owner_id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24521 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24521 ) AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00" GROUP BY w.owner_id) a ON u.id=a.uid LEFT JOIN (SELECT lo.user_id uid,COUNT(lo.user_id) logCount FROM login_log lo WHERE lo.user_id IN( SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24521 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24521 ) AND lo.login_time>="2014-08-11 00:00:00" AND lo.login_time<"2014-08-12 00:00:00" GROUP BY lo.user_id ) b ON u.id=b.uid WHERE u.id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24521 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24521 ) ORDER BY a.worklogCount DESC,b.logCount DESC LIMIT 10 [ RunTime:0.909052s ]
SQL: SELECT u.id,u.real_name,COALESCE(a.worklogCount,0) worklogCount,COALESCE(b.logCount,0) logCount FROM app_user u LEFT JOIN (SELECT w.owner_id uid,COALESCE(COUNT(w.id)) worklogCount FROM work_log w WHERE w.owner_id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24543 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24543 ) AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00" GROUP BY w.owner_id) a ON u.id=a.uid LEFT JOIN (SELECT lo.user_id uid,COUNT(lo.user_id) logCount FROM login_log lo WHERE lo.user_id IN( SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24543 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24543 ) AND lo.login_time>="2014-08-11 00:00:00" AND lo.login_time<"2014-08-12 00:00:00" GROUP BY lo.user_id ) b ON u.id=b.uid WHERE u.id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24543 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24543 ) ORDER BY a.worklogCount DESC,b.logCount DESC LIMIT 10 [ RunTime:0.830048s ]
SQL: SELECT u.id,u.real_name,COALESCE(a.worklogCount,0) worklogCount,COALESCE(b.logCount,0) logCount FROM app_user u LEFT JOIN (SELECT w.owner_id uid,COALESCE(COUNT(w.id)) worklogCount FROM work_log w WHERE w.owner_id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =28422 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =28422 ) AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00" GROUP BY w.owner_id) a ON u.id=a.uid LEFT JOIN (SELECT lo.user_id uid,COUNT(lo.user_id) logCount FROM login_log lo WHERE lo.user_id IN( SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =28422 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =28422 ) AND lo.login_time>="2014-08-11 00:00:00" AND lo.login_time<"2014-08-12 00:00:00" GROUP BY lo.user_id ) b ON u.id=b.uid WHERE u.id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =28422 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =28422 ) ORDER BY a.worklogCount DESC,b.logCount DESC LIMIT 10 [ RunTime:0.825047s ]
SQL: SELECT l.name,COALESCE(a.ulcount,0) b FROM  location l LEFT JOIN (SELECT ud.locid locid,COUNT(DISTINCT ud.id) ulcount,COUNT(ud.id) logCount FROM login_log lo,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE lo.user_id=ud.id   AND lo.login_time>="2014-08-11 00:00:00"   GROUP BY ud.locid) a ON a.locid=l.id WHERE l.id IN (24561,28422) [ RunTime:0.057003s ]
SQL: 
				CALL count_worklog_all("2014-08-11 00:00:00","2014-08-12 00:00:00",("24561,28422"))
				 [ RunTime:0.056003s ]
INFO: [ view_parse ] --START--
INFO: ParseTemplate Behavior ::run [ RunTime:1.428081s ]
INFO: [ view_parse ] --END-- [ RunTime:1.440083s ]
INFO: [ view_filter ] --START--
INFO: ContentReplace Behavior ::run [ RunTime:0.014000s ]
INFO: TokenBuild Behavior ::run [ RunTime:0.021001s ]
INFO: WriteHtmlCache Behavior ::run [ RunTime:0.016001s ]
INFO: ShowRuntime Behavior ::run [ RunTime:0.041002s ]
INFO: [ view_filter ] --END-- [ RunTime:0.130008s ]
INFO: [ view_end ] --START--
INFO: ShowPageTrace Behavior ::run [ RunTime:0.061003s ]
INFO: [ view_end ] --END-- [ RunTime:0.082004s ]

[ 2014-08-12T09:42:40+08:00 ] 127.0.0.1 /php_demo/shizhan/10/10wish/index.php/Njb/Index/tongji?checkbox%5B%5D=24561&checkbox%5B%5D=28422&date_begin=2014-08-11&date_end=2014-08-12
INFO: [ route_check ] --START--
INFO: CheckRoute Behavior ::run [ RunTime:0.018001s ]
INFO: [ route_check ] --END-- [ RunTime:0.030002s ]
INFO: [ app_begin ] --START--
INFO: ReadHtmlCache Behavior ::run [ RunTime:0.044003s ]
INFO: [ app_begin ] --END-- [ RunTime:0.062003s ]
SQL: SELECT l.name,COALESCE(a.ucount,0) as yhs,COALESCE(c.ulcount,0) as dlyhs,COALESCE(c.logCount,0) as dlcs FROM location l LEFT JOIN (SELECT ud.locid locid,COUNT(ud.id) ucount FROM   (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)    UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud     GROUP BY ud.locid  ) a ON l.id=a.locid  LEFT JOIN (SELECT ud.locid locid,COUNT(DISTINCT ud.id) ulcount,COUNT(ud.id) logCount FROM login_log lo,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE lo.user_id=ud.id   AND lo.login_time>="2014-08-11 00:00:00" AND lo.login_time<"2014-08-12 00:00:00"   GROUP BY ud.locid) c ON l.id=c.locid WHERE l.id IN(24561,28422) [ RunTime:0.062003s ]
SQL: SELECT l.name,COALESCE(a.noticeCount,0) noticeCount,COALESCE(a.userCount,0) userCount FROM location l LEFT JOIN  (SELECT ud.locid locid,COUNT(n.id) noticeCount,COUNT(DISTINCT ud.id) userCount FROM notice n,   (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)    UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud   WHERE n.owner_id=ud.id AND n.publish_time>="2014-08-11 00:00:00"    AND n.publish_time<"2014-08-12 00:00:00" GROUP BY ud.locid) a  ON l.id=a.locid WHERE l.id IN(24561,28422) [ RunTime:0.007001s ]
SQL: SELECT l.name,COALESCE(a.asCount,0) a,COALESCE(b.adminCount,0) b,COALESCE(c.noAdminCount,0) c FROM location l LEFT JOIN  (SELECT ud.locid locid,COUNT(t.id) asCount FROM assignment t,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE t.creator_id=ud.id AND t.create_time>="2014-08-11 00:00:00" AND  t.create_time<"2014-08-12 00:00:00"  GROUP BY ud.locid) a ON l.id=a.locid  LEFT JOIN (SELECT ud.locid locid,COUNT(DISTINCT ud.id) adminCount FROM assignment t,app_user_role r,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud   WHERE t.creator_id=ud.id AND ud.id=r.user_id AND r.role='TechAdmin'   AND t.create_time>="2014-08-11 00:00:00" AND  t.create_time<"2014-08-12 00:00:00"  GROUP BY ud.locid ) b ON l.id=b.locid LEFT JOIN (SELECT ud.locid locid,COUNT(DISTINCT ud.id) noAdminCount FROM assignment t,app_user_role r,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE t.creator_id=ud.id AND ud.id=r.user_id AND r.role='Technician'   AND t.create_time>="2014-08-11 00:00:00" AND  t.create_time<"2014-08-12 00:00:00"  GROUP BY ud.locid ) c ON l.id=c.locid  WHERE l.id IN(24561,28422) [ RunTime:0.015000s ]
SQL: SELECT l.name,COALESCE(a.worklogCount,0) a,COALESCE(a.uCount,0) b,COALESCE(b.docCount,0) c,COALESCE(c.phoCount,0) d,COALESCE(d.audioCount,0) e FROM location l LEFT JOIN  (SELECT ud.locid locid,COUNT(DISTINCT w.id) worklogCount,COUNT(DISTINCT w.owner_id) uCount FROM work_log w,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE w.owner_id=ud.id    AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00"  GROUP BY ud.locid) a ON l.id=a.locid LEFT JOIN  (SELECT ud.locid locid,i.media_type,COUNT(i.id) docCount FROM work_log w,work_log_item i,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE w.owner_id=ud.id AND w.id=i.work_log_id   AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00"  AND i.media_type=1   GROUP BY ud.locid ) b ON l.id=b.locid LEFT JOIN  (SELECT ud.locid locid,i.media_type,COUNT(i.id) phoCount FROM work_log w,work_log_item i,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE w.owner_id=ud.id AND w.id=i.work_log_id   AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00"  AND i.media_type=2   GROUP BY ud.locid ) c ON l.id=c.locid LEFT JOIN  (SELECT ud.locid locid,i.media_type,COUNT(i.id) audioCount FROM work_log w,work_log_item i,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE w.owner_id=ud.id AND w.id=i.work_log_id   AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00"  AND i.media_type=3   GROUP BY ud.locid ) d ON l.id=d.locid   WHERE l.id IN(24561,28422) [ RunTime:0.040002s ]
SQL: SELECT l.name,COALESCE(a.photoCount,0) a,COALESCE(a.ucount,0) b,COALESCE(b.priseCount,0) c,COALESCE(c.comCount,0) d FROM location l LEFT JOIN (SELECT ud.locid locid,COUNT(i.id) photoCount,COUNT(DISTINCT ud.id) ucount FROM album m,album_item i,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)  UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE m.owner_id=ud.id AND i.album_id=m.id   AND i.create_time>="2014-08-11 00:00:00" AND i.create_time<"2014-08-12 00:00:00"  GROUP BY ud.locid) a ON l.id=a.locid LEFT JOIN  (SELECT ud.locid locid,COUNT(uc.id) priseCount FROM user_comment uc,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)  UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE ud.id=uc.creator_id AND uc.obj_type='AlbumItem'   AND uc.create_time>"2014-08-11 00:00:00" AND uc.create_time<"2014-08-12 00:00:00"   GROUP BY ud.locid ) b ON l.id=b.locid LEFT JOIN (SELECT ud.locid locid,COUNT(uc.id) comCount FROM user_comment uc,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)  UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE ud.id=uc.creator_id AND uc.obj_type='SystemComment'   AND uc.create_time>="2014-08-11 00:00:00" AND uc.create_time<"2014-08-12 00:00:00"  GROUP BY ud.locid) c ON l.id=c.locid  WHERE l.id IN(24561,28422) [ RunTime:0.019001s ]
SQL: SELECT a.rname a,l.name b,d.name c,a.age d FROM (SELECT u.id uid,u.real_name rname,u.location_id locid,u.dept_id depId,(2014-(SELECT SUBSTR(u.identify_value,7,4))+0) age FROM app_user u WHERE NOT EXISTS ( SELECT lo.user_id FROM login_log lo WHERE u.id=lo.user_id  ) AND u.id IN( SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id FROM app_user u WHERE u.location_id IN(24561,28422) )) a,location l,department d WHERE a.depId=d.id AND a.locid=l.id [ RunTime:4.199240s ]
SQL: SELECT u.id,u.real_name,COALESCE(a.worklogCount,0) worklogCount,COALESCE(b.logCount,0) logCount FROM app_user u LEFT JOIN (SELECT w.owner_id uid,COALESCE(COUNT(w.id)) worklogCount FROM work_log w WHERE w.owner_id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24561 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24561 ) AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00" GROUP BY w.owner_id) a ON u.id=a.uid LEFT JOIN (SELECT lo.user_id uid,COUNT(lo.user_id) logCount FROM login_log lo WHERE lo.user_id IN( SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24561 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24561 ) AND lo.login_time>="2014-08-11 00:00:00" AND lo.login_time<"2014-08-12 00:00:00" GROUP BY lo.user_id ) b ON u.id=b.uid WHERE u.id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24561 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24561 ) ORDER BY a.worklogCount DESC,b.logCount DESC LIMIT 10 [ RunTime:0.622035s ]
SQL: SELECT u.id,u.real_name,COALESCE(a.worklogCount,0) worklogCount,COALESCE(b.logCount,0) logCount FROM app_user u LEFT JOIN (SELECT w.owner_id uid,COALESCE(COUNT(w.id)) worklogCount FROM work_log w WHERE w.owner_id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24521 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24521 ) AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00" GROUP BY w.owner_id) a ON u.id=a.uid LEFT JOIN (SELECT lo.user_id uid,COUNT(lo.user_id) logCount FROM login_log lo WHERE lo.user_id IN( SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24521 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24521 ) AND lo.login_time>="2014-08-11 00:00:00" AND lo.login_time<"2014-08-12 00:00:00" GROUP BY lo.user_id ) b ON u.id=b.uid WHERE u.id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24521 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24521 ) ORDER BY a.worklogCount DESC,b.logCount DESC LIMIT 10 [ RunTime:0.587034s ]
SQL: SELECT u.id,u.real_name,COALESCE(a.worklogCount,0) worklogCount,COALESCE(b.logCount,0) logCount FROM app_user u LEFT JOIN (SELECT w.owner_id uid,COALESCE(COUNT(w.id)) worklogCount FROM work_log w WHERE w.owner_id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24543 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24543 ) AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00" GROUP BY w.owner_id) a ON u.id=a.uid LEFT JOIN (SELECT lo.user_id uid,COUNT(lo.user_id) logCount FROM login_log lo WHERE lo.user_id IN( SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24543 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24543 ) AND lo.login_time>="2014-08-11 00:00:00" AND lo.login_time<"2014-08-12 00:00:00" GROUP BY lo.user_id ) b ON u.id=b.uid WHERE u.id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24543 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24543 ) ORDER BY a.worklogCount DESC,b.logCount DESC LIMIT 10 [ RunTime:0.583034s ]
SQL: SELECT u.id,u.real_name,COALESCE(a.worklogCount,0) worklogCount,COALESCE(b.logCount,0) logCount FROM app_user u LEFT JOIN (SELECT w.owner_id uid,COALESCE(COUNT(w.id)) worklogCount FROM work_log w WHERE w.owner_id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =28422 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =28422 ) AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00" GROUP BY w.owner_id) a ON u.id=a.uid LEFT JOIN (SELECT lo.user_id uid,COUNT(lo.user_id) logCount FROM login_log lo WHERE lo.user_id IN( SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =28422 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =28422 ) AND lo.login_time>="2014-08-11 00:00:00" AND lo.login_time<"2014-08-12 00:00:00" GROUP BY lo.user_id ) b ON u.id=b.uid WHERE u.id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =28422 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =28422 ) ORDER BY a.worklogCount DESC,b.logCount DESC LIMIT 10 [ RunTime:0.587034s ]
SQL: SELECT l.name,COALESCE(a.ulcount,0) b FROM  location l LEFT JOIN (SELECT ud.locid locid,COUNT(DISTINCT ud.id) ulcount,COUNT(ud.id) logCount FROM login_log lo,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE lo.user_id=ud.id   AND lo.login_time>="2014-08-11 00:00:00"   GROUP BY ud.locid) a ON a.locid=l.id WHERE l.id IN (24561,28422) [ RunTime:0.040002s ]
SQL: 
				CALL count_worklog_all("2014-08-11 00:00:00","2014-08-12 00:00:00",("24561,28422"))
				 [ RunTime:0.033002s ]
INFO: [ view_parse ] --START--
INFO: ParseTemplate Behavior ::run [ RunTime:0.875050s ]
INFO: [ view_parse ] --END-- [ RunTime:0.884050s ]
INFO: [ view_filter ] --START--
INFO: ContentReplace Behavior ::run [ RunTime:0.010000s ]
INFO: TokenBuild Behavior ::run [ RunTime:0.022001s ]
INFO: WriteHtmlCache Behavior ::run [ RunTime:0.005000s ]
INFO: ShowRuntime Behavior ::run [ RunTime:0.015001s ]
INFO: [ view_filter ] --END-- [ RunTime:0.086005s ]
INFO: [ view_end ] --START--
INFO: ShowPageTrace Behavior ::run [ RunTime:0.031002s ]
INFO: [ view_end ] --END-- [ RunTime:0.051003s ]

[ 2014-08-12T10:06:10+08:00 ] 127.0.0.1 /php_demo/shizhan/10/10wish/index.php/Njb/Index/tongji?checkbox%5B%5D=24561&checkbox%5B%5D=28422&date_begin=2014-08-11&date_end=2014-08-12
INFO: [ route_check ] --START--
INFO: CheckRoute Behavior ::run [ RunTime:0.018001s ]
INFO: [ route_check ] --END-- [ RunTime:0.034002s ]
INFO: [ app_begin ] --START--
INFO: ReadHtmlCache Behavior ::run [ RunTime:0.028002s ]
INFO: [ app_begin ] --END-- [ RunTime:0.042002s ]
SQL: SELECT l.name,COALESCE(a.ucount,0) as yhs,COALESCE(c.ulcount,0) as dlyhs,COALESCE(c.logCount,0) as dlcs FROM location l LEFT JOIN (SELECT ud.locid locid,COUNT(ud.id) ucount FROM   (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)    UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud     GROUP BY ud.locid  ) a ON l.id=a.locid  LEFT JOIN (SELECT ud.locid locid,COUNT(DISTINCT ud.id) ulcount,COUNT(ud.id) logCount FROM login_log lo,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE lo.user_id=ud.id   AND lo.login_time>="2014-08-11 00:00:00" AND lo.login_time<"2014-08-12 00:00:00"   GROUP BY ud.locid) c ON l.id=c.locid WHERE l.id IN(24561,28422) [ RunTime:0.074004s ]
SQL: SELECT l.name,COALESCE(a.noticeCount,0) noticeCount,COALESCE(a.userCount,0) userCount FROM location l LEFT JOIN  (SELECT ud.locid locid,COUNT(n.id) noticeCount,COUNT(DISTINCT ud.id) userCount FROM notice n,   (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)    UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud   WHERE n.owner_id=ud.id AND n.publish_time>="2014-08-11 00:00:00"    AND n.publish_time<"2014-08-12 00:00:00" GROUP BY ud.locid) a  ON l.id=a.locid WHERE l.id IN(24561,28422) [ RunTime:0.014001s ]
SQL: SELECT l.name,COALESCE(a.asCount,0) a,COALESCE(b.adminCount,0) b,COALESCE(c.noAdminCount,0) c FROM location l LEFT JOIN  (SELECT ud.locid locid,COUNT(t.id) asCount FROM assignment t,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE t.creator_id=ud.id AND t.create_time>="2014-08-11 00:00:00" AND  t.create_time<"2014-08-12 00:00:00"  GROUP BY ud.locid) a ON l.id=a.locid  LEFT JOIN (SELECT ud.locid locid,COUNT(DISTINCT ud.id) adminCount FROM assignment t,app_user_role r,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud   WHERE t.creator_id=ud.id AND ud.id=r.user_id AND r.role='TechAdmin'   AND t.create_time>="2014-08-11 00:00:00" AND  t.create_time<"2014-08-12 00:00:00"  GROUP BY ud.locid ) b ON l.id=b.locid LEFT JOIN (SELECT ud.locid locid,COUNT(DISTINCT ud.id) noAdminCount FROM assignment t,app_user_role r,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE t.creator_id=ud.id AND ud.id=r.user_id AND r.role='Technician'   AND t.create_time>="2014-08-11 00:00:00" AND  t.create_time<"2014-08-12 00:00:00"  GROUP BY ud.locid ) c ON l.id=c.locid  WHERE l.id IN(24561,28422) [ RunTime:0.031002s ]
SQL: SELECT l.name,COALESCE(a.worklogCount,0) a,COALESCE(a.uCount,0) b,COALESCE(b.docCount,0) c,COALESCE(c.phoCount,0) d,COALESCE(d.audioCount,0) e FROM location l LEFT JOIN  (SELECT ud.locid locid,COUNT(DISTINCT w.id) worklogCount,COUNT(DISTINCT w.owner_id) uCount FROM work_log w,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE w.owner_id=ud.id    AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00"  GROUP BY ud.locid) a ON l.id=a.locid LEFT JOIN  (SELECT ud.locid locid,i.media_type,COUNT(i.id) docCount FROM work_log w,work_log_item i,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE w.owner_id=ud.id AND w.id=i.work_log_id   AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00"  AND i.media_type=1   GROUP BY ud.locid ) b ON l.id=b.locid LEFT JOIN  (SELECT ud.locid locid,i.media_type,COUNT(i.id) phoCount FROM work_log w,work_log_item i,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE w.owner_id=ud.id AND w.id=i.work_log_id   AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00"  AND i.media_type=2   GROUP BY ud.locid ) c ON l.id=c.locid LEFT JOIN  (SELECT ud.locid locid,i.media_type,COUNT(i.id) audioCount FROM work_log w,work_log_item i,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE w.owner_id=ud.id AND w.id=i.work_log_id   AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00"  AND i.media_type=3   GROUP BY ud.locid ) d ON l.id=d.locid   WHERE l.id IN(24561,28422) [ RunTime:0.077004s ]
SQL: SELECT l.name,COALESCE(a.photoCount,0) a,COALESCE(a.ucount,0) b,COALESCE(b.priseCount,0) c,COALESCE(c.comCount,0) d FROM location l LEFT JOIN (SELECT ud.locid locid,COUNT(i.id) photoCount,COUNT(DISTINCT ud.id) ucount FROM album m,album_item i,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)  UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE m.owner_id=ud.id AND i.album_id=m.id   AND i.create_time>="2014-08-11 00:00:00" AND i.create_time<"2014-08-12 00:00:00"  GROUP BY ud.locid) a ON l.id=a.locid LEFT JOIN  (SELECT ud.locid locid,COUNT(uc.id) priseCount FROM user_comment uc,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)  UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE ud.id=uc.creator_id AND uc.obj_type='AlbumItem'   AND uc.create_time>"2014-08-11 00:00:00" AND uc.create_time<"2014-08-12 00:00:00"   GROUP BY ud.locid ) b ON l.id=b.locid LEFT JOIN (SELECT ud.locid locid,COUNT(uc.id) comCount FROM user_comment uc,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)  UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE ud.id=uc.creator_id AND uc.obj_type='SystemComment'   AND uc.create_time>="2014-08-11 00:00:00" AND uc.create_time<"2014-08-12 00:00:00"  GROUP BY ud.locid) c ON l.id=c.locid  WHERE l.id IN(24561,28422) [ RunTime:0.018001s ]
SQL: SELECT a.rname a,l.name b,d.name c,a.age d FROM (SELECT u.id uid,u.real_name rname,u.location_id locid,u.dept_id depId,(2014-(SELECT SUBSTR(u.identify_value,7,4))+0) age FROM app_user u WHERE NOT EXISTS ( SELECT lo.user_id FROM login_log lo WHERE u.id=lo.user_id  ) AND u.id IN( SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id FROM app_user u WHERE u.location_id IN(24561,28422) )) a,location l,department d WHERE a.depId=d.id AND a.locid=l.id [ RunTime:4.984286s ]
SQL: SELECT u.id,u.real_name,COALESCE(a.worklogCount,0) worklogCount,COALESCE(b.logCount,0) logCount FROM app_user u LEFT JOIN (SELECT w.owner_id uid,COALESCE(COUNT(w.id)) worklogCount FROM work_log w WHERE w.owner_id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24561 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id = ) AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00" GROUP BY w.owner_id) a ON u.id=a.uid LEFT JOIN (SELECT lo.user_id uid,COUNT(lo.user_id) logCount FROM login_log lo WHERE lo.user_id IN( SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24561 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24561 ) AND lo.login_time>="2014-08-11 00:00:00" AND lo.login_time<"2014-08-12 00:00:00" GROUP BY lo.user_id ) b ON u.id=b.uid WHERE u.id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24561 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24561 ) ORDER BY a.worklogCount DESC,b.logCount DESC LIMIT 10 [ RunTime:0.082004s ]
ERR: 1064:You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ') AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:0' at line 1
 [ SQL语句 ] : SELECT u.id,u.real_name,COALESCE(a.worklogCount,0) worklogCount,COALESCE(b.logCount,0) logCount FROM app_user u LEFT JOIN (SELECT w.owner_id uid,COALESCE(COUNT(w.id)) worklogCount FROM work_log w WHERE w.owner_id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24561 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id = ) AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00" GROUP BY w.owner_id) a ON u.id=a.uid LEFT JOIN (SELECT lo.user_id uid,COUNT(lo.user_id) logCount FROM login_log lo WHERE lo.user_id IN( SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24561 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24561 ) AND lo.login_time>="2014-08-11 00:00:00" AND lo.login_time<"2014-08-12 00:00:00" GROUP BY lo.user_id ) b ON u.id=b.uid WHERE u.id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24561 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24561 ) ORDER BY a.worklogCount DESC,b.logCount DESC LIMIT 10
SQL: SELECT u.id,u.real_name,COALESCE(a.worklogCount,0) worklogCount,COALESCE(b.logCount,0) logCount FROM app_user u LEFT JOIN (SELECT w.owner_id uid,COALESCE(COUNT(w.id)) worklogCount FROM work_log w WHERE w.owner_id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24561 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id = ) AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00" GROUP BY w.owner_id) a ON u.id=a.uid LEFT JOIN (SELECT lo.user_id uid,COUNT(lo.user_id) logCount FROM login_log lo WHERE lo.user_id IN( SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24561 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24561 ) AND lo.login_time>="2014-08-11 00:00:00" AND lo.login_time<"2014-08-12 00:00:00" GROUP BY lo.user_id ) b ON u.id=b.uid WHERE u.id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24561 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24561 ) ORDER BY a.worklogCount DESC,b.logCount DESC LIMIT 10 [ RunTime:0.004000s ]
ERR: 1064:You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ') AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:0' at line 1
 [ SQL语句 ] : SELECT u.id,u.real_name,COALESCE(a.worklogCount,0) worklogCount,COALESCE(b.logCount,0) logCount FROM app_user u LEFT JOIN (SELECT w.owner_id uid,COALESCE(COUNT(w.id)) worklogCount FROM work_log w WHERE w.owner_id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24561 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id = ) AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00" GROUP BY w.owner_id) a ON u.id=a.uid LEFT JOIN (SELECT lo.user_id uid,COUNT(lo.user_id) logCount FROM login_log lo WHERE lo.user_id IN( SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24561 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24561 ) AND lo.login_time>="2014-08-11 00:00:00" AND lo.login_time<"2014-08-12 00:00:00" GROUP BY lo.user_id ) b ON u.id=b.uid WHERE u.id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24561 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24561 ) ORDER BY a.worklogCount DESC,b.logCount DESC LIMIT 10
SQL: SELECT l.name,COALESCE(a.ulcount,0) b FROM  location l LEFT JOIN (SELECT ud.locid locid,COUNT(DISTINCT ud.id) ulcount,COUNT(ud.id) logCount FROM login_log lo,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE lo.user_id=ud.id   AND lo.login_time>="2014-08-11 00:00:00"   GROUP BY ud.locid) a ON a.locid=l.id WHERE l.id IN (24561,28422) [ RunTime:0.071004s ]
SQL: 
				CALL count_worklog_all("2014-08-11 00:00:00","2014-08-12 00:00:00",("24561,28422"))
				 [ RunTime:0.066004s ]
INFO: [ view_parse ] --START--
NOTIC: [8] Undefined variable: data7 D:\Dropbox-List\Net\Dropbox\WebDev\xampp\htdocs\php_demo\shizhan\10\10wish\APP\Runtime\Cache\Njb\4c43491aeece36133122026e69b0ba99.php 第 133 行.
NOTIC: [8] Undefined variable: data8 D:\Dropbox-List\Net\Dropbox\WebDev\xampp\htdocs\php_demo\shizhan\10\10wish\APP\Runtime\Cache\Njb\4c43491aeece36133122026e69b0ba99.php 第 152 行.
NOTIC: [8] Undefined variable: data9 D:\Dropbox-List\Net\Dropbox\WebDev\xampp\htdocs\php_demo\shizhan\10\10wish\APP\Runtime\Cache\Njb\4c43491aeece36133122026e69b0ba99.php 第 171 行.
NOTIC: [8] Undefined variable: data10 D:\Dropbox-List\Net\Dropbox\WebDev\xampp\htdocs\php_demo\shizhan\10\10wish\APP\Runtime\Cache\Njb\4c43491aeece36133122026e69b0ba99.php 第 192 行.
INFO: ParseTemplate Behavior ::run [ RunTime:1.538088s ]
INFO: [ view_parse ] --END-- [ RunTime:1.554088s ]
INFO: [ view_filter ] --START--
INFO: ContentReplace Behavior ::run [ RunTime:0.032001s ]
INFO: TokenBuild Behavior ::run [ RunTime:0.023001s ]
INFO: WriteHtmlCache Behavior ::run [ RunTime:0.010001s ]
INFO: ShowRuntime Behavior ::run [ RunTime:0.031002s ]
INFO: [ view_filter ] --END-- [ RunTime:0.146009s ]
INFO: [ view_end ] --START--
INFO: ShowPageTrace Behavior ::run [ RunTime:0.031002s ]
INFO: [ view_end ] --END-- [ RunTime:0.046003s ]

[ 2014-08-12T10:06:51+08:00 ] 127.0.0.1 /php_demo/shizhan/10/10wish/index.php/Njb/Index/tongji?checkbox%5B%5D=24561&checkbox%5B%5D=28422&date_begin=2014-08-11&date_end=2014-08-12
INFO: [ route_check ] --START--
INFO: CheckRoute Behavior ::run [ RunTime:0.023001s ]
INFO: [ route_check ] --END-- [ RunTime:0.036002s ]
INFO: [ app_begin ] --START--
INFO: ReadHtmlCache Behavior ::run [ RunTime:0.020001s ]
INFO: [ app_begin ] --END-- [ RunTime:0.032002s ]
SQL: SELECT l.name,COALESCE(a.ucount,0) as yhs,COALESCE(c.ulcount,0) as dlyhs,COALESCE(c.logCount,0) as dlcs FROM location l LEFT JOIN (SELECT ud.locid locid,COUNT(ud.id) ucount FROM   (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)    UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud     GROUP BY ud.locid  ) a ON l.id=a.locid  LEFT JOIN (SELECT ud.locid locid,COUNT(DISTINCT ud.id) ulcount,COUNT(ud.id) logCount FROM login_log lo,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE lo.user_id=ud.id   AND lo.login_time>="2014-08-11 00:00:00" AND lo.login_time<"2014-08-12 00:00:00"   GROUP BY ud.locid) c ON l.id=c.locid WHERE l.id IN(24561,28422) [ RunTime:0.074004s ]
SQL: SELECT l.name,COALESCE(a.noticeCount,0) noticeCount,COALESCE(a.userCount,0) userCount FROM location l LEFT JOIN  (SELECT ud.locid locid,COUNT(n.id) noticeCount,COUNT(DISTINCT ud.id) userCount FROM notice n,   (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)    UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud   WHERE n.owner_id=ud.id AND n.publish_time>="2014-08-11 00:00:00"    AND n.publish_time<"2014-08-12 00:00:00" GROUP BY ud.locid) a  ON l.id=a.locid WHERE l.id IN(24561,28422) [ RunTime:0.007001s ]
SQL: SELECT l.name,COALESCE(a.asCount,0) a,COALESCE(b.adminCount,0) b,COALESCE(c.noAdminCount,0) c FROM location l LEFT JOIN  (SELECT ud.locid locid,COUNT(t.id) asCount FROM assignment t,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE t.creator_id=ud.id AND t.create_time>="2014-08-11 00:00:00" AND  t.create_time<"2014-08-12 00:00:00"  GROUP BY ud.locid) a ON l.id=a.locid  LEFT JOIN (SELECT ud.locid locid,COUNT(DISTINCT ud.id) adminCount FROM assignment t,app_user_role r,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud   WHERE t.creator_id=ud.id AND ud.id=r.user_id AND r.role='TechAdmin'   AND t.create_time>="2014-08-11 00:00:00" AND  t.create_time<"2014-08-12 00:00:00"  GROUP BY ud.locid ) b ON l.id=b.locid LEFT JOIN (SELECT ud.locid locid,COUNT(DISTINCT ud.id) noAdminCount FROM assignment t,app_user_role r,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE t.creator_id=ud.id AND ud.id=r.user_id AND r.role='Technician'   AND t.create_time>="2014-08-11 00:00:00" AND  t.create_time<"2014-08-12 00:00:00"  GROUP BY ud.locid ) c ON l.id=c.locid  WHERE l.id IN(24561,28422) [ RunTime:0.020001s ]
SQL: SELECT l.name,COALESCE(a.worklogCount,0) a,COALESCE(a.uCount,0) b,COALESCE(b.docCount,0) c,COALESCE(c.phoCount,0) d,COALESCE(d.audioCount,0) e FROM location l LEFT JOIN  (SELECT ud.locid locid,COUNT(DISTINCT w.id) worklogCount,COUNT(DISTINCT w.owner_id) uCount FROM work_log w,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE w.owner_id=ud.id    AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00"  GROUP BY ud.locid) a ON l.id=a.locid LEFT JOIN  (SELECT ud.locid locid,i.media_type,COUNT(i.id) docCount FROM work_log w,work_log_item i,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE w.owner_id=ud.id AND w.id=i.work_log_id   AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00"  AND i.media_type=1   GROUP BY ud.locid ) b ON l.id=b.locid LEFT JOIN  (SELECT ud.locid locid,i.media_type,COUNT(i.id) phoCount FROM work_log w,work_log_item i,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE w.owner_id=ud.id AND w.id=i.work_log_id   AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00"  AND i.media_type=2   GROUP BY ud.locid ) c ON l.id=c.locid LEFT JOIN  (SELECT ud.locid locid,i.media_type,COUNT(i.id) audioCount FROM work_log w,work_log_item i,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE w.owner_id=ud.id AND w.id=i.work_log_id   AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00"  AND i.media_type=3   GROUP BY ud.locid ) d ON l.id=d.locid   WHERE l.id IN(24561,28422) [ RunTime:0.041003s ]
SQL: SELECT l.name,COALESCE(a.photoCount,0) a,COALESCE(a.ucount,0) b,COALESCE(b.priseCount,0) c,COALESCE(c.comCount,0) d FROM location l LEFT JOIN (SELECT ud.locid locid,COUNT(i.id) photoCount,COUNT(DISTINCT ud.id) ucount FROM album m,album_item i,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)  UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE m.owner_id=ud.id AND i.album_id=m.id   AND i.create_time>="2014-08-11 00:00:00" AND i.create_time<"2014-08-12 00:00:00"  GROUP BY ud.locid) a ON l.id=a.locid LEFT JOIN  (SELECT ud.locid locid,COUNT(uc.id) priseCount FROM user_comment uc,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)  UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE ud.id=uc.creator_id AND uc.obj_type='AlbumItem'   AND uc.create_time>"2014-08-11 00:00:00" AND uc.create_time<"2014-08-12 00:00:00"   GROUP BY ud.locid ) b ON l.id=b.locid LEFT JOIN (SELECT ud.locid locid,COUNT(uc.id) comCount FROM user_comment uc,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)  UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE ud.id=uc.creator_id AND uc.obj_type='SystemComment'   AND uc.create_time>="2014-08-11 00:00:00" AND uc.create_time<"2014-08-12 00:00:00"  GROUP BY ud.locid) c ON l.id=c.locid  WHERE l.id IN(24561,28422) [ RunTime:0.024001s ]
SQL: SELECT a.rname a,l.name b,d.name c,a.age d FROM (SELECT u.id uid,u.real_name rname,u.location_id locid,u.dept_id depId,(2014-(SELECT SUBSTR(u.identify_value,7,4))+0) age FROM app_user u WHERE NOT EXISTS ( SELECT lo.user_id FROM login_log lo WHERE u.id=lo.user_id  ) AND u.id IN( SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id FROM app_user u WHERE u.location_id IN(24561,28422) )) a,location l,department d WHERE a.depId=d.id AND a.locid=l.id [ RunTime:3.838220s ]
SQL: SELECT u.id,u.real_name,COALESCE(a.worklogCount,0) worklogCount,COALESCE(b.logCount,0) logCount FROM app_user u LEFT JOIN (SELECT w.owner_id uid,COALESCE(COUNT(w.id)) worklogCount FROM work_log w WHERE w.owner_id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24561 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id = ) AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00" GROUP BY w.owner_id) a ON u.id=a.uid LEFT JOIN (SELECT lo.user_id uid,COUNT(lo.user_id) logCount FROM login_log lo WHERE lo.user_id IN( SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24561 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24561 ) AND lo.login_time>="2014-08-11 00:00:00" AND lo.login_time<"2014-08-12 00:00:00" GROUP BY lo.user_id ) b ON u.id=b.uid WHERE u.id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24561 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24561 ) ORDER BY a.worklogCount DESC,b.logCount DESC LIMIT 10 [ RunTime:0.002000s ]
ERR: 1064:You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ') AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:0' at line 1
 [ SQL语句 ] : SELECT u.id,u.real_name,COALESCE(a.worklogCount,0) worklogCount,COALESCE(b.logCount,0) logCount FROM app_user u LEFT JOIN (SELECT w.owner_id uid,COALESCE(COUNT(w.id)) worklogCount FROM work_log w WHERE w.owner_id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24561 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id = ) AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00" GROUP BY w.owner_id) a ON u.id=a.uid LEFT JOIN (SELECT lo.user_id uid,COUNT(lo.user_id) logCount FROM login_log lo WHERE lo.user_id IN( SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24561 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24561 ) AND lo.login_time>="2014-08-11 00:00:00" AND lo.login_time<"2014-08-12 00:00:00" GROUP BY lo.user_id ) b ON u.id=b.uid WHERE u.id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24561 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24561 ) ORDER BY a.worklogCount DESC,b.logCount DESC LIMIT 10
SQL: SELECT u.id,u.real_name,COALESCE(a.worklogCount,0) worklogCount,COALESCE(b.logCount,0) logCount FROM app_user u LEFT JOIN (SELECT w.owner_id uid,COALESCE(COUNT(w.id)) worklogCount FROM work_log w WHERE w.owner_id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24561 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id = ) AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00" GROUP BY w.owner_id) a ON u.id=a.uid LEFT JOIN (SELECT lo.user_id uid,COUNT(lo.user_id) logCount FROM login_log lo WHERE lo.user_id IN( SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24561 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24561 ) AND lo.login_time>="2014-08-11 00:00:00" AND lo.login_time<"2014-08-12 00:00:00" GROUP BY lo.user_id ) b ON u.id=b.uid WHERE u.id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24561 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24561 ) ORDER BY a.worklogCount DESC,b.logCount DESC LIMIT 10 [ RunTime:0.002000s ]
ERR: 1064:You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ') AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:0' at line 1
 [ SQL语句 ] : SELECT u.id,u.real_name,COALESCE(a.worklogCount,0) worklogCount,COALESCE(b.logCount,0) logCount FROM app_user u LEFT JOIN (SELECT w.owner_id uid,COALESCE(COUNT(w.id)) worklogCount FROM work_log w WHERE w.owner_id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24561 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id = ) AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00" GROUP BY w.owner_id) a ON u.id=a.uid LEFT JOIN (SELECT lo.user_id uid,COUNT(lo.user_id) logCount FROM login_log lo WHERE lo.user_id IN( SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24561 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24561 ) AND lo.login_time>="2014-08-11 00:00:00" AND lo.login_time<"2014-08-12 00:00:00" GROUP BY lo.user_id ) b ON u.id=b.uid WHERE u.id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24561 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24561 ) ORDER BY a.worklogCount DESC,b.logCount DESC LIMIT 10
SQL: SELECT l.name,COALESCE(a.ulcount,0) b FROM  location l LEFT JOIN (SELECT ud.locid locid,COUNT(DISTINCT ud.id) ulcount,COUNT(ud.id) logCount FROM login_log lo,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE lo.user_id=ud.id   AND lo.login_time>="2014-08-11 00:00:00"   GROUP BY ud.locid) a ON a.locid=l.id WHERE l.id IN (24561,28422) [ RunTime:0.042002s ]
SQL: 
				CALL count_worklog_all("2014-08-11 00:00:00","2014-08-12 00:00:00",("24561,28422"))
				 [ RunTime:0.033002s ]
INFO: [ view_parse ] --START--
NOTIC: [8] Undefined variable: data7 D:\Dropbox-List\Net\Dropbox\WebDev\xampp\htdocs\php_demo\shizhan\10\10wish\APP\Runtime\Cache\Njb\4c43491aeece36133122026e69b0ba99.php 第 133 行.
NOTIC: [8] Undefined variable: data8 D:\Dropbox-List\Net\Dropbox\WebDev\xampp\htdocs\php_demo\shizhan\10\10wish\APP\Runtime\Cache\Njb\4c43491aeece36133122026e69b0ba99.php 第 152 行.
NOTIC: [8] Undefined variable: data9 D:\Dropbox-List\Net\Dropbox\WebDev\xampp\htdocs\php_demo\shizhan\10\10wish\APP\Runtime\Cache\Njb\4c43491aeece36133122026e69b0ba99.php 第 171 行.
NOTIC: [8] Undefined variable: data10 D:\Dropbox-List\Net\Dropbox\WebDev\xampp\htdocs\php_demo\shizhan\10\10wish\APP\Runtime\Cache\Njb\4c43491aeece36133122026e69b0ba99.php 第 192 行.
INFO: ParseTemplate Behavior ::run [ RunTime:0.921052s ]
INFO: [ view_parse ] --END-- [ RunTime:0.929053s ]
INFO: [ view_filter ] --START--
INFO: ContentReplace Behavior ::run [ RunTime:0.009001s ]
INFO: TokenBuild Behavior ::run [ RunTime:0.011000s ]
INFO: WriteHtmlCache Behavior ::run [ RunTime:0.006000s ]
INFO: ShowRuntime Behavior ::run [ RunTime:0.015001s ]
INFO: [ view_filter ] --END-- [ RunTime:0.061003s ]
INFO: [ view_end ] --START--
INFO: ShowPageTrace Behavior ::run [ RunTime:0.010001s ]
INFO: [ view_end ] --END-- [ RunTime:0.015001s ]

[ 2014-08-12T10:08:10+08:00 ] 127.0.0.1 /php_demo/shizhan/10/10wish/index.php/Njb/Index/tongji?checkbox%5B%5D=24561&checkbox%5B%5D=28422&date_begin=2014-08-11&date_end=2014-08-12
INFO: [ route_check ] --START--
INFO: CheckRoute Behavior ::run [ RunTime:0.012000s ]
INFO: [ route_check ] --END-- [ RunTime:0.023002s ]
INFO: [ app_begin ] --START--
INFO: ReadHtmlCache Behavior ::run [ RunTime:0.020001s ]
INFO: [ app_begin ] --END-- [ RunTime:0.030002s ]
SQL: SELECT l.name,COALESCE(a.ucount,0) as yhs,COALESCE(c.ulcount,0) as dlyhs,COALESCE(c.logCount,0) as dlcs FROM location l LEFT JOIN (SELECT ud.locid locid,COUNT(ud.id) ucount FROM   (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)    UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud     GROUP BY ud.locid  ) a ON l.id=a.locid  LEFT JOIN (SELECT ud.locid locid,COUNT(DISTINCT ud.id) ulcount,COUNT(ud.id) logCount FROM login_log lo,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE lo.user_id=ud.id   AND lo.login_time>="2014-08-11 00:00:00" AND lo.login_time<"2014-08-12 00:00:00"   GROUP BY ud.locid) c ON l.id=c.locid WHERE l.id IN(24561,28422) [ RunTime:0.060003s ]
SQL: SELECT l.name,COALESCE(a.noticeCount,0) noticeCount,COALESCE(a.userCount,0) userCount FROM location l LEFT JOIN  (SELECT ud.locid locid,COUNT(n.id) noticeCount,COUNT(DISTINCT ud.id) userCount FROM notice n,   (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)    UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud   WHERE n.owner_id=ud.id AND n.publish_time>="2014-08-11 00:00:00"    AND n.publish_time<"2014-08-12 00:00:00" GROUP BY ud.locid) a  ON l.id=a.locid WHERE l.id IN(24561,28422) [ RunTime:0.008000s ]
SQL: SELECT l.name,COALESCE(a.asCount,0) a,COALESCE(b.adminCount,0) b,COALESCE(c.noAdminCount,0) c FROM location l LEFT JOIN  (SELECT ud.locid locid,COUNT(t.id) asCount FROM assignment t,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE t.creator_id=ud.id AND t.create_time>="2014-08-11 00:00:00" AND  t.create_time<"2014-08-12 00:00:00"  GROUP BY ud.locid) a ON l.id=a.locid  LEFT JOIN (SELECT ud.locid locid,COUNT(DISTINCT ud.id) adminCount FROM assignment t,app_user_role r,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud   WHERE t.creator_id=ud.id AND ud.id=r.user_id AND r.role='TechAdmin'   AND t.create_time>="2014-08-11 00:00:00" AND  t.create_time<"2014-08-12 00:00:00"  GROUP BY ud.locid ) b ON l.id=b.locid LEFT JOIN (SELECT ud.locid locid,COUNT(DISTINCT ud.id) noAdminCount FROM assignment t,app_user_role r,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE t.creator_id=ud.id AND ud.id=r.user_id AND r.role='Technician'   AND t.create_time>="2014-08-11 00:00:00" AND  t.create_time<"2014-08-12 00:00:00"  GROUP BY ud.locid ) c ON l.id=c.locid  WHERE l.id IN(24561,28422) [ RunTime:0.013001s ]
SQL: SELECT l.name,COALESCE(a.worklogCount,0) a,COALESCE(a.uCount,0) b,COALESCE(b.docCount,0) c,COALESCE(c.phoCount,0) d,COALESCE(d.audioCount,0) e FROM location l LEFT JOIN  (SELECT ud.locid locid,COUNT(DISTINCT w.id) worklogCount,COUNT(DISTINCT w.owner_id) uCount FROM work_log w,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE w.owner_id=ud.id    AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00"  GROUP BY ud.locid) a ON l.id=a.locid LEFT JOIN  (SELECT ud.locid locid,i.media_type,COUNT(i.id) docCount FROM work_log w,work_log_item i,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE w.owner_id=ud.id AND w.id=i.work_log_id   AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00"  AND i.media_type=1   GROUP BY ud.locid ) b ON l.id=b.locid LEFT JOIN  (SELECT ud.locid locid,i.media_type,COUNT(i.id) phoCount FROM work_log w,work_log_item i,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE w.owner_id=ud.id AND w.id=i.work_log_id   AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00"  AND i.media_type=2   GROUP BY ud.locid ) c ON l.id=c.locid LEFT JOIN  (SELECT ud.locid locid,i.media_type,COUNT(i.id) audioCount FROM work_log w,work_log_item i,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE w.owner_id=ud.id AND w.id=i.work_log_id   AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00"  AND i.media_type=3   GROUP BY ud.locid ) d ON l.id=d.locid   WHERE l.id IN(24561,28422) [ RunTime:0.035002s ]
SQL: SELECT l.name,COALESCE(a.photoCount,0) a,COALESCE(a.ucount,0) b,COALESCE(b.priseCount,0) c,COALESCE(c.comCount,0) d FROM location l LEFT JOIN (SELECT ud.locid locid,COUNT(i.id) photoCount,COUNT(DISTINCT ud.id) ucount FROM album m,album_item i,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)  UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE m.owner_id=ud.id AND i.album_id=m.id   AND i.create_time>="2014-08-11 00:00:00" AND i.create_time<"2014-08-12 00:00:00"  GROUP BY ud.locid) a ON l.id=a.locid LEFT JOIN  (SELECT ud.locid locid,COUNT(uc.id) priseCount FROM user_comment uc,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)  UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE ud.id=uc.creator_id AND uc.obj_type='AlbumItem'   AND uc.create_time>"2014-08-11 00:00:00" AND uc.create_time<"2014-08-12 00:00:00"   GROUP BY ud.locid ) b ON l.id=b.locid LEFT JOIN (SELECT ud.locid locid,COUNT(uc.id) comCount FROM user_comment uc,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)  UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE ud.id=uc.creator_id AND uc.obj_type='SystemComment'   AND uc.create_time>="2014-08-11 00:00:00" AND uc.create_time<"2014-08-12 00:00:00"  GROUP BY ud.locid) c ON l.id=c.locid  WHERE l.id IN(24561,28422) [ RunTime:0.016001s ]
SQL: SELECT a.rname a,l.name b,d.name c,a.age d FROM (SELECT u.id uid,u.real_name rname,u.location_id locid,u.dept_id depId,(2014-(SELECT SUBSTR(u.identify_value,7,4))+0) age FROM app_user u WHERE NOT EXISTS ( SELECT lo.user_id FROM login_log lo WHERE u.id=lo.user_id  ) AND u.id IN( SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id FROM app_user u WHERE u.location_id IN(24561,28422) )) a,location l,department d WHERE a.depId=d.id AND a.locid=l.id [ RunTime:4.103234s ]
SQL: SELECT u.id,u.real_name,COALESCE(a.worklogCount,0) worklogCount,COALESCE(b.logCount,0) logCount FROM app_user u LEFT JOIN (SELECT w.owner_id uid,COALESCE(COUNT(w.id)) worklogCount FROM work_log w WHERE w.owner_id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id = UNION ALL SELECT u.id FROM app_user u WHERE u.location_id = ) AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00" GROUP BY w.owner_id) a ON u.id=a.uid LEFT JOIN (SELECT lo.user_id uid,COUNT(lo.user_id) logCount FROM login_log lo WHERE lo.user_id IN( SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id = UNION ALL SELECT u.id FROM app_user u WHERE u.location_id = ) AND lo.login_time>="2014-08-11 00:00:00" AND lo.login_time<"2014-08-12 00:00:00" GROUP BY lo.user_id ) b ON u.id=b.uid WHERE u.id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id = UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24561 ) ORDER BY a.worklogCount DESC,b.logCount DESC LIMIT 10 [ RunTime:0.002000s ]
ERR: 1064:You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'UNION ALL SELECT u.id FROM app_user u WHERE u.location_id = ) AND w.create_time>' at line 1
 [ SQL语句 ] : SELECT u.id,u.real_name,COALESCE(a.worklogCount,0) worklogCount,COALESCE(b.logCount,0) logCount FROM app_user u LEFT JOIN (SELECT w.owner_id uid,COALESCE(COUNT(w.id)) worklogCount FROM work_log w WHERE w.owner_id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id = UNION ALL SELECT u.id FROM app_user u WHERE u.location_id = ) AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00" GROUP BY w.owner_id) a ON u.id=a.uid LEFT JOIN (SELECT lo.user_id uid,COUNT(lo.user_id) logCount FROM login_log lo WHERE lo.user_id IN( SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id = UNION ALL SELECT u.id FROM app_user u WHERE u.location_id = ) AND lo.login_time>="2014-08-11 00:00:00" AND lo.login_time<"2014-08-12 00:00:00" GROUP BY lo.user_id ) b ON u.id=b.uid WHERE u.id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id = UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24561 ) ORDER BY a.worklogCount DESC,b.logCount DESC LIMIT 10
SQL: SELECT u.id,u.real_name,COALESCE(a.worklogCount,0) worklogCount,COALESCE(b.logCount,0) logCount FROM app_user u LEFT JOIN (SELECT w.owner_id uid,COALESCE(COUNT(w.id)) worklogCount FROM work_log w WHERE w.owner_id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id = UNION ALL SELECT u.id FROM app_user u WHERE u.location_id = ) AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00" GROUP BY w.owner_id) a ON u.id=a.uid LEFT JOIN (SELECT lo.user_id uid,COUNT(lo.user_id) logCount FROM login_log lo WHERE lo.user_id IN( SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id = UNION ALL SELECT u.id FROM app_user u WHERE u.location_id = ) AND lo.login_time>="2014-08-11 00:00:00" AND lo.login_time<"2014-08-12 00:00:00" GROUP BY lo.user_id ) b ON u.id=b.uid WHERE u.id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id = UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24561 ) ORDER BY a.worklogCount DESC,b.logCount DESC LIMIT 10 [ RunTime:0.002000s ]
ERR: 1064:You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'UNION ALL SELECT u.id FROM app_user u WHERE u.location_id = ) AND w.create_time>' at line 1
 [ SQL语句 ] : SELECT u.id,u.real_name,COALESCE(a.worklogCount,0) worklogCount,COALESCE(b.logCount,0) logCount FROM app_user u LEFT JOIN (SELECT w.owner_id uid,COALESCE(COUNT(w.id)) worklogCount FROM work_log w WHERE w.owner_id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id = UNION ALL SELECT u.id FROM app_user u WHERE u.location_id = ) AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00" GROUP BY w.owner_id) a ON u.id=a.uid LEFT JOIN (SELECT lo.user_id uid,COUNT(lo.user_id) logCount FROM login_log lo WHERE lo.user_id IN( SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id = UNION ALL SELECT u.id FROM app_user u WHERE u.location_id = ) AND lo.login_time>="2014-08-11 00:00:00" AND lo.login_time<"2014-08-12 00:00:00" GROUP BY lo.user_id ) b ON u.id=b.uid WHERE u.id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id = UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24561 ) ORDER BY a.worklogCount DESC,b.logCount DESC LIMIT 10
SQL: SELECT l.name,COALESCE(a.ulcount,0) b FROM  location l LEFT JOIN (SELECT ud.locid locid,COUNT(DISTINCT ud.id) ulcount,COUNT(ud.id) logCount FROM login_log lo,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE lo.user_id=ud.id   AND lo.login_time>="2014-08-11 00:00:00"   GROUP BY ud.locid) a ON a.locid=l.id WHERE l.id IN (24561,28422) [ RunTime:0.041002s ]
SQL: 
				CALL count_worklog_all("2014-08-11 00:00:00","2014-08-12 00:00:00",("24561,28422"))
				 [ RunTime:0.032002s ]
INFO: [ view_parse ] --START--
NOTIC: [8] Undefined variable: data7 D:\Dropbox-List\Net\Dropbox\WebDev\xampp\htdocs\php_demo\shizhan\10\10wish\APP\Runtime\Cache\Njb\4c43491aeece36133122026e69b0ba99.php 第 133 行.
NOTIC: [8] Undefined variable: data8 D:\Dropbox-List\Net\Dropbox\WebDev\xampp\htdocs\php_demo\shizhan\10\10wish\APP\Runtime\Cache\Njb\4c43491aeece36133122026e69b0ba99.php 第 152 行.
NOTIC: [8] Undefined variable: data9 D:\Dropbox-List\Net\Dropbox\WebDev\xampp\htdocs\php_demo\shizhan\10\10wish\APP\Runtime\Cache\Njb\4c43491aeece36133122026e69b0ba99.php 第 171 行.
NOTIC: [8] Undefined variable: data10 D:\Dropbox-List\Net\Dropbox\WebDev\xampp\htdocs\php_demo\shizhan\10\10wish\APP\Runtime\Cache\Njb\4c43491aeece36133122026e69b0ba99.php 第 192 行.
INFO: ParseTemplate Behavior ::run [ RunTime:0.889051s ]
INFO: [ view_parse ] --END-- [ RunTime:0.895051s ]
INFO: [ view_filter ] --START--
INFO: ContentReplace Behavior ::run [ RunTime:0.041003s ]
INFO: TokenBuild Behavior ::run [ RunTime:0.019001s ]
INFO: WriteHtmlCache Behavior ::run [ RunTime:0.005000s ]
INFO: ShowRuntime Behavior ::run [ RunTime:0.016001s ]
INFO: [ view_filter ] --END-- [ RunTime:0.103006s ]
INFO: [ view_end ] --START--
INFO: ShowPageTrace Behavior ::run [ RunTime:0.040002s ]
INFO: [ view_end ] --END-- [ RunTime:0.054003s ]

[ 2014-08-12T10:09:23+08:00 ] 127.0.0.1 /php_demo/shizhan/10/10wish/index.php/Njb/Index/tongji?checkbox%5B%5D=24561&checkbox%5B%5D=28422&date_begin=2014-08-11&date_end=2014-08-12
INFO: [ route_check ] --START--
INFO: CheckRoute Behavior ::run [ RunTime:0.016001s ]
INFO: [ route_check ] --END-- [ RunTime:0.029001s ]
INFO: [ app_begin ] --START--
INFO: ReadHtmlCache Behavior ::run [ RunTime:0.026002s ]
INFO: [ app_begin ] --END-- [ RunTime:0.036002s ]
SQL: SELECT l.name,COALESCE(a.ucount,0) as yhs,COALESCE(c.ulcount,0) as dlyhs,COALESCE(c.logCount,0) as dlcs FROM location l LEFT JOIN (SELECT ud.locid locid,COUNT(ud.id) ucount FROM   (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)    UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud     GROUP BY ud.locid  ) a ON l.id=a.locid  LEFT JOIN (SELECT ud.locid locid,COUNT(DISTINCT ud.id) ulcount,COUNT(ud.id) logCount FROM login_log lo,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE lo.user_id=ud.id   AND lo.login_time>="2014-08-11 00:00:00" AND lo.login_time<"2014-08-12 00:00:00"   GROUP BY ud.locid) c ON l.id=c.locid WHERE l.id IN(24561,28422) [ RunTime:0.080005s ]
SQL: SELECT l.name,COALESCE(a.noticeCount,0) noticeCount,COALESCE(a.userCount,0) userCount FROM location l LEFT JOIN  (SELECT ud.locid locid,COUNT(n.id) noticeCount,COUNT(DISTINCT ud.id) userCount FROM notice n,   (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)    UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud   WHERE n.owner_id=ud.id AND n.publish_time>="2014-08-11 00:00:00"    AND n.publish_time<"2014-08-12 00:00:00" GROUP BY ud.locid) a  ON l.id=a.locid WHERE l.id IN(24561,28422) [ RunTime:0.008000s ]
SQL: SELECT l.name,COALESCE(a.asCount,0) a,COALESCE(b.adminCount,0) b,COALESCE(c.noAdminCount,0) c FROM location l LEFT JOIN  (SELECT ud.locid locid,COUNT(t.id) asCount FROM assignment t,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE t.creator_id=ud.id AND t.create_time>="2014-08-11 00:00:00" AND  t.create_time<"2014-08-12 00:00:00"  GROUP BY ud.locid) a ON l.id=a.locid  LEFT JOIN (SELECT ud.locid locid,COUNT(DISTINCT ud.id) adminCount FROM assignment t,app_user_role r,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud   WHERE t.creator_id=ud.id AND ud.id=r.user_id AND r.role='TechAdmin'   AND t.create_time>="2014-08-11 00:00:00" AND  t.create_time<"2014-08-12 00:00:00"  GROUP BY ud.locid ) b ON l.id=b.locid LEFT JOIN (SELECT ud.locid locid,COUNT(DISTINCT ud.id) noAdminCount FROM assignment t,app_user_role r,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE t.creator_id=ud.id AND ud.id=r.user_id AND r.role='Technician'   AND t.create_time>="2014-08-11 00:00:00" AND  t.create_time<"2014-08-12 00:00:00"  GROUP BY ud.locid ) c ON l.id=c.locid  WHERE l.id IN(24561,28422) [ RunTime:0.019001s ]
SQL: SELECT l.name,COALESCE(a.worklogCount,0) a,COALESCE(a.uCount,0) b,COALESCE(b.docCount,0) c,COALESCE(c.phoCount,0) d,COALESCE(d.audioCount,0) e FROM location l LEFT JOIN  (SELECT ud.locid locid,COUNT(DISTINCT w.id) worklogCount,COUNT(DISTINCT w.owner_id) uCount FROM work_log w,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE w.owner_id=ud.id    AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00"  GROUP BY ud.locid) a ON l.id=a.locid LEFT JOIN  (SELECT ud.locid locid,i.media_type,COUNT(i.id) docCount FROM work_log w,work_log_item i,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE w.owner_id=ud.id AND w.id=i.work_log_id   AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00"  AND i.media_type=1   GROUP BY ud.locid ) b ON l.id=b.locid LEFT JOIN  (SELECT ud.locid locid,i.media_type,COUNT(i.id) phoCount FROM work_log w,work_log_item i,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE w.owner_id=ud.id AND w.id=i.work_log_id   AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00"  AND i.media_type=2   GROUP BY ud.locid ) c ON l.id=c.locid LEFT JOIN  (SELECT ud.locid locid,i.media_type,COUNT(i.id) audioCount FROM work_log w,work_log_item i,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE w.owner_id=ud.id AND w.id=i.work_log_id   AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00"  AND i.media_type=3   GROUP BY ud.locid ) d ON l.id=d.locid   WHERE l.id IN(24561,28422) [ RunTime:0.049003s ]
SQL: SELECT l.name,COALESCE(a.photoCount,0) a,COALESCE(a.ucount,0) b,COALESCE(b.priseCount,0) c,COALESCE(c.comCount,0) d FROM location l LEFT JOIN (SELECT ud.locid locid,COUNT(i.id) photoCount,COUNT(DISTINCT ud.id) ucount FROM album m,album_item i,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)  UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE m.owner_id=ud.id AND i.album_id=m.id   AND i.create_time>="2014-08-11 00:00:00" AND i.create_time<"2014-08-12 00:00:00"  GROUP BY ud.locid) a ON l.id=a.locid LEFT JOIN  (SELECT ud.locid locid,COUNT(uc.id) priseCount FROM user_comment uc,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)  UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE ud.id=uc.creator_id AND uc.obj_type='AlbumItem'   AND uc.create_time>"2014-08-11 00:00:00" AND uc.create_time<"2014-08-12 00:00:00"   GROUP BY ud.locid ) b ON l.id=b.locid LEFT JOIN (SELECT ud.locid locid,COUNT(uc.id) comCount FROM user_comment uc,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)  UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE ud.id=uc.creator_id AND uc.obj_type='SystemComment'   AND uc.create_time>="2014-08-11 00:00:00" AND uc.create_time<"2014-08-12 00:00:00"  GROUP BY ud.locid) c ON l.id=c.locid  WHERE l.id IN(24561,28422) [ RunTime:0.022001s ]
SQL: SELECT a.rname a,l.name b,d.name c,a.age d FROM (SELECT u.id uid,u.real_name rname,u.location_id locid,u.dept_id depId,(2014-(SELECT SUBSTR(u.identify_value,7,4))+0) age FROM app_user u WHERE NOT EXISTS ( SELECT lo.user_id FROM login_log lo WHERE u.id=lo.user_id  ) AND u.id IN( SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id FROM app_user u WHERE u.location_id IN(24561,28422) )) a,location l,department d WHERE a.depId=d.id AND a.locid=l.id [ RunTime:4.365249s ]
SQL: SELECT u.id,u.real_name,COALESCE(a.worklogCount,0) worklogCount,COALESCE(b.logCount,0) logCount FROM app_user u LEFT JOIN (SELECT w.owner_id uid,COALESCE(COUNT(w.id)) worklogCount FROM work_log w WHERE w.owner_id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id = UNION ALL SELECT u.id FROM app_user u WHERE u.location_id = ) AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00" GROUP BY w.owner_id) a ON u.id=a.uid LEFT JOIN (SELECT lo.user_id uid,COUNT(lo.user_id) logCount FROM login_log lo WHERE lo.user_id IN( SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id = UNION ALL SELECT u.id FROM app_user u WHERE u.location_id = ) AND lo.login_time>="2014-08-11 00:00:00" AND lo.login_time<"2014-08-12 00:00:00" GROUP BY lo.user_id ) b ON u.id=b.uid WHERE u.id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id = UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24561 ) ORDER BY a.worklogCount DESC,b.logCount DESC LIMIT 10 [ RunTime:0.002000s ]
ERR: 1064:You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'UNION ALL SELECT u.id FROM app_user u WHERE u.location_id = ) AND w.create_time>' at line 1
 [ SQL语句 ] : SELECT u.id,u.real_name,COALESCE(a.worklogCount,0) worklogCount,COALESCE(b.logCount,0) logCount FROM app_user u LEFT JOIN (SELECT w.owner_id uid,COALESCE(COUNT(w.id)) worklogCount FROM work_log w WHERE w.owner_id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id = UNION ALL SELECT u.id FROM app_user u WHERE u.location_id = ) AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00" GROUP BY w.owner_id) a ON u.id=a.uid LEFT JOIN (SELECT lo.user_id uid,COUNT(lo.user_id) logCount FROM login_log lo WHERE lo.user_id IN( SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id = UNION ALL SELECT u.id FROM app_user u WHERE u.location_id = ) AND lo.login_time>="2014-08-11 00:00:00" AND lo.login_time<"2014-08-12 00:00:00" GROUP BY lo.user_id ) b ON u.id=b.uid WHERE u.id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id = UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24561 ) ORDER BY a.worklogCount DESC,b.logCount DESC LIMIT 10
SQL: SELECT u.id,u.real_name,COALESCE(a.worklogCount,0) worklogCount,COALESCE(b.logCount,0) logCount FROM app_user u LEFT JOIN (SELECT w.owner_id uid,COALESCE(COUNT(w.id)) worklogCount FROM work_log w WHERE w.owner_id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id = UNION ALL SELECT u.id FROM app_user u WHERE u.location_id = ) AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00" GROUP BY w.owner_id) a ON u.id=a.uid LEFT JOIN (SELECT lo.user_id uid,COUNT(lo.user_id) logCount FROM login_log lo WHERE lo.user_id IN( SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id = UNION ALL SELECT u.id FROM app_user u WHERE u.location_id = ) AND lo.login_time>="2014-08-11 00:00:00" AND lo.login_time<"2014-08-12 00:00:00" GROUP BY lo.user_id ) b ON u.id=b.uid WHERE u.id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id = UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24561 ) ORDER BY a.worklogCount DESC,b.logCount DESC LIMIT 10 [ RunTime:0.002000s ]
ERR: 1064:You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'UNION ALL SELECT u.id FROM app_user u WHERE u.location_id = ) AND w.create_time>' at line 1
 [ SQL语句 ] : SELECT u.id,u.real_name,COALESCE(a.worklogCount,0) worklogCount,COALESCE(b.logCount,0) logCount FROM app_user u LEFT JOIN (SELECT w.owner_id uid,COALESCE(COUNT(w.id)) worklogCount FROM work_log w WHERE w.owner_id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id = UNION ALL SELECT u.id FROM app_user u WHERE u.location_id = ) AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00" GROUP BY w.owner_id) a ON u.id=a.uid LEFT JOIN (SELECT lo.user_id uid,COUNT(lo.user_id) logCount FROM login_log lo WHERE lo.user_id IN( SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id = UNION ALL SELECT u.id FROM app_user u WHERE u.location_id = ) AND lo.login_time>="2014-08-11 00:00:00" AND lo.login_time<"2014-08-12 00:00:00" GROUP BY lo.user_id ) b ON u.id=b.uid WHERE u.id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id = UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24561 ) ORDER BY a.worklogCount DESC,b.logCount DESC LIMIT 10
SQL: SELECT l.name,COALESCE(a.ulcount,0) b FROM  location l LEFT JOIN (SELECT ud.locid locid,COUNT(DISTINCT ud.id) ulcount,COUNT(ud.id) logCount FROM login_log lo,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE lo.user_id=ud.id   AND lo.login_time>="2014-08-11 00:00:00"   GROUP BY ud.locid) a ON a.locid=l.id WHERE l.id IN (24561,28422) [ RunTime:0.045003s ]
SQL: 
				CALL count_worklog_all("2014-08-11 00:00:00","2014-08-12 00:00:00",("24561,28422"))
				 [ RunTime:0.036002s ]
INFO: [ view_parse ] --START--
NOTIC: [8] Undefined variable: data7 D:\Dropbox-List\Net\Dropbox\WebDev\xampp\htdocs\php_demo\shizhan\10\10wish\APP\Runtime\Cache\Njb\4c43491aeece36133122026e69b0ba99.php 第 133 行.
NOTIC: [8] Undefined variable: data8 D:\Dropbox-List\Net\Dropbox\WebDev\xampp\htdocs\php_demo\shizhan\10\10wish\APP\Runtime\Cache\Njb\4c43491aeece36133122026e69b0ba99.php 第 152 行.
NOTIC: [8] Undefined variable: data9 D:\Dropbox-List\Net\Dropbox\WebDev\xampp\htdocs\php_demo\shizhan\10\10wish\APP\Runtime\Cache\Njb\4c43491aeece36133122026e69b0ba99.php 第 171 行.
NOTIC: [8] Undefined variable: data10 D:\Dropbox-List\Net\Dropbox\WebDev\xampp\htdocs\php_demo\shizhan\10\10wish\APP\Runtime\Cache\Njb\4c43491aeece36133122026e69b0ba99.php 第 192 行.
INFO: ParseTemplate Behavior ::run [ RunTime:0.961055s ]
INFO: [ view_parse ] --END-- [ RunTime:0.969055s ]
INFO: [ view_filter ] --START--
INFO: ContentReplace Behavior ::run [ RunTime:0.017001s ]
INFO: TokenBuild Behavior ::run [ RunTime:0.014001s ]
INFO: WriteHtmlCache Behavior ::run [ RunTime:0.011001s ]
INFO: ShowRuntime Behavior ::run [ RunTime:0.018001s ]
INFO: [ view_filter ] --END-- [ RunTime:0.080005s ]
INFO: [ view_end ] --START--
INFO: ShowPageTrace Behavior ::run [ RunTime:0.015001s ]
INFO: [ view_end ] --END-- [ RunTime:0.024002s ]

[ 2014-08-12T10:11:12+08:00 ] 127.0.0.1 /php_demo/shizhan/10/10wish/index.php/Njb/Index/tongji?checkbox%5B%5D=24561&checkbox%5B%5D=28422&date_begin=2014-08-11&date_end=2014-08-12
INFO: [ route_check ] --START--
INFO: CheckRoute Behavior ::run [ RunTime:0.022001s ]
INFO: [ route_check ] --END-- [ RunTime:0.034002s ]
INFO: [ app_begin ] --START--
INFO: ReadHtmlCache Behavior ::run [ RunTime:0.022001s ]
INFO: [ app_begin ] --END-- [ RunTime:0.034002s ]
SQL: SELECT l.name,COALESCE(a.ucount,0) as yhs,COALESCE(c.ulcount,0) as dlyhs,COALESCE(c.logCount,0) as dlcs FROM location l LEFT JOIN (SELECT ud.locid locid,COUNT(ud.id) ucount FROM   (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)    UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud     GROUP BY ud.locid  ) a ON l.id=a.locid  LEFT JOIN (SELECT ud.locid locid,COUNT(DISTINCT ud.id) ulcount,COUNT(ud.id) logCount FROM login_log lo,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE lo.user_id=ud.id   AND lo.login_time>="2014-08-11 00:00:00" AND lo.login_time<"2014-08-12 00:00:00"   GROUP BY ud.locid) c ON l.id=c.locid WHERE l.id IN(24561,28422) [ RunTime:0.070004s ]
SQL: SELECT l.name,COALESCE(a.noticeCount,0) noticeCount,COALESCE(a.userCount,0) userCount FROM location l LEFT JOIN  (SELECT ud.locid locid,COUNT(n.id) noticeCount,COUNT(DISTINCT ud.id) userCount FROM notice n,   (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)    UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud   WHERE n.owner_id=ud.id AND n.publish_time>="2014-08-11 00:00:00"    AND n.publish_time<"2014-08-12 00:00:00" GROUP BY ud.locid) a  ON l.id=a.locid WHERE l.id IN(24561,28422) [ RunTime:0.008001s ]
SQL: SELECT l.name,COALESCE(a.asCount,0) a,COALESCE(b.adminCount,0) b,COALESCE(c.noAdminCount,0) c FROM location l LEFT JOIN  (SELECT ud.locid locid,COUNT(t.id) asCount FROM assignment t,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE t.creator_id=ud.id AND t.create_time>="2014-08-11 00:00:00" AND  t.create_time<"2014-08-12 00:00:00"  GROUP BY ud.locid) a ON l.id=a.locid  LEFT JOIN (SELECT ud.locid locid,COUNT(DISTINCT ud.id) adminCount FROM assignment t,app_user_role r,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud   WHERE t.creator_id=ud.id AND ud.id=r.user_id AND r.role='TechAdmin'   AND t.create_time>="2014-08-11 00:00:00" AND  t.create_time<"2014-08-12 00:00:00"  GROUP BY ud.locid ) b ON l.id=b.locid LEFT JOIN (SELECT ud.locid locid,COUNT(DISTINCT ud.id) noAdminCount FROM assignment t,app_user_role r,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE t.creator_id=ud.id AND ud.id=r.user_id AND r.role='Technician'   AND t.create_time>="2014-08-11 00:00:00" AND  t.create_time<"2014-08-12 00:00:00"  GROUP BY ud.locid ) c ON l.id=c.locid  WHERE l.id IN(24561,28422) [ RunTime:0.016001s ]
SQL: SELECT l.name,COALESCE(a.worklogCount,0) a,COALESCE(a.uCount,0) b,COALESCE(b.docCount,0) c,COALESCE(c.phoCount,0) d,COALESCE(d.audioCount,0) e FROM location l LEFT JOIN  (SELECT ud.locid locid,COUNT(DISTINCT w.id) worklogCount,COUNT(DISTINCT w.owner_id) uCount FROM work_log w,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE w.owner_id=ud.id    AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00"  GROUP BY ud.locid) a ON l.id=a.locid LEFT JOIN  (SELECT ud.locid locid,i.media_type,COUNT(i.id) docCount FROM work_log w,work_log_item i,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE w.owner_id=ud.id AND w.id=i.work_log_id   AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00"  AND i.media_type=1   GROUP BY ud.locid ) b ON l.id=b.locid LEFT JOIN  (SELECT ud.locid locid,i.media_type,COUNT(i.id) phoCount FROM work_log w,work_log_item i,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE w.owner_id=ud.id AND w.id=i.work_log_id   AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00"  AND i.media_type=2   GROUP BY ud.locid ) c ON l.id=c.locid LEFT JOIN  (SELECT ud.locid locid,i.media_type,COUNT(i.id) audioCount FROM work_log w,work_log_item i,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE w.owner_id=ud.id AND w.id=i.work_log_id   AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00"  AND i.media_type=3   GROUP BY ud.locid ) d ON l.id=d.locid   WHERE l.id IN(24561,28422) [ RunTime:0.038002s ]
SQL: SELECT l.name,COALESCE(a.photoCount,0) a,COALESCE(a.ucount,0) b,COALESCE(b.priseCount,0) c,COALESCE(c.comCount,0) d FROM location l LEFT JOIN (SELECT ud.locid locid,COUNT(i.id) photoCount,COUNT(DISTINCT ud.id) ucount FROM album m,album_item i,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)  UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE m.owner_id=ud.id AND i.album_id=m.id   AND i.create_time>="2014-08-11 00:00:00" AND i.create_time<"2014-08-12 00:00:00"  GROUP BY ud.locid) a ON l.id=a.locid LEFT JOIN  (SELECT ud.locid locid,COUNT(uc.id) priseCount FROM user_comment uc,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)  UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE ud.id=uc.creator_id AND uc.obj_type='AlbumItem'   AND uc.create_time>"2014-08-11 00:00:00" AND uc.create_time<"2014-08-12 00:00:00"   GROUP BY ud.locid ) b ON l.id=b.locid LEFT JOIN (SELECT ud.locid locid,COUNT(uc.id) comCount FROM user_comment uc,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)  UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE ud.id=uc.creator_id AND uc.obj_type='SystemComment'   AND uc.create_time>="2014-08-11 00:00:00" AND uc.create_time<"2014-08-12 00:00:00"  GROUP BY ud.locid) c ON l.id=c.locid  WHERE l.id IN(24561,28422) [ RunTime:0.018001s ]
SQL: SELECT a.rname a,l.name b,d.name c,a.age d FROM (SELECT u.id uid,u.real_name rname,u.location_id locid,u.dept_id depId,(2014-(SELECT SUBSTR(u.identify_value,7,4))+0) age FROM app_user u WHERE NOT EXISTS ( SELECT lo.user_id FROM login_log lo WHERE u.id=lo.user_id  ) AND u.id IN( SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id FROM app_user u WHERE u.location_id IN(24561,28422) )) a,location l,department d WHERE a.depId=d.id AND a.locid=l.id [ RunTime:4.748272s ]
SQL: SELECT u.id,u.real_name,COALESCE(a.worklogCount,0) worklogCount,COALESCE(b.logCount,0) logCount FROM app_user u LEFT JOIN (SELECT w.owner_id uid,COALESCE(COUNT(w.id)) worklogCount FROM work_log w WHERE w.owner_id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24561 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24561 ) AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00" GROUP BY w.owner_id) a ON u.id=a.uid LEFT JOIN (SELECT lo.user_id uid,COUNT(lo.user_id) logCount FROM login_log lo WHERE lo.user_id IN( SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24561 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24561 ) AND lo.login_time>="2014-08-11 00:00:00" AND lo.login_time<"2014-08-12 00:00:00" GROUP BY lo.user_id ) b ON u.id=b.uid WHERE u.id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24561 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24561 ) ORDER BY a.worklogCount DESC,b.logCount DESC LIMIT 10 [ RunTime:0.654037s ]
SQL: SELECT u.id,u.real_name,COALESCE(a.worklogCount,0) worklogCount,COALESCE(b.logCount,0) logCount FROM app_user u LEFT JOIN (SELECT w.owner_id uid,COALESCE(COUNT(w.id)) worklogCount FROM work_log w WHERE w.owner_id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =28422 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =28422 ) AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00" GROUP BY w.owner_id) a ON u.id=a.uid LEFT JOIN (SELECT lo.user_id uid,COUNT(lo.user_id) logCount FROM login_log lo WHERE lo.user_id IN( SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =28422 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =28422 ) AND lo.login_time>="2014-08-11 00:00:00" AND lo.login_time<"2014-08-12 00:00:00" GROUP BY lo.user_id ) b ON u.id=b.uid WHERE u.id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =28422 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24561 ) ORDER BY a.worklogCount DESC,b.logCount DESC LIMIT 10 [ RunTime:0.597034s ]
SQL: SELECT l.name,COALESCE(a.ulcount,0) b FROM  location l LEFT JOIN (SELECT ud.locid locid,COUNT(DISTINCT ud.id) ulcount,COUNT(ud.id) logCount FROM login_log lo,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE lo.user_id=ud.id   AND lo.login_time>="2014-08-11 00:00:00"   GROUP BY ud.locid) a ON a.locid=l.id WHERE l.id IN (24561,28422) [ RunTime:0.076004s ]
SQL: 
				CALL count_worklog_all("2014-08-11 00:00:00","2014-08-12 00:00:00",("24561,28422"))
				 [ RunTime:0.047003s ]
INFO: [ view_parse ] --START--
NOTIC: [8] Undefined variable: data7 D:\Dropbox-List\Net\Dropbox\WebDev\xampp\htdocs\php_demo\shizhan\10\10wish\APP\Runtime\Cache\Njb\4c43491aeece36133122026e69b0ba99.php 第 133 行.
NOTIC: [8] Undefined variable: data8 D:\Dropbox-List\Net\Dropbox\WebDev\xampp\htdocs\php_demo\shizhan\10\10wish\APP\Runtime\Cache\Njb\4c43491aeece36133122026e69b0ba99.php 第 152 行.
NOTIC: [8] Undefined variable: data9 D:\Dropbox-List\Net\Dropbox\WebDev\xampp\htdocs\php_demo\shizhan\10\10wish\APP\Runtime\Cache\Njb\4c43491aeece36133122026e69b0ba99.php 第 171 行.
NOTIC: [8] Undefined variable: data10 D:\Dropbox-List\Net\Dropbox\WebDev\xampp\htdocs\php_demo\shizhan\10\10wish\APP\Runtime\Cache\Njb\4c43491aeece36133122026e69b0ba99.php 第 192 行.
INFO: ParseTemplate Behavior ::run [ RunTime:1.028059s ]
INFO: [ view_parse ] --END-- [ RunTime:1.038059s ]
INFO: [ view_filter ] --START--
INFO: ContentReplace Behavior ::run [ RunTime:0.010001s ]
INFO: TokenBuild Behavior ::run [ RunTime:0.011001s ]
INFO: WriteHtmlCache Behavior ::run [ RunTime:0.006000s ]
INFO: ShowRuntime Behavior ::run [ RunTime:0.017001s ]
INFO: [ view_filter ] --END-- [ RunTime:0.063004s ]
NOTIC: [2] Cannot modify header information - headers already sent by (output started at D:\Dropbox-List\Net\Dropbox\WebDev\xampp\htdocs\php_demo\shizhan\10\10wish\APP\Lib\Action\Njb\IndexAction.class.php:93) D:\Dropbox-List\Net\Dropbox\WebDev\xampp\htdocs\php_demo\shizhan\10\10wish\ThinkPHP\Lib\Core\View.class.php 第 95 行.
NOTIC: [2] Cannot modify header information - headers already sent by (output started at D:\Dropbox-List\Net\Dropbox\WebDev\xampp\htdocs\php_demo\shizhan\10\10wish\APP\Lib\Action\Njb\IndexAction.class.php:93) D:\Dropbox-List\Net\Dropbox\WebDev\xampp\htdocs\php_demo\shizhan\10\10wish\ThinkPHP\Lib\Core\View.class.php 第 96 行.
NOTIC: [2] Cannot modify header information - headers already sent by (output started at D:\Dropbox-List\Net\Dropbox\WebDev\xampp\htdocs\php_demo\shizhan\10\10wish\APP\Lib\Action\Njb\IndexAction.class.php:93) D:\Dropbox-List\Net\Dropbox\WebDev\xampp\htdocs\php_demo\shizhan\10\10wish\ThinkPHP\Lib\Core\View.class.php 第 97 行.
INFO: [ view_end ] --START--
INFO: ShowPageTrace Behavior ::run [ RunTime:0.018001s ]
INFO: [ view_end ] --END-- [ RunTime:0.027001s ]

[ 2014-08-12T10:16:30+08:00 ] 127.0.0.1 /php_demo/shizhan/10/10wish/index.php/Njb/Index/tongji?checkbox%5B%5D=24561&checkbox%5B%5D=28422&date_begin=2014-08-11&date_end=2014-08-12
INFO: [ route_check ] --START--
INFO: CheckRoute Behavior ::run [ RunTime:0.016001s ]
INFO: [ route_check ] --END-- [ RunTime:0.031001s ]
INFO: [ app_begin ] --START--
INFO: ReadHtmlCache Behavior ::run [ RunTime:0.021001s ]
INFO: [ app_begin ] --END-- [ RunTime:0.033002s ]
SQL: SELECT l.name,COALESCE(a.ucount,0) as yhs,COALESCE(c.ulcount,0) as dlyhs,COALESCE(c.logCount,0) as dlcs FROM location l LEFT JOIN (SELECT ud.locid locid,COUNT(ud.id) ucount FROM   (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)    UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud     GROUP BY ud.locid  ) a ON l.id=a.locid  LEFT JOIN (SELECT ud.locid locid,COUNT(DISTINCT ud.id) ulcount,COUNT(ud.id) logCount FROM login_log lo,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE lo.user_id=ud.id   AND lo.login_time>="2014-08-11 00:00:00" AND lo.login_time<"2014-08-12 00:00:00"   GROUP BY ud.locid) c ON l.id=c.locid WHERE l.id IN(24561,28422) [ RunTime:0.068004s ]
SQL: SELECT l.name,COALESCE(a.noticeCount,0) noticeCount,COALESCE(a.userCount,0) userCount FROM location l LEFT JOIN  (SELECT ud.locid locid,COUNT(n.id) noticeCount,COUNT(DISTINCT ud.id) userCount FROM notice n,   (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)    UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud   WHERE n.owner_id=ud.id AND n.publish_time>="2014-08-11 00:00:00"    AND n.publish_time<"2014-08-12 00:00:00" GROUP BY ud.locid) a  ON l.id=a.locid WHERE l.id IN(24561,28422) [ RunTime:0.007001s ]
SQL: SELECT l.name,COALESCE(a.asCount,0) a,COALESCE(b.adminCount,0) b,COALESCE(c.noAdminCount,0) c FROM location l LEFT JOIN  (SELECT ud.locid locid,COUNT(t.id) asCount FROM assignment t,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE t.creator_id=ud.id AND t.create_time>="2014-08-11 00:00:00" AND  t.create_time<"2014-08-12 00:00:00"  GROUP BY ud.locid) a ON l.id=a.locid  LEFT JOIN (SELECT ud.locid locid,COUNT(DISTINCT ud.id) adminCount FROM assignment t,app_user_role r,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud   WHERE t.creator_id=ud.id AND ud.id=r.user_id AND r.role='TechAdmin'   AND t.create_time>="2014-08-11 00:00:00" AND  t.create_time<"2014-08-12 00:00:00"  GROUP BY ud.locid ) b ON l.id=b.locid LEFT JOIN (SELECT ud.locid locid,COUNT(DISTINCT ud.id) noAdminCount FROM assignment t,app_user_role r,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE t.creator_id=ud.id AND ud.id=r.user_id AND r.role='Technician'   AND t.create_time>="2014-08-11 00:00:00" AND  t.create_time<"2014-08-12 00:00:00"  GROUP BY ud.locid ) c ON l.id=c.locid  WHERE l.id IN(24561,28422) [ RunTime:0.052003s ]
SQL: SELECT l.name,COALESCE(a.worklogCount,0) a,COALESCE(a.uCount,0) b,COALESCE(b.docCount,0) c,COALESCE(c.phoCount,0) d,COALESCE(d.audioCount,0) e FROM location l LEFT JOIN  (SELECT ud.locid locid,COUNT(DISTINCT w.id) worklogCount,COUNT(DISTINCT w.owner_id) uCount FROM work_log w,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE w.owner_id=ud.id    AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00"  GROUP BY ud.locid) a ON l.id=a.locid LEFT JOIN  (SELECT ud.locid locid,i.media_type,COUNT(i.id) docCount FROM work_log w,work_log_item i,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE w.owner_id=ud.id AND w.id=i.work_log_id   AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00"  AND i.media_type=1   GROUP BY ud.locid ) b ON l.id=b.locid LEFT JOIN  (SELECT ud.locid locid,i.media_type,COUNT(i.id) phoCount FROM work_log w,work_log_item i,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE w.owner_id=ud.id AND w.id=i.work_log_id   AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00"  AND i.media_type=2   GROUP BY ud.locid ) c ON l.id=c.locid LEFT JOIN  (SELECT ud.locid locid,i.media_type,COUNT(i.id) audioCount FROM work_log w,work_log_item i,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE w.owner_id=ud.id AND w.id=i.work_log_id   AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00"  AND i.media_type=3   GROUP BY ud.locid ) d ON l.id=d.locid   WHERE l.id IN(24561,28422) [ RunTime:0.036002s ]
SQL: SELECT l.name,COALESCE(a.photoCount,0) a,COALESCE(a.ucount,0) b,COALESCE(b.priseCount,0) c,COALESCE(c.comCount,0) d FROM location l LEFT JOIN (SELECT ud.locid locid,COUNT(i.id) photoCount,COUNT(DISTINCT ud.id) ucount FROM album m,album_item i,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)  UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE m.owner_id=ud.id AND i.album_id=m.id   AND i.create_time>="2014-08-11 00:00:00" AND i.create_time<"2014-08-12 00:00:00"  GROUP BY ud.locid) a ON l.id=a.locid LEFT JOIN  (SELECT ud.locid locid,COUNT(uc.id) priseCount FROM user_comment uc,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)  UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE ud.id=uc.creator_id AND uc.obj_type='AlbumItem'   AND uc.create_time>"2014-08-11 00:00:00" AND uc.create_time<"2014-08-12 00:00:00"   GROUP BY ud.locid ) b ON l.id=b.locid LEFT JOIN (SELECT ud.locid locid,COUNT(uc.id) comCount FROM user_comment uc,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)  UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE ud.id=uc.creator_id AND uc.obj_type='SystemComment'   AND uc.create_time>="2014-08-11 00:00:00" AND uc.create_time<"2014-08-12 00:00:00"  GROUP BY ud.locid) c ON l.id=c.locid  WHERE l.id IN(24561,28422) [ RunTime:0.017001s ]
SQL: SELECT a.rname a,l.name b,d.name c,a.age d FROM (SELECT u.id uid,u.real_name rname,u.location_id locid,u.dept_id depId,(2014-(SELECT SUBSTR(u.identify_value,7,4))+0) age FROM app_user u WHERE NOT EXISTS ( SELECT lo.user_id FROM login_log lo WHERE u.id=lo.user_id  ) AND u.id IN( SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id FROM app_user u WHERE u.location_id IN(24561,28422) )) a,location l,department d WHERE a.depId=d.id AND a.locid=l.id [ RunTime:4.243242s ]
SQL: SELECT u.id,u.real_name,COALESCE(a.worklogCount,0) worklogCount,COALESCE(b.logCount,0) logCount FROM app_user u LEFT JOIN (SELECT w.owner_id uid,COALESCE(COUNT(w.id)) worklogCount FROM work_log w WHERE w.owner_id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24561 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24561 ) AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00" GROUP BY w.owner_id) a ON u.id=a.uid LEFT JOIN (SELECT lo.user_id uid,COUNT(lo.user_id) logCount FROM login_log lo WHERE lo.user_id IN( SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24561 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24561 ) AND lo.login_time>="2014-08-11 00:00:00" AND lo.login_time<"2014-08-12 00:00:00" GROUP BY lo.user_id ) b ON u.id=b.uid WHERE u.id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24561 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24561 ) ORDER BY a.worklogCount DESC,b.logCount DESC LIMIT 10 [ RunTime:0.532030s ]
SQL: SELECT u.id,u.real_name,COALESCE(a.worklogCount,0) worklogCount,COALESCE(b.logCount,0) logCount FROM app_user u LEFT JOIN (SELECT w.owner_id uid,COALESCE(COUNT(w.id)) worklogCount FROM work_log w WHERE w.owner_id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =28422 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =28422 ) AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00" GROUP BY w.owner_id) a ON u.id=a.uid LEFT JOIN (SELECT lo.user_id uid,COUNT(lo.user_id) logCount FROM login_log lo WHERE lo.user_id IN( SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =28422 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =28422 ) AND lo.login_time>="2014-08-11 00:00:00" AND lo.login_time<"2014-08-12 00:00:00" GROUP BY lo.user_id ) b ON u.id=b.uid WHERE u.id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =28422 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24561 ) ORDER BY a.worklogCount DESC,b.logCount DESC LIMIT 10 [ RunTime:0.534031s ]
SQL: SELECT l.name,COALESCE(a.ulcount,0) b FROM  location l LEFT JOIN (SELECT ud.locid locid,COUNT(DISTINCT ud.id) ulcount,COUNT(ud.id) logCount FROM login_log lo,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE lo.user_id=ud.id   AND lo.login_time>="2014-08-11 00:00:00"   GROUP BY ud.locid) a ON a.locid=l.id WHERE l.id IN (24561,28422) [ RunTime:0.087005s ]
SQL: 
				CALL count_worklog_all("2014-08-11 00:00:00","2014-08-12 00:00:00",("24561,28422"))
				 [ RunTime:0.120007s ]
INFO: [ view_parse ] --START--
NOTIC: [8] Array to string conversion D:\Dropbox-List\Net\Dropbox\WebDev\xampp\htdocs\php_demo\shizhan\10\10wish\APP\Runtime\Cache\Njb\4c43491aeece36133122026e69b0ba99.php 第 118 行.
NOTIC: [8] Array to string conversion D:\Dropbox-List\Net\Dropbox\WebDev\xampp\htdocs\php_demo\shizhan\10\10wish\APP\Runtime\Cache\Njb\4c43491aeece36133122026e69b0ba99.php 第 118 行.
NOTIC: [8] Undefined variable: data7 D:\Dropbox-List\Net\Dropbox\WebDev\xampp\htdocs\php_demo\shizhan\10\10wish\APP\Runtime\Cache\Njb\4c43491aeece36133122026e69b0ba99.php 第 133 行.
NOTIC: [8] Undefined variable: data8 D:\Dropbox-List\Net\Dropbox\WebDev\xampp\htdocs\php_demo\shizhan\10\10wish\APP\Runtime\Cache\Njb\4c43491aeece36133122026e69b0ba99.php 第 152 行.
NOTIC: [8] Undefined variable: data9 D:\Dropbox-List\Net\Dropbox\WebDev\xampp\htdocs\php_demo\shizhan\10\10wish\APP\Runtime\Cache\Njb\4c43491aeece36133122026e69b0ba99.php 第 171 行.
NOTIC: [8] Undefined variable: data10 D:\Dropbox-List\Net\Dropbox\WebDev\xampp\htdocs\php_demo\shizhan\10\10wish\APP\Runtime\Cache\Njb\4c43491aeece36133122026e69b0ba99.php 第 192 行.
INFO: ParseTemplate Behavior ::run [ RunTime:0.827047s ]
INFO: [ view_parse ] --END-- [ RunTime:0.835048s ]
INFO: [ view_filter ] --START--
INFO: ContentReplace Behavior ::run [ RunTime:0.021001s ]
INFO: TokenBuild Behavior ::run [ RunTime:0.011001s ]
INFO: WriteHtmlCache Behavior ::run [ RunTime:0.006001s ]
INFO: ShowRuntime Behavior ::run [ RunTime:0.016001s ]
INFO: [ view_filter ] --END-- [ RunTime:0.072004s ]
NOTIC: [2] Cannot modify header information - headers already sent by (output started at D:\Dropbox-List\Net\Dropbox\WebDev\xampp\htdocs\php_demo\shizhan\10\10wish\APP\Lib\Action\Njb\IndexAction.class.php:91) D:\Dropbox-List\Net\Dropbox\WebDev\xampp\htdocs\php_demo\shizhan\10\10wish\ThinkPHP\Lib\Core\View.class.php 第 95 行.
NOTIC: [2] Cannot modify header information - headers already sent by (output started at D:\Dropbox-List\Net\Dropbox\WebDev\xampp\htdocs\php_demo\shizhan\10\10wish\APP\Lib\Action\Njb\IndexAction.class.php:91) D:\Dropbox-List\Net\Dropbox\WebDev\xampp\htdocs\php_demo\shizhan\10\10wish\ThinkPHP\Lib\Core\View.class.php 第 96 行.
NOTIC: [2] Cannot modify header information - headers already sent by (output started at D:\Dropbox-List\Net\Dropbox\WebDev\xampp\htdocs\php_demo\shizhan\10\10wish\APP\Lib\Action\Njb\IndexAction.class.php:91) D:\Dropbox-List\Net\Dropbox\WebDev\xampp\htdocs\php_demo\shizhan\10\10wish\ThinkPHP\Lib\Core\View.class.php 第 97 行.
INFO: [ view_end ] --START--
INFO: ShowPageTrace Behavior ::run [ RunTime:0.010000s ]
INFO: [ view_end ] --END-- [ RunTime:0.016001s ]

[ 2014-08-12T10:17:08+08:00 ] 127.0.0.1 /php_demo/shizhan/10/10wish/index.php/Njb/Index/tongji?checkbox%5B%5D=24561&checkbox%5B%5D=28422&date_begin=2014-08-11&date_end=2014-08-12
INFO: [ route_check ] --START--
INFO: CheckRoute Behavior ::run [ RunTime:0.013001s ]
INFO: [ route_check ] --END-- [ RunTime:0.025001s ]
INFO: [ app_begin ] --START--
INFO: ReadHtmlCache Behavior ::run [ RunTime:0.024001s ]
INFO: [ app_begin ] --END-- [ RunTime:0.040002s ]
SQL: SELECT l.name,COALESCE(a.ucount,0) as yhs,COALESCE(c.ulcount,0) as dlyhs,COALESCE(c.logCount,0) as dlcs FROM location l LEFT JOIN (SELECT ud.locid locid,COUNT(ud.id) ucount FROM   (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)    UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud     GROUP BY ud.locid  ) a ON l.id=a.locid  LEFT JOIN (SELECT ud.locid locid,COUNT(DISTINCT ud.id) ulcount,COUNT(ud.id) logCount FROM login_log lo,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE lo.user_id=ud.id   AND lo.login_time>="2014-08-11 00:00:00" AND lo.login_time<"2014-08-12 00:00:00"   GROUP BY ud.locid) c ON l.id=c.locid WHERE l.id IN(24561,28422) [ RunTime:0.072004s ]
SQL: SELECT l.name,COALESCE(a.noticeCount,0) noticeCount,COALESCE(a.userCount,0) userCount FROM location l LEFT JOIN  (SELECT ud.locid locid,COUNT(n.id) noticeCount,COUNT(DISTINCT ud.id) userCount FROM notice n,   (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)    UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud   WHERE n.owner_id=ud.id AND n.publish_time>="2014-08-11 00:00:00"    AND n.publish_time<"2014-08-12 00:00:00" GROUP BY ud.locid) a  ON l.id=a.locid WHERE l.id IN(24561,28422) [ RunTime:0.006001s ]
SQL: SELECT l.name,COALESCE(a.asCount,0) a,COALESCE(b.adminCount,0) b,COALESCE(c.noAdminCount,0) c FROM location l LEFT JOIN  (SELECT ud.locid locid,COUNT(t.id) asCount FROM assignment t,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE t.creator_id=ud.id AND t.create_time>="2014-08-11 00:00:00" AND  t.create_time<"2014-08-12 00:00:00"  GROUP BY ud.locid) a ON l.id=a.locid  LEFT JOIN (SELECT ud.locid locid,COUNT(DISTINCT ud.id) adminCount FROM assignment t,app_user_role r,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud   WHERE t.creator_id=ud.id AND ud.id=r.user_id AND r.role='TechAdmin'   AND t.create_time>="2014-08-11 00:00:00" AND  t.create_time<"2014-08-12 00:00:00"  GROUP BY ud.locid ) b ON l.id=b.locid LEFT JOIN (SELECT ud.locid locid,COUNT(DISTINCT ud.id) noAdminCount FROM assignment t,app_user_role r,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE t.creator_id=ud.id AND ud.id=r.user_id AND r.role='Technician'   AND t.create_time>="2014-08-11 00:00:00" AND  t.create_time<"2014-08-12 00:00:00"  GROUP BY ud.locid ) c ON l.id=c.locid  WHERE l.id IN(24561,28422) [ RunTime:0.012001s ]
SQL: SELECT l.name,COALESCE(a.worklogCount,0) a,COALESCE(a.uCount,0) b,COALESCE(b.docCount,0) c,COALESCE(c.phoCount,0) d,COALESCE(d.audioCount,0) e FROM location l LEFT JOIN  (SELECT ud.locid locid,COUNT(DISTINCT w.id) worklogCount,COUNT(DISTINCT w.owner_id) uCount FROM work_log w,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE w.owner_id=ud.id    AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00"  GROUP BY ud.locid) a ON l.id=a.locid LEFT JOIN  (SELECT ud.locid locid,i.media_type,COUNT(i.id) docCount FROM work_log w,work_log_item i,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE w.owner_id=ud.id AND w.id=i.work_log_id   AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00"  AND i.media_type=1   GROUP BY ud.locid ) b ON l.id=b.locid LEFT JOIN  (SELECT ud.locid locid,i.media_type,COUNT(i.id) phoCount FROM work_log w,work_log_item i,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE w.owner_id=ud.id AND w.id=i.work_log_id   AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00"  AND i.media_type=2   GROUP BY ud.locid ) c ON l.id=c.locid LEFT JOIN  (SELECT ud.locid locid,i.media_type,COUNT(i.id) audioCount FROM work_log w,work_log_item i,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE w.owner_id=ud.id AND w.id=i.work_log_id   AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00"  AND i.media_type=3   GROUP BY ud.locid ) d ON l.id=d.locid   WHERE l.id IN(24561,28422) [ RunTime:0.030002s ]
SQL: SELECT l.name,COALESCE(a.photoCount,0) a,COALESCE(a.ucount,0) b,COALESCE(b.priseCount,0) c,COALESCE(c.comCount,0) d FROM location l LEFT JOIN (SELECT ud.locid locid,COUNT(i.id) photoCount,COUNT(DISTINCT ud.id) ucount FROM album m,album_item i,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)  UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE m.owner_id=ud.id AND i.album_id=m.id   AND i.create_time>="2014-08-11 00:00:00" AND i.create_time<"2014-08-12 00:00:00"  GROUP BY ud.locid) a ON l.id=a.locid LEFT JOIN  (SELECT ud.locid locid,COUNT(uc.id) priseCount FROM user_comment uc,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)  UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE ud.id=uc.creator_id AND uc.obj_type='AlbumItem'   AND uc.create_time>"2014-08-11 00:00:00" AND uc.create_time<"2014-08-12 00:00:00"   GROUP BY ud.locid ) b ON l.id=b.locid LEFT JOIN (SELECT ud.locid locid,COUNT(uc.id) comCount FROM user_comment uc,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)  UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE ud.id=uc.creator_id AND uc.obj_type='SystemComment'   AND uc.create_time>="2014-08-11 00:00:00" AND uc.create_time<"2014-08-12 00:00:00"  GROUP BY ud.locid) c ON l.id=c.locid  WHERE l.id IN(24561,28422) [ RunTime:0.016001s ]
SQL: SELECT a.rname a,l.name b,d.name c,a.age d FROM (SELECT u.id uid,u.real_name rname,u.location_id locid,u.dept_id depId,(2014-(SELECT SUBSTR(u.identify_value,7,4))+0) age FROM app_user u WHERE NOT EXISTS ( SELECT lo.user_id FROM login_log lo WHERE u.id=lo.user_id  ) AND u.id IN( SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id FROM app_user u WHERE u.location_id IN(24561,28422) )) a,location l,department d WHERE a.depId=d.id AND a.locid=l.id [ RunTime:3.591205s ]
SQL: SELECT u.id,u.real_name,COALESCE(a.worklogCount,0) worklogCount,COALESCE(b.logCount,0) logCount FROM app_user u LEFT JOIN (SELECT w.owner_id uid,COALESCE(COUNT(w.id)) worklogCount FROM work_log w WHERE w.owner_id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24561 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24561 ) AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00" GROUP BY w.owner_id) a ON u.id=a.uid LEFT JOIN (SELECT lo.user_id uid,COUNT(lo.user_id) logCount FROM login_log lo WHERE lo.user_id IN( SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24561 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24561 ) AND lo.login_time>="2014-08-11 00:00:00" AND lo.login_time<"2014-08-12 00:00:00" GROUP BY lo.user_id ) b ON u.id=b.uid WHERE u.id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24561 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24561 ) ORDER BY a.worklogCount DESC,b.logCount DESC LIMIT 10 [ RunTime:0.633036s ]
SQL: SELECT u.id,u.real_name,COALESCE(a.worklogCount,0) worklogCount,COALESCE(b.logCount,0) logCount FROM app_user u LEFT JOIN (SELECT w.owner_id uid,COALESCE(COUNT(w.id)) worklogCount FROM work_log w WHERE w.owner_id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =28422 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =28422 ) AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00" GROUP BY w.owner_id) a ON u.id=a.uid LEFT JOIN (SELECT lo.user_id uid,COUNT(lo.user_id) logCount FROM login_log lo WHERE lo.user_id IN( SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =28422 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =28422 ) AND lo.login_time>="2014-08-11 00:00:00" AND lo.login_time<"2014-08-12 00:00:00" GROUP BY lo.user_id ) b ON u.id=b.uid WHERE u.id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =28422 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24561 ) ORDER BY a.worklogCount DESC,b.logCount DESC LIMIT 10 [ RunTime:0.507029s ]
SQL: SELECT u.id,u.real_name,COALESCE(a.worklogCount,0) worklogCount,COALESCE(b.logCount,0) logCount FROM app_user u LEFT JOIN (SELECT w.owner_id uid,COALESCE(COUNT(w.id)) worklogCount FROM work_log w WHERE w.owner_id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24561 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24561 ) AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00" GROUP BY w.owner_id) a ON u.id=a.uid LEFT JOIN (SELECT lo.user_id uid,COUNT(lo.user_id) logCount FROM login_log lo WHERE lo.user_id IN( SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24561 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24561 ) AND lo.login_time>="2014-08-11 00:00:00" AND lo.login_time<"2014-08-12 00:00:00" GROUP BY lo.user_id ) b ON u.id=b.uid WHERE u.id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24561 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24561 ) ORDER BY a.worklogCount DESC,b.logCount DESC LIMIT 10 [ RunTime:0.590034s ]
SQL: SELECT u.id,u.real_name,COALESCE(a.worklogCount,0) worklogCount,COALESCE(b.logCount,0) logCount FROM app_user u LEFT JOIN (SELECT w.owner_id uid,COALESCE(COUNT(w.id)) worklogCount FROM work_log w WHERE w.owner_id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24521 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24521 ) AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00" GROUP BY w.owner_id) a ON u.id=a.uid LEFT JOIN (SELECT lo.user_id uid,COUNT(lo.user_id) logCount FROM login_log lo WHERE lo.user_id IN( SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24521 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24521 ) AND lo.login_time>="2014-08-11 00:00:00" AND lo.login_time<"2014-08-12 00:00:00" GROUP BY lo.user_id ) b ON u.id=b.uid WHERE u.id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24521 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24521 ) ORDER BY a.worklogCount DESC,b.logCount DESC LIMIT 10 [ RunTime:0.428025s ]
SQL: SELECT u.id,u.real_name,COALESCE(a.worklogCount,0) worklogCount,COALESCE(b.logCount,0) logCount FROM app_user u LEFT JOIN (SELECT w.owner_id uid,COALESCE(COUNT(w.id)) worklogCount FROM work_log w WHERE w.owner_id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24543 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24543 ) AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00" GROUP BY w.owner_id) a ON u.id=a.uid LEFT JOIN (SELECT lo.user_id uid,COUNT(lo.user_id) logCount FROM login_log lo WHERE lo.user_id IN( SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24543 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24543 ) AND lo.login_time>="2014-08-11 00:00:00" AND lo.login_time<"2014-08-12 00:00:00" GROUP BY lo.user_id ) b ON u.id=b.uid WHERE u.id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24543 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24543 ) ORDER BY a.worklogCount DESC,b.logCount DESC LIMIT 10 [ RunTime:0.389023s ]
SQL: SELECT u.id,u.real_name,COALESCE(a.worklogCount,0) worklogCount,COALESCE(b.logCount,0) logCount FROM app_user u LEFT JOIN (SELECT w.owner_id uid,COALESCE(COUNT(w.id)) worklogCount FROM work_log w WHERE w.owner_id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =28422 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =28422 ) AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00" GROUP BY w.owner_id) a ON u.id=a.uid LEFT JOIN (SELECT lo.user_id uid,COUNT(lo.user_id) logCount FROM login_log lo WHERE lo.user_id IN( SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =28422 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =28422 ) AND lo.login_time>="2014-08-11 00:00:00" AND lo.login_time<"2014-08-12 00:00:00" GROUP BY lo.user_id ) b ON u.id=b.uid WHERE u.id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =28422 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =28422 ) ORDER BY a.worklogCount DESC,b.logCount DESC LIMIT 10 [ RunTime:0.400023s ]
SQL: SELECT l.name,COALESCE(a.ulcount,0) b FROM  location l LEFT JOIN (SELECT ud.locid locid,COUNT(DISTINCT ud.id) ulcount,COUNT(ud.id) logCount FROM login_log lo,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE lo.user_id=ud.id   AND lo.login_time>="2014-08-11 00:00:00"   GROUP BY ud.locid) a ON a.locid=l.id WHERE l.id IN (24561,28422) [ RunTime:0.027002s ]
SQL: 
				CALL count_worklog_all("2014-08-11 00:00:00","2014-08-12 00:00:00",("24561,28422"))
				 [ RunTime:0.021002s ]
INFO: [ view_parse ] --START--
NOTIC: [8] Array to string conversion D:\Dropbox-List\Net\Dropbox\WebDev\xampp\htdocs\php_demo\shizhan\10\10wish\APP\Runtime\Cache\Njb\4c43491aeece36133122026e69b0ba99.php 第 118 行.
NOTIC: [8] Array to string conversion D:\Dropbox-List\Net\Dropbox\WebDev\xampp\htdocs\php_demo\shizhan\10\10wish\APP\Runtime\Cache\Njb\4c43491aeece36133122026e69b0ba99.php 第 118 行.
INFO: ParseTemplate Behavior ::run [ RunTime:0.568033s ]
INFO: [ view_parse ] --END-- [ RunTime:0.573033s ]
INFO: [ view_filter ] --START--
INFO: ContentReplace Behavior ::run [ RunTime:0.006001s ]
INFO: TokenBuild Behavior ::run [ RunTime:0.011000s ]
INFO: WriteHtmlCache Behavior ::run [ RunTime:0.006000s ]
INFO: ShowRuntime Behavior ::run [ RunTime:0.013001s ]
INFO: [ view_filter ] --END-- [ RunTime:0.052003s ]
NOTIC: [2] Cannot modify header information - headers already sent by (output started at D:\Dropbox-List\Net\Dropbox\WebDev\xampp\htdocs\php_demo\shizhan\10\10wish\APP\Lib\Action\Njb\IndexAction.class.php:91) D:\Dropbox-List\Net\Dropbox\WebDev\xampp\htdocs\php_demo\shizhan\10\10wish\ThinkPHP\Lib\Core\View.class.php 第 95 行.
NOTIC: [2] Cannot modify header information - headers already sent by (output started at D:\Dropbox-List\Net\Dropbox\WebDev\xampp\htdocs\php_demo\shizhan\10\10wish\APP\Lib\Action\Njb\IndexAction.class.php:91) D:\Dropbox-List\Net\Dropbox\WebDev\xampp\htdocs\php_demo\shizhan\10\10wish\ThinkPHP\Lib\Core\View.class.php 第 96 行.
NOTIC: [2] Cannot modify header information - headers already sent by (output started at D:\Dropbox-List\Net\Dropbox\WebDev\xampp\htdocs\php_demo\shizhan\10\10wish\APP\Lib\Action\Njb\IndexAction.class.php:91) D:\Dropbox-List\Net\Dropbox\WebDev\xampp\htdocs\php_demo\shizhan\10\10wish\ThinkPHP\Lib\Core\View.class.php 第 97 行.
INFO: [ view_end ] --START--
INFO: ShowPageTrace Behavior ::run [ RunTime:0.011001s ]
INFO: [ view_end ] --END-- [ RunTime:0.019001s ]

[ 2014-08-12T10:18:57+08:00 ] 127.0.0.1 /php_demo/shizhan/10/10wish/index.php/Njb/Index/tongji?checkbox%5B%5D=24561&checkbox%5B%5D=28422&date_begin=2014-08-11&date_end=2014-08-12
INFO: [ route_check ] --START--
INFO: CheckRoute Behavior ::run [ RunTime:0.016001s ]
INFO: [ route_check ] --END-- [ RunTime:0.026002s ]
INFO: [ app_begin ] --START--
INFO: ReadHtmlCache Behavior ::run [ RunTime:0.030002s ]
INFO: [ app_begin ] --END-- [ RunTime:0.040002s ]
SQL: SELECT l.name,COALESCE(a.ucount,0) as yhs,COALESCE(c.ulcount,0) as dlyhs,COALESCE(c.logCount,0) as dlcs FROM location l LEFT JOIN (SELECT ud.locid locid,COUNT(ud.id) ucount FROM   (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)    UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud     GROUP BY ud.locid  ) a ON l.id=a.locid  LEFT JOIN (SELECT ud.locid locid,COUNT(DISTINCT ud.id) ulcount,COUNT(ud.id) logCount FROM login_log lo,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE lo.user_id=ud.id   AND lo.login_time>="2014-08-11 00:00:00" AND lo.login_time<"2014-08-12 00:00:00"   GROUP BY ud.locid) c ON l.id=c.locid WHERE l.id IN(24561,28422) [ RunTime:0.075005s ]
SQL: SELECT l.name,COALESCE(a.noticeCount,0) noticeCount,COALESCE(a.userCount,0) userCount FROM location l LEFT JOIN  (SELECT ud.locid locid,COUNT(n.id) noticeCount,COUNT(DISTINCT ud.id) userCount FROM notice n,   (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)    UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud   WHERE n.owner_id=ud.id AND n.publish_time>="2014-08-11 00:00:00"    AND n.publish_time<"2014-08-12 00:00:00" GROUP BY ud.locid) a  ON l.id=a.locid WHERE l.id IN(24561,28422) [ RunTime:0.009001s ]
SQL: SELECT l.name,COALESCE(a.asCount,0) a,COALESCE(b.adminCount,0) b,COALESCE(c.noAdminCount,0) c FROM location l LEFT JOIN  (SELECT ud.locid locid,COUNT(t.id) asCount FROM assignment t,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE t.creator_id=ud.id AND t.create_time>="2014-08-11 00:00:00" AND  t.create_time<"2014-08-12 00:00:00"  GROUP BY ud.locid) a ON l.id=a.locid  LEFT JOIN (SELECT ud.locid locid,COUNT(DISTINCT ud.id) adminCount FROM assignment t,app_user_role r,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud   WHERE t.creator_id=ud.id AND ud.id=r.user_id AND r.role='TechAdmin'   AND t.create_time>="2014-08-11 00:00:00" AND  t.create_time<"2014-08-12 00:00:00"  GROUP BY ud.locid ) b ON l.id=b.locid LEFT JOIN (SELECT ud.locid locid,COUNT(DISTINCT ud.id) noAdminCount FROM assignment t,app_user_role r,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE t.creator_id=ud.id AND ud.id=r.user_id AND r.role='Technician'   AND t.create_time>="2014-08-11 00:00:00" AND  t.create_time<"2014-08-12 00:00:00"  GROUP BY ud.locid ) c ON l.id=c.locid  WHERE l.id IN(24561,28422) [ RunTime:0.016001s ]
SQL: SELECT l.name,COALESCE(a.worklogCount,0) a,COALESCE(a.uCount,0) b,COALESCE(b.docCount,0) c,COALESCE(c.phoCount,0) d,COALESCE(d.audioCount,0) e FROM location l LEFT JOIN  (SELECT ud.locid locid,COUNT(DISTINCT w.id) worklogCount,COUNT(DISTINCT w.owner_id) uCount FROM work_log w,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE w.owner_id=ud.id    AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00"  GROUP BY ud.locid) a ON l.id=a.locid LEFT JOIN  (SELECT ud.locid locid,i.media_type,COUNT(i.id) docCount FROM work_log w,work_log_item i,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE w.owner_id=ud.id AND w.id=i.work_log_id   AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00"  AND i.media_type=1   GROUP BY ud.locid ) b ON l.id=b.locid LEFT JOIN  (SELECT ud.locid locid,i.media_type,COUNT(i.id) phoCount FROM work_log w,work_log_item i,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE w.owner_id=ud.id AND w.id=i.work_log_id   AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00"  AND i.media_type=2   GROUP BY ud.locid ) c ON l.id=c.locid LEFT JOIN  (SELECT ud.locid locid,i.media_type,COUNT(i.id) audioCount FROM work_log w,work_log_item i,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE w.owner_id=ud.id AND w.id=i.work_log_id   AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00"  AND i.media_type=3   GROUP BY ud.locid ) d ON l.id=d.locid   WHERE l.id IN(24561,28422) [ RunTime:0.038002s ]
SQL: SELECT l.name,COALESCE(a.photoCount,0) a,COALESCE(a.ucount,0) b,COALESCE(b.priseCount,0) c,COALESCE(c.comCount,0) d FROM location l LEFT JOIN (SELECT ud.locid locid,COUNT(i.id) photoCount,COUNT(DISTINCT ud.id) ucount FROM album m,album_item i,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)  UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE m.owner_id=ud.id AND i.album_id=m.id   AND i.create_time>="2014-08-11 00:00:00" AND i.create_time<"2014-08-12 00:00:00"  GROUP BY ud.locid) a ON l.id=a.locid LEFT JOIN  (SELECT ud.locid locid,COUNT(uc.id) priseCount FROM user_comment uc,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)  UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE ud.id=uc.creator_id AND uc.obj_type='AlbumItem'   AND uc.create_time>"2014-08-11 00:00:00" AND uc.create_time<"2014-08-12 00:00:00"   GROUP BY ud.locid ) b ON l.id=b.locid LEFT JOIN (SELECT ud.locid locid,COUNT(uc.id) comCount FROM user_comment uc,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)  UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE ud.id=uc.creator_id AND uc.obj_type='SystemComment'   AND uc.create_time>="2014-08-11 00:00:00" AND uc.create_time<"2014-08-12 00:00:00"  GROUP BY ud.locid) c ON l.id=c.locid  WHERE l.id IN(24561,28422) [ RunTime:0.023001s ]
SQL: SELECT a.rname a,l.name b,d.name c,a.age d FROM (SELECT u.id uid,u.real_name rname,u.location_id locid,u.dept_id depId,(2014-(SELECT SUBSTR(u.identify_value,7,4))+0) age FROM app_user u WHERE NOT EXISTS ( SELECT lo.user_id FROM login_log lo WHERE u.id=lo.user_id  ) AND u.id IN( SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id FROM app_user u WHERE u.location_id IN(24561,28422) )) a,location l,department d WHERE a.depId=d.id AND a.locid=l.id [ RunTime:4.231242s ]
SQL: SELECT u.id,u.real_name,COALESCE(a.worklogCount,0) worklogCount,COALESCE(b.logCount,0) logCount FROM app_user u LEFT JOIN (SELECT w.owner_id uid,COALESCE(COUNT(w.id)) worklogCount FROM work_log w WHERE w.owner_id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24561 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24561 ) AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00" GROUP BY w.owner_id) a ON u.id=a.uid LEFT JOIN (SELECT lo.user_id uid,COUNT(lo.user_id) logCount FROM login_log lo WHERE lo.user_id IN( SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24561 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24561 ) AND lo.login_time>="2014-08-11 00:00:00" AND lo.login_time<"2014-08-12 00:00:00" GROUP BY lo.user_id ) b ON u.id=b.uid WHERE u.id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24561 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24561 ) ORDER BY a.worklogCount DESC,b.logCount DESC LIMIT 10 [ RunTime:0.667038s ]
SQL: SELECT u.id,u.real_name,COALESCE(a.worklogCount,0) worklogCount,COALESCE(b.logCount,0) logCount FROM app_user u LEFT JOIN (SELECT w.owner_id uid,COALESCE(COUNT(w.id)) worklogCount FROM work_log w WHERE w.owner_id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =28422 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =28422 ) AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00" GROUP BY w.owner_id) a ON u.id=a.uid LEFT JOIN (SELECT lo.user_id uid,COUNT(lo.user_id) logCount FROM login_log lo WHERE lo.user_id IN( SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =28422 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =28422 ) AND lo.login_time>="2014-08-11 00:00:00" AND lo.login_time<"2014-08-12 00:00:00" GROUP BY lo.user_id ) b ON u.id=b.uid WHERE u.id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =28422 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24561 ) ORDER BY a.worklogCount DESC,b.logCount DESC LIMIT 10 [ RunTime:0.721042s ]
SQL: SELECT u.id,u.real_name,COALESCE(a.worklogCount,0) worklogCount,COALESCE(b.logCount,0) logCount FROM app_user u LEFT JOIN (SELECT w.owner_id uid,COALESCE(COUNT(w.id)) worklogCount FROM work_log w WHERE w.owner_id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24561 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24561 ) AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00" GROUP BY w.owner_id) a ON u.id=a.uid LEFT JOIN (SELECT lo.user_id uid,COUNT(lo.user_id) logCount FROM login_log lo WHERE lo.user_id IN( SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24561 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24561 ) AND lo.login_time>="2014-08-11 00:00:00" AND lo.login_time<"2014-08-12 00:00:00" GROUP BY lo.user_id ) b ON u.id=b.uid WHERE u.id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24561 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24561 ) ORDER BY a.worklogCount DESC,b.logCount DESC LIMIT 10 [ RunTime:0.922053s ]
SQL: SELECT u.id,u.real_name,COALESCE(a.worklogCount,0) worklogCount,COALESCE(b.logCount,0) logCount FROM app_user u LEFT JOIN (SELECT w.owner_id uid,COALESCE(COUNT(w.id)) worklogCount FROM work_log w WHERE w.owner_id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24521 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24521 ) AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00" GROUP BY w.owner_id) a ON u.id=a.uid LEFT JOIN (SELECT lo.user_id uid,COUNT(lo.user_id) logCount FROM login_log lo WHERE lo.user_id IN( SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24521 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24521 ) AND lo.login_time>="2014-08-11 00:00:00" AND lo.login_time<"2014-08-12 00:00:00" GROUP BY lo.user_id ) b ON u.id=b.uid WHERE u.id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24521 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24521 ) ORDER BY a.worklogCount DESC,b.logCount DESC LIMIT 10 [ RunTime:0.555031s ]
SQL: SELECT u.id,u.real_name,COALESCE(a.worklogCount,0) worklogCount,COALESCE(b.logCount,0) logCount FROM app_user u LEFT JOIN (SELECT w.owner_id uid,COALESCE(COUNT(w.id)) worklogCount FROM work_log w WHERE w.owner_id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24543 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24543 ) AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00" GROUP BY w.owner_id) a ON u.id=a.uid LEFT JOIN (SELECT lo.user_id uid,COUNT(lo.user_id) logCount FROM login_log lo WHERE lo.user_id IN( SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24543 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24543 ) AND lo.login_time>="2014-08-11 00:00:00" AND lo.login_time<"2014-08-12 00:00:00" GROUP BY lo.user_id ) b ON u.id=b.uid WHERE u.id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24543 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24543 ) ORDER BY a.worklogCount DESC,b.logCount DESC LIMIT 10 [ RunTime:0.539031s ]
SQL: SELECT u.id,u.real_name,COALESCE(a.worklogCount,0) worklogCount,COALESCE(b.logCount,0) logCount FROM app_user u LEFT JOIN (SELECT w.owner_id uid,COALESCE(COUNT(w.id)) worklogCount FROM work_log w WHERE w.owner_id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =28422 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =28422 ) AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00" GROUP BY w.owner_id) a ON u.id=a.uid LEFT JOIN (SELECT lo.user_id uid,COUNT(lo.user_id) logCount FROM login_log lo WHERE lo.user_id IN( SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =28422 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =28422 ) AND lo.login_time>="2014-08-11 00:00:00" AND lo.login_time<"2014-08-12 00:00:00" GROUP BY lo.user_id ) b ON u.id=b.uid WHERE u.id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =28422 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =28422 ) ORDER BY a.worklogCount DESC,b.logCount DESC LIMIT 10 [ RunTime:0.584033s ]
SQL: SELECT l.name,COALESCE(a.ulcount,0) b FROM  location l LEFT JOIN (SELECT ud.locid locid,COUNT(DISTINCT ud.id) ulcount,COUNT(ud.id) logCount FROM login_log lo,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE lo.user_id=ud.id   AND lo.login_time>="2014-08-11 00:00:00"   GROUP BY ud.locid) a ON a.locid=l.id WHERE l.id IN (24561,28422) [ RunTime:0.040002s ]
SQL: 
				CALL count_worklog_all("2014-08-11 00:00:00","2014-08-12 00:00:00",("24561,28422"))
				 [ RunTime:0.029001s ]
INFO: [ view_parse ] --START--
INFO: ParseTemplate Behavior ::run [ RunTime:0.910052s ]
INFO: [ view_parse ] --END-- [ RunTime:0.918053s ]
INFO: [ view_filter ] --START--
INFO: ContentReplace Behavior ::run [ RunTime:0.008001s ]
INFO: TokenBuild Behavior ::run [ RunTime:0.010000s ]
INFO: WriteHtmlCache Behavior ::run [ RunTime:0.005000s ]
INFO: ShowRuntime Behavior ::run [ RunTime:0.014001s ]
INFO: [ view_filter ] --END-- [ RunTime:0.056003s ]
NOTIC: [2] Cannot modify header information - headers already sent by (output started at D:\Dropbox-List\Net\Dropbox\WebDev\xampp\htdocs\php_demo\shizhan\10\10wish\APP\Lib\Action\Njb\IndexAction.class.php:91) D:\Dropbox-List\Net\Dropbox\WebDev\xampp\htdocs\php_demo\shizhan\10\10wish\ThinkPHP\Lib\Core\View.class.php 第 95 行.
NOTIC: [2] Cannot modify header information - headers already sent by (output started at D:\Dropbox-List\Net\Dropbox\WebDev\xampp\htdocs\php_demo\shizhan\10\10wish\APP\Lib\Action\Njb\IndexAction.class.php:91) D:\Dropbox-List\Net\Dropbox\WebDev\xampp\htdocs\php_demo\shizhan\10\10wish\ThinkPHP\Lib\Core\View.class.php 第 96 行.
NOTIC: [2] Cannot modify header information - headers already sent by (output started at D:\Dropbox-List\Net\Dropbox\WebDev\xampp\htdocs\php_demo\shizhan\10\10wish\APP\Lib\Action\Njb\IndexAction.class.php:91) D:\Dropbox-List\Net\Dropbox\WebDev\xampp\htdocs\php_demo\shizhan\10\10wish\ThinkPHP\Lib\Core\View.class.php 第 97 行.
INFO: [ view_end ] --START--
INFO: ShowPageTrace Behavior ::run [ RunTime:0.015001s ]
INFO: [ view_end ] --END-- [ RunTime:0.023001s ]

[ 2014-08-12T10:19:53+08:00 ] 127.0.0.1 /php_demo/shizhan/10/10wish/index.php/Njb/Index/tongji?checkbox%5B%5D=24561&checkbox%5B%5D=28422&date_begin=2014-08-11&date_end=2014-08-12
INFO: [ route_check ] --START--
INFO: CheckRoute Behavior ::run [ RunTime:0.022001s ]
INFO: [ route_check ] --END-- [ RunTime:0.036002s ]
INFO: [ app_begin ] --START--
INFO: ReadHtmlCache Behavior ::run [ RunTime:0.025001s ]
INFO: [ app_begin ] --END-- [ RunTime:0.035002s ]
SQL: SELECT l.name,COALESCE(a.ucount,0) as yhs,COALESCE(c.ulcount,0) as dlyhs,COALESCE(c.logCount,0) as dlcs FROM location l LEFT JOIN (SELECT ud.locid locid,COUNT(ud.id) ucount FROM   (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)    UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud     GROUP BY ud.locid  ) a ON l.id=a.locid  LEFT JOIN (SELECT ud.locid locid,COUNT(DISTINCT ud.id) ulcount,COUNT(ud.id) logCount FROM login_log lo,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE lo.user_id=ud.id   AND lo.login_time>="2014-08-11 00:00:00" AND lo.login_time<"2014-08-12 00:00:00"   GROUP BY ud.locid) c ON l.id=c.locid WHERE l.id IN(24561,28422) [ RunTime:0.076004s ]
SQL: SELECT l.name,COALESCE(a.noticeCount,0) noticeCount,COALESCE(a.userCount,0) userCount FROM location l LEFT JOIN  (SELECT ud.locid locid,COUNT(n.id) noticeCount,COUNT(DISTINCT ud.id) userCount FROM notice n,   (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)    UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud   WHERE n.owner_id=ud.id AND n.publish_time>="2014-08-11 00:00:00"    AND n.publish_time<"2014-08-12 00:00:00" GROUP BY ud.locid) a  ON l.id=a.locid WHERE l.id IN(24561,28422) [ RunTime:0.008001s ]
SQL: SELECT l.name,COALESCE(a.asCount,0) a,COALESCE(b.adminCount,0) b,COALESCE(c.noAdminCount,0) c FROM location l LEFT JOIN  (SELECT ud.locid locid,COUNT(t.id) asCount FROM assignment t,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE t.creator_id=ud.id AND t.create_time>="2014-08-11 00:00:00" AND  t.create_time<"2014-08-12 00:00:00"  GROUP BY ud.locid) a ON l.id=a.locid  LEFT JOIN (SELECT ud.locid locid,COUNT(DISTINCT ud.id) adminCount FROM assignment t,app_user_role r,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud   WHERE t.creator_id=ud.id AND ud.id=r.user_id AND r.role='TechAdmin'   AND t.create_time>="2014-08-11 00:00:00" AND  t.create_time<"2014-08-12 00:00:00"  GROUP BY ud.locid ) b ON l.id=b.locid LEFT JOIN (SELECT ud.locid locid,COUNT(DISTINCT ud.id) noAdminCount FROM assignment t,app_user_role r,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE t.creator_id=ud.id AND ud.id=r.user_id AND r.role='Technician'   AND t.create_time>="2014-08-11 00:00:00" AND  t.create_time<"2014-08-12 00:00:00"  GROUP BY ud.locid ) c ON l.id=c.locid  WHERE l.id IN(24561,28422) [ RunTime:0.013001s ]
SQL: SELECT l.name,COALESCE(a.worklogCount,0) a,COALESCE(a.uCount,0) b,COALESCE(b.docCount,0) c,COALESCE(c.phoCount,0) d,COALESCE(d.audioCount,0) e FROM location l LEFT JOIN  (SELECT ud.locid locid,COUNT(DISTINCT w.id) worklogCount,COUNT(DISTINCT w.owner_id) uCount FROM work_log w,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE w.owner_id=ud.id    AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00"  GROUP BY ud.locid) a ON l.id=a.locid LEFT JOIN  (SELECT ud.locid locid,i.media_type,COUNT(i.id) docCount FROM work_log w,work_log_item i,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE w.owner_id=ud.id AND w.id=i.work_log_id   AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00"  AND i.media_type=1   GROUP BY ud.locid ) b ON l.id=b.locid LEFT JOIN  (SELECT ud.locid locid,i.media_type,COUNT(i.id) phoCount FROM work_log w,work_log_item i,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE w.owner_id=ud.id AND w.id=i.work_log_id   AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00"  AND i.media_type=2   GROUP BY ud.locid ) c ON l.id=c.locid LEFT JOIN  (SELECT ud.locid locid,i.media_type,COUNT(i.id) audioCount FROM work_log w,work_log_item i,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE w.owner_id=ud.id AND w.id=i.work_log_id   AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00"  AND i.media_type=3   GROUP BY ud.locid ) d ON l.id=d.locid   WHERE l.id IN(24561,28422) [ RunTime:0.038002s ]
SQL: SELECT l.name,COALESCE(a.photoCount,0) a,COALESCE(a.ucount,0) b,COALESCE(b.priseCount,0) c,COALESCE(c.comCount,0) d FROM location l LEFT JOIN (SELECT ud.locid locid,COUNT(i.id) photoCount,COUNT(DISTINCT ud.id) ucount FROM album m,album_item i,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)  UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE m.owner_id=ud.id AND i.album_id=m.id   AND i.create_time>="2014-08-11 00:00:00" AND i.create_time<"2014-08-12 00:00:00"  GROUP BY ud.locid) a ON l.id=a.locid LEFT JOIN  (SELECT ud.locid locid,COUNT(uc.id) priseCount FROM user_comment uc,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)  UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE ud.id=uc.creator_id AND uc.obj_type='AlbumItem'   AND uc.create_time>"2014-08-11 00:00:00" AND uc.create_time<"2014-08-12 00:00:00"   GROUP BY ud.locid ) b ON l.id=b.locid LEFT JOIN (SELECT ud.locid locid,COUNT(uc.id) comCount FROM user_comment uc,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)  UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE ud.id=uc.creator_id AND uc.obj_type='SystemComment'   AND uc.create_time>="2014-08-11 00:00:00" AND uc.create_time<"2014-08-12 00:00:00"  GROUP BY ud.locid) c ON l.id=c.locid  WHERE l.id IN(24561,28422) [ RunTime:0.018001s ]
SQL: SELECT a.rname a,l.name b,d.name c,a.age d FROM (SELECT u.id uid,u.real_name rname,u.location_id locid,u.dept_id depId,(2014-(SELECT SUBSTR(u.identify_value,7,4))+0) age FROM app_user u WHERE NOT EXISTS ( SELECT lo.user_id FROM login_log lo WHERE u.id=lo.user_id  ) AND u.id IN( SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id FROM app_user u WHERE u.location_id IN(24561,28422) )) a,location l,department d WHERE a.depId=d.id AND a.locid=l.id [ RunTime:4.202241s ]
SQL: SELECT u.id,u.real_name,COALESCE(a.worklogCount,0) worklogCount,COALESCE(b.logCount,0) logCount FROM app_user u LEFT JOIN (SELECT w.owner_id uid,COALESCE(COUNT(w.id)) worklogCount FROM work_log w WHERE w.owner_id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24561 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24561 ) AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00" GROUP BY w.owner_id) a ON u.id=a.uid LEFT JOIN (SELECT lo.user_id uid,COUNT(lo.user_id) logCount FROM login_log lo WHERE lo.user_id IN( SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24561 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24561 ) AND lo.login_time>="2014-08-11 00:00:00" AND lo.login_time<"2014-08-12 00:00:00" GROUP BY lo.user_id ) b ON u.id=b.uid WHERE u.id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24561 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24561 ) ORDER BY a.worklogCount DESC,b.logCount DESC LIMIT 10 [ RunTime:0.589033s ]
SQL: SELECT u.id,u.real_name,COALESCE(a.worklogCount,0) worklogCount,COALESCE(b.logCount,0) logCount FROM app_user u LEFT JOIN (SELECT w.owner_id uid,COALESCE(COUNT(w.id)) worklogCount FROM work_log w WHERE w.owner_id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =28422 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =28422 ) AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00" GROUP BY w.owner_id) a ON u.id=a.uid LEFT JOIN (SELECT lo.user_id uid,COUNT(lo.user_id) logCount FROM login_log lo WHERE lo.user_id IN( SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =28422 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =28422 ) AND lo.login_time>="2014-08-11 00:00:00" AND lo.login_time<"2014-08-12 00:00:00" GROUP BY lo.user_id ) b ON u.id=b.uid WHERE u.id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =28422 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24561 ) ORDER BY a.worklogCount DESC,b.logCount DESC LIMIT 10 [ RunTime:0.569033s ]
SQL: SELECT u.id,u.real_name,COALESCE(a.worklogCount,0) worklogCount,COALESCE(b.logCount,0) logCount FROM app_user u LEFT JOIN (SELECT w.owner_id uid,COALESCE(COUNT(w.id)) worklogCount FROM work_log w WHERE w.owner_id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24561 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24561 ) AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00" GROUP BY w.owner_id) a ON u.id=a.uid LEFT JOIN (SELECT lo.user_id uid,COUNT(lo.user_id) logCount FROM login_log lo WHERE lo.user_id IN( SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24561 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24561 ) AND lo.login_time>="2014-08-11 00:00:00" AND lo.login_time<"2014-08-12 00:00:00" GROUP BY lo.user_id ) b ON u.id=b.uid WHERE u.id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24561 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24561 ) ORDER BY a.worklogCount DESC,b.logCount DESC LIMIT 10 [ RunTime:0.670039s ]
SQL: SELECT u.id,u.real_name,COALESCE(a.worklogCount,0) worklogCount,COALESCE(b.logCount,0) logCount FROM app_user u LEFT JOIN (SELECT w.owner_id uid,COALESCE(COUNT(w.id)) worklogCount FROM work_log w WHERE w.owner_id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24521 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24521 ) AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00" GROUP BY w.owner_id) a ON u.id=a.uid LEFT JOIN (SELECT lo.user_id uid,COUNT(lo.user_id) logCount FROM login_log lo WHERE lo.user_id IN( SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24521 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24521 ) AND lo.login_time>="2014-08-11 00:00:00" AND lo.login_time<"2014-08-12 00:00:00" GROUP BY lo.user_id ) b ON u.id=b.uid WHERE u.id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24521 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24521 ) ORDER BY a.worklogCount DESC,b.logCount DESC LIMIT 10 [ RunTime:0.544031s ]
SQL: SELECT u.id,u.real_name,COALESCE(a.worklogCount,0) worklogCount,COALESCE(b.logCount,0) logCount FROM app_user u LEFT JOIN (SELECT w.owner_id uid,COALESCE(COUNT(w.id)) worklogCount FROM work_log w WHERE w.owner_id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24543 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24543 ) AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00" GROUP BY w.owner_id) a ON u.id=a.uid LEFT JOIN (SELECT lo.user_id uid,COUNT(lo.user_id) logCount FROM login_log lo WHERE lo.user_id IN( SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24543 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24543 ) AND lo.login_time>="2014-08-11 00:00:00" AND lo.login_time<"2014-08-12 00:00:00" GROUP BY lo.user_id ) b ON u.id=b.uid WHERE u.id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24543 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24543 ) ORDER BY a.worklogCount DESC,b.logCount DESC LIMIT 10 [ RunTime:0.475027s ]
SQL: SELECT u.id,u.real_name,COALESCE(a.worklogCount,0) worklogCount,COALESCE(b.logCount,0) logCount FROM app_user u LEFT JOIN (SELECT w.owner_id uid,COALESCE(COUNT(w.id)) worklogCount FROM work_log w WHERE w.owner_id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =28422 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =28422 ) AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00" GROUP BY w.owner_id) a ON u.id=a.uid LEFT JOIN (SELECT lo.user_id uid,COUNT(lo.user_id) logCount FROM login_log lo WHERE lo.user_id IN( SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =28422 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =28422 ) AND lo.login_time>="2014-08-11 00:00:00" AND lo.login_time<"2014-08-12 00:00:00" GROUP BY lo.user_id ) b ON u.id=b.uid WHERE u.id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =28422 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =28422 ) ORDER BY a.worklogCount DESC,b.logCount DESC LIMIT 10 [ RunTime:0.420024s ]
SQL: SELECT l.name,COALESCE(a.ulcount,0) b FROM  location l LEFT JOIN (SELECT ud.locid locid,COUNT(DISTINCT ud.id) ulcount,COUNT(ud.id) logCount FROM login_log lo,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE lo.user_id=ud.id   AND lo.login_time>="2014-08-11 00:00:00"   GROUP BY ud.locid) a ON a.locid=l.id WHERE l.id IN (24561,28422) [ RunTime:0.028002s ]
SQL: 
				CALL count_worklog_all("2014-08-11 00:00:00","2014-08-12 00:00:00",("24561,28422"))
				 [ RunTime:0.023002s ]
INFO: [ view_parse ] --START--
INFO: ParseTemplate Behavior ::run [ RunTime:0.612035s ]
INFO: [ view_parse ] --END-- [ RunTime:0.618036s ]
INFO: [ view_filter ] --START--
INFO: ContentReplace Behavior ::run [ RunTime:0.012001s ]
INFO: TokenBuild Behavior ::run [ RunTime:0.008000s ]
INFO: WriteHtmlCache Behavior ::run [ RunTime:0.004001s ]
INFO: ShowRuntime Behavior ::run [ RunTime:0.011000s ]
INFO: [ view_filter ] --END-- [ RunTime:0.048003s ]
NOTIC: [2] Cannot modify header information - headers already sent by (output started at D:\Dropbox-List\Net\Dropbox\WebDev\xampp\htdocs\php_demo\shizhan\10\10wish\APP\Lib\Action\Njb\IndexAction.class.php:91) D:\Dropbox-List\Net\Dropbox\WebDev\xampp\htdocs\php_demo\shizhan\10\10wish\ThinkPHP\Lib\Core\View.class.php 第 95 行.
NOTIC: [2] Cannot modify header information - headers already sent by (output started at D:\Dropbox-List\Net\Dropbox\WebDev\xampp\htdocs\php_demo\shizhan\10\10wish\APP\Lib\Action\Njb\IndexAction.class.php:91) D:\Dropbox-List\Net\Dropbox\WebDev\xampp\htdocs\php_demo\shizhan\10\10wish\ThinkPHP\Lib\Core\View.class.php 第 96 行.
NOTIC: [2] Cannot modify header information - headers already sent by (output started at D:\Dropbox-List\Net\Dropbox\WebDev\xampp\htdocs\php_demo\shizhan\10\10wish\APP\Lib\Action\Njb\IndexAction.class.php:91) D:\Dropbox-List\Net\Dropbox\WebDev\xampp\htdocs\php_demo\shizhan\10\10wish\ThinkPHP\Lib\Core\View.class.php 第 97 行.
INFO: [ view_end ] --START--
INFO: ShowPageTrace Behavior ::run [ RunTime:0.015001s ]
INFO: [ view_end ] --END-- [ RunTime:0.020001s ]

[ 2014-08-12T10:24:11+08:00 ] 127.0.0.1 /php_demo/shizhan/10/10wish/index.php/Njb/Index/tongji?checkbox%5B%5D=24561&checkbox%5B%5D=28422&date_begin=2014-08-11&date_end=2014-08-12
INFO: [ route_check ] --START--
INFO: CheckRoute Behavior ::run [ RunTime:0.017001s ]
INFO: [ route_check ] --END-- [ RunTime:0.032001s ]
INFO: [ app_begin ] --START--
INFO: ReadHtmlCache Behavior ::run [ RunTime:0.024002s ]
INFO: [ app_begin ] --END-- [ RunTime:0.036002s ]
SQL: SELECT l.name,COALESCE(a.ucount,0) as yhs,COALESCE(c.ulcount,0) as dlyhs,COALESCE(c.logCount,0) as dlcs FROM location l LEFT JOIN (SELECT ud.locid locid,COUNT(ud.id) ucount FROM   (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)    UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud     GROUP BY ud.locid  ) a ON l.id=a.locid  LEFT JOIN (SELECT ud.locid locid,COUNT(DISTINCT ud.id) ulcount,COUNT(ud.id) logCount FROM login_log lo,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE lo.user_id=ud.id   AND lo.login_time>="2014-08-11 00:00:00" AND lo.login_time<"2014-08-12 00:00:00"   GROUP BY ud.locid) c ON l.id=c.locid WHERE l.id IN(24561,28422) [ RunTime:0.063003s ]
SQL: SELECT l.name,COALESCE(a.noticeCount,0) noticeCount,COALESCE(a.userCount,0) userCount FROM location l LEFT JOIN  (SELECT ud.locid locid,COUNT(n.id) noticeCount,COUNT(DISTINCT ud.id) userCount FROM notice n,   (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)    UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud   WHERE n.owner_id=ud.id AND n.publish_time>="2014-08-11 00:00:00"    AND n.publish_time<"2014-08-12 00:00:00" GROUP BY ud.locid) a  ON l.id=a.locid WHERE l.id IN(24561,28422) [ RunTime:0.006001s ]
SQL: SELECT l.name,COALESCE(a.asCount,0) a,COALESCE(b.adminCount,0) b,COALESCE(c.noAdminCount,0) c FROM location l LEFT JOIN  (SELECT ud.locid locid,COUNT(t.id) asCount FROM assignment t,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE t.creator_id=ud.id AND t.create_time>="2014-08-11 00:00:00" AND  t.create_time<"2014-08-12 00:00:00"  GROUP BY ud.locid) a ON l.id=a.locid  LEFT JOIN (SELECT ud.locid locid,COUNT(DISTINCT ud.id) adminCount FROM assignment t,app_user_role r,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud   WHERE t.creator_id=ud.id AND ud.id=r.user_id AND r.role='TechAdmin'   AND t.create_time>="2014-08-11 00:00:00" AND  t.create_time<"2014-08-12 00:00:00"  GROUP BY ud.locid ) b ON l.id=b.locid LEFT JOIN (SELECT ud.locid locid,COUNT(DISTINCT ud.id) noAdminCount FROM assignment t,app_user_role r,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE t.creator_id=ud.id AND ud.id=r.user_id AND r.role='Technician'   AND t.create_time>="2014-08-11 00:00:00" AND  t.create_time<"2014-08-12 00:00:00"  GROUP BY ud.locid ) c ON l.id=c.locid  WHERE l.id IN(24561,28422) [ RunTime:0.015001s ]
SQL: SELECT l.name,COALESCE(a.worklogCount,0) a,COALESCE(a.uCount,0) b,COALESCE(b.docCount,0) c,COALESCE(c.phoCount,0) d,COALESCE(d.audioCount,0) e FROM location l LEFT JOIN  (SELECT ud.locid locid,COUNT(DISTINCT w.id) worklogCount,COUNT(DISTINCT w.owner_id) uCount FROM work_log w,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE w.owner_id=ud.id    AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00"  GROUP BY ud.locid) a ON l.id=a.locid LEFT JOIN  (SELECT ud.locid locid,i.media_type,COUNT(i.id) docCount FROM work_log w,work_log_item i,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE w.owner_id=ud.id AND w.id=i.work_log_id   AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00"  AND i.media_type=1   GROUP BY ud.locid ) b ON l.id=b.locid LEFT JOIN  (SELECT ud.locid locid,i.media_type,COUNT(i.id) phoCount FROM work_log w,work_log_item i,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE w.owner_id=ud.id AND w.id=i.work_log_id   AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00"  AND i.media_type=2   GROUP BY ud.locid ) c ON l.id=c.locid LEFT JOIN  (SELECT ud.locid locid,i.media_type,COUNT(i.id) audioCount FROM work_log w,work_log_item i,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE w.owner_id=ud.id AND w.id=i.work_log_id   AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00"  AND i.media_type=3   GROUP BY ud.locid ) d ON l.id=d.locid   WHERE l.id IN(24561,28422) [ RunTime:0.035002s ]
SQL: SELECT l.name,COALESCE(a.photoCount,0) a,COALESCE(a.ucount,0) b,COALESCE(b.priseCount,0) c,COALESCE(c.comCount,0) d FROM location l LEFT JOIN (SELECT ud.locid locid,COUNT(i.id) photoCount,COUNT(DISTINCT ud.id) ucount FROM album m,album_item i,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)  UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE m.owner_id=ud.id AND i.album_id=m.id   AND i.create_time>="2014-08-11 00:00:00" AND i.create_time<"2014-08-12 00:00:00"  GROUP BY ud.locid) a ON l.id=a.locid LEFT JOIN  (SELECT ud.locid locid,COUNT(uc.id) priseCount FROM user_comment uc,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)  UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE ud.id=uc.creator_id AND uc.obj_type='AlbumItem'   AND uc.create_time>"2014-08-11 00:00:00" AND uc.create_time<"2014-08-12 00:00:00"   GROUP BY ud.locid ) b ON l.id=b.locid LEFT JOIN (SELECT ud.locid locid,COUNT(uc.id) comCount FROM user_comment uc,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)  UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE ud.id=uc.creator_id AND uc.obj_type='SystemComment'   AND uc.create_time>="2014-08-11 00:00:00" AND uc.create_time<"2014-08-12 00:00:00"  GROUP BY ud.locid) c ON l.id=c.locid  WHERE l.id IN(24561,28422) [ RunTime:0.017001s ]
SQL: SELECT a.rname a,l.name b,d.name c,a.age d FROM (SELECT u.id uid,u.real_name rname,u.location_id locid,u.dept_id depId,(2014-(SELECT SUBSTR(u.identify_value,7,4))+0) age FROM app_user u WHERE NOT EXISTS ( SELECT lo.user_id FROM login_log lo WHERE u.id=lo.user_id  ) AND u.id IN( SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id FROM app_user u WHERE u.location_id IN(24561,28422) )) a,location l,department d WHERE a.depId=d.id AND a.locid=l.id [ RunTime:4.769273s ]
NOTIC: [8] Use of undefined constant i - assumed 'i' D:\Dropbox-List\Net\Dropbox\WebDev\xampp\htdocs\php_demo\shizhan\10\10wish\APP\Lib\Action\Njb\IndexAction.class.php 第 97 行.
NOTIC: [8] Undefined index: i D:\Dropbox-List\Net\Dropbox\WebDev\xampp\htdocs\php_demo\shizhan\10\10wish\APP\Lib\Action\Njb\IndexAction.class.php 第 97 行.
SQL: SELECT u.id,u.real_name,COALESCE(a.worklogCount,0) worklogCount,COALESCE(b.logCount,0) logCount FROM app_user u LEFT JOIN (SELECT w.owner_id uid,COALESCE(COUNT(w.id)) worklogCount FROM work_log w WHERE w.owner_id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24561 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24561 ) AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00" GROUP BY w.owner_id) a ON u.id=a.uid LEFT JOIN (SELECT lo.user_id uid,COUNT(lo.user_id) logCount FROM login_log lo WHERE lo.user_id IN( SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24561 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24561 ) AND lo.login_time>="2014-08-11 00:00:00" AND lo.login_time<"2014-08-12 00:00:00" GROUP BY lo.user_id ) b ON u.id=b.uid WHERE u.id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24561 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24561 ) ORDER BY a.worklogCount DESC,b.logCount DESC LIMIT 10 [ RunTime:0.691040s ]
NOTIC: [8] Use of undefined constant i - assumed 'i' D:\Dropbox-List\Net\Dropbox\WebDev\xampp\htdocs\php_demo\shizhan\10\10wish\APP\Lib\Action\Njb\IndexAction.class.php 第 97 行.
NOTIC: [8] Undefined index: i D:\Dropbox-List\Net\Dropbox\WebDev\xampp\htdocs\php_demo\shizhan\10\10wish\APP\Lib\Action\Njb\IndexAction.class.php 第 97 行.
SQL: SELECT u.id,u.real_name,COALESCE(a.worklogCount,0) worklogCount,COALESCE(b.logCount,0) logCount FROM app_user u LEFT JOIN (SELECT w.owner_id uid,COALESCE(COUNT(w.id)) worklogCount FROM work_log w WHERE w.owner_id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =28422 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =28422 ) AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00" GROUP BY w.owner_id) a ON u.id=a.uid LEFT JOIN (SELECT lo.user_id uid,COUNT(lo.user_id) logCount FROM login_log lo WHERE lo.user_id IN( SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =28422 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =28422 ) AND lo.login_time>="2014-08-11 00:00:00" AND lo.login_time<"2014-08-12 00:00:00" GROUP BY lo.user_id ) b ON u.id=b.uid WHERE u.id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =28422 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24561 ) ORDER BY a.worklogCount DESC,b.logCount DESC LIMIT 10 [ RunTime:1.073061s ]
SQL: SELECT u.id,u.real_name,COALESCE(a.worklogCount,0) worklogCount,COALESCE(b.logCount,0) logCount FROM app_user u LEFT JOIN (SELECT w.owner_id uid,COALESCE(COUNT(w.id)) worklogCount FROM work_log w WHERE w.owner_id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24561 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24561 ) AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00" GROUP BY w.owner_id) a ON u.id=a.uid LEFT JOIN (SELECT lo.user_id uid,COUNT(lo.user_id) logCount FROM login_log lo WHERE lo.user_id IN( SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24561 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24561 ) AND lo.login_time>="2014-08-11 00:00:00" AND lo.login_time<"2014-08-12 00:00:00" GROUP BY lo.user_id ) b ON u.id=b.uid WHERE u.id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24561 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24561 ) ORDER BY a.worklogCount DESC,b.logCount DESC LIMIT 10 [ RunTime:1.022058s ]
SQL: SELECT u.id,u.real_name,COALESCE(a.worklogCount,0) worklogCount,COALESCE(b.logCount,0) logCount FROM app_user u LEFT JOIN (SELECT w.owner_id uid,COALESCE(COUNT(w.id)) worklogCount FROM work_log w WHERE w.owner_id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24521 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24521 ) AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00" GROUP BY w.owner_id) a ON u.id=a.uid LEFT JOIN (SELECT lo.user_id uid,COUNT(lo.user_id) logCount FROM login_log lo WHERE lo.user_id IN( SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24521 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24521 ) AND lo.login_time>="2014-08-11 00:00:00" AND lo.login_time<"2014-08-12 00:00:00" GROUP BY lo.user_id ) b ON u.id=b.uid WHERE u.id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24521 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24521 ) ORDER BY a.worklogCount DESC,b.logCount DESC LIMIT 10 [ RunTime:1.013058s ]
SQL: SELECT u.id,u.real_name,COALESCE(a.worklogCount,0) worklogCount,COALESCE(b.logCount,0) logCount FROM app_user u LEFT JOIN (SELECT w.owner_id uid,COALESCE(COUNT(w.id)) worklogCount FROM work_log w WHERE w.owner_id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24543 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24543 ) AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00" GROUP BY w.owner_id) a ON u.id=a.uid LEFT JOIN (SELECT lo.user_id uid,COUNT(lo.user_id) logCount FROM login_log lo WHERE lo.user_id IN( SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24543 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24543 ) AND lo.login_time>="2014-08-11 00:00:00" AND lo.login_time<"2014-08-12 00:00:00" GROUP BY lo.user_id ) b ON u.id=b.uid WHERE u.id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24543 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24543 ) ORDER BY a.worklogCount DESC,b.logCount DESC LIMIT 10 [ RunTime:0.902052s ]
SQL: SELECT u.id,u.real_name,COALESCE(a.worklogCount,0) worklogCount,COALESCE(b.logCount,0) logCount FROM app_user u LEFT JOIN (SELECT w.owner_id uid,COALESCE(COUNT(w.id)) worklogCount FROM work_log w WHERE w.owner_id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =28422 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =28422 ) AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00" GROUP BY w.owner_id) a ON u.id=a.uid LEFT JOIN (SELECT lo.user_id uid,COUNT(lo.user_id) logCount FROM login_log lo WHERE lo.user_id IN( SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =28422 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =28422 ) AND lo.login_time>="2014-08-11 00:00:00" AND lo.login_time<"2014-08-12 00:00:00" GROUP BY lo.user_id ) b ON u.id=b.uid WHERE u.id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =28422 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =28422 ) ORDER BY a.worklogCount DESC,b.logCount DESC LIMIT 10 [ RunTime:0.862049s ]
SQL: SELECT l.name,COALESCE(a.ulcount,0) b FROM  location l LEFT JOIN (SELECT ud.locid locid,COUNT(DISTINCT ud.id) ulcount,COUNT(ud.id) logCount FROM login_log lo,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE lo.user_id=ud.id   AND lo.login_time>="2014-08-11 00:00:00"   GROUP BY ud.locid) a ON a.locid=l.id WHERE l.id IN (24561,28422) [ RunTime:0.062004s ]
SQL: 
				CALL count_worklog_all("2014-08-11 00:00:00","2014-08-12 00:00:00",("24561,28422"))
				 [ RunTime:0.041003s ]
INFO: [ view_parse ] --START--
INFO: ParseTemplate Behavior ::run [ RunTime:1.090062s ]
INFO: [ view_parse ] --END-- [ RunTime:1.098063s ]
INFO: [ view_filter ] --START--
INFO: ContentReplace Behavior ::run [ RunTime:0.028002s ]
INFO: TokenBuild Behavior ::run [ RunTime:0.015001s ]
INFO: WriteHtmlCache Behavior ::run [ RunTime:0.007001s ]
INFO: ShowRuntime Behavior ::run [ RunTime:0.019001s ]
INFO: [ view_filter ] --END-- [ RunTime:0.090005s ]
NOTIC: [2] Cannot modify header information - headers already sent by (output started at D:\Dropbox-List\Net\Dropbox\WebDev\xampp\htdocs\php_demo\shizhan\10\10wish\APP\Lib\Action\Njb\IndexAction.class.php:99) D:\Dropbox-List\Net\Dropbox\WebDev\xampp\htdocs\php_demo\shizhan\10\10wish\ThinkPHP\Lib\Core\View.class.php 第 95 行.
NOTIC: [2] Cannot modify header information - headers already sent by (output started at D:\Dropbox-List\Net\Dropbox\WebDev\xampp\htdocs\php_demo\shizhan\10\10wish\APP\Lib\Action\Njb\IndexAction.class.php:99) D:\Dropbox-List\Net\Dropbox\WebDev\xampp\htdocs\php_demo\shizhan\10\10wish\ThinkPHP\Lib\Core\View.class.php 第 96 行.
NOTIC: [2] Cannot modify header information - headers already sent by (output started at D:\Dropbox-List\Net\Dropbox\WebDev\xampp\htdocs\php_demo\shizhan\10\10wish\APP\Lib\Action\Njb\IndexAction.class.php:99) D:\Dropbox-List\Net\Dropbox\WebDev\xampp\htdocs\php_demo\shizhan\10\10wish\ThinkPHP\Lib\Core\View.class.php 第 97 行.
INFO: [ view_end ] --START--
INFO: ShowPageTrace Behavior ::run [ RunTime:0.059003s ]
INFO: [ view_end ] --END-- [ RunTime:0.067004s ]

[ 2014-08-12T10:25:15+08:00 ] 127.0.0.1 /php_demo/shizhan/10/10wish/index.php/Njb/Index/tongji?checkbox%5B%5D=24561&checkbox%5B%5D=28422&date_begin=2014-08-11&date_end=2014-08-12
INFO: [ route_check ] --START--
INFO: CheckRoute Behavior ::run [ RunTime:0.012001s ]
INFO: [ route_check ] --END-- [ RunTime:0.020001s ]
INFO: [ app_begin ] --START--
INFO: ReadHtmlCache Behavior ::run [ RunTime:0.014001s ]
INFO: [ app_begin ] --END-- [ RunTime:0.022001s ]
SQL: SELECT l.name,COALESCE(a.ucount,0) as yhs,COALESCE(c.ulcount,0) as dlyhs,COALESCE(c.logCount,0) as dlcs FROM location l LEFT JOIN (SELECT ud.locid locid,COUNT(ud.id) ucount FROM   (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)    UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud     GROUP BY ud.locid  ) a ON l.id=a.locid  LEFT JOIN (SELECT ud.locid locid,COUNT(DISTINCT ud.id) ulcount,COUNT(ud.id) logCount FROM login_log lo,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE lo.user_id=ud.id   AND lo.login_time>="2014-08-11 00:00:00" AND lo.login_time<"2014-08-12 00:00:00"   GROUP BY ud.locid) c ON l.id=c.locid WHERE l.id IN(24561,28422) [ RunTime:0.049002s ]
SQL: SELECT l.name,COALESCE(a.noticeCount,0) noticeCount,COALESCE(a.userCount,0) userCount FROM location l LEFT JOIN  (SELECT ud.locid locid,COUNT(n.id) noticeCount,COUNT(DISTINCT ud.id) userCount FROM notice n,   (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)    UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud   WHERE n.owner_id=ud.id AND n.publish_time>="2014-08-11 00:00:00"    AND n.publish_time<"2014-08-12 00:00:00" GROUP BY ud.locid) a  ON l.id=a.locid WHERE l.id IN(24561,28422) [ RunTime:0.007001s ]
SQL: SELECT l.name,COALESCE(a.asCount,0) a,COALESCE(b.adminCount,0) b,COALESCE(c.noAdminCount,0) c FROM location l LEFT JOIN  (SELECT ud.locid locid,COUNT(t.id) asCount FROM assignment t,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE t.creator_id=ud.id AND t.create_time>="2014-08-11 00:00:00" AND  t.create_time<"2014-08-12 00:00:00"  GROUP BY ud.locid) a ON l.id=a.locid  LEFT JOIN (SELECT ud.locid locid,COUNT(DISTINCT ud.id) adminCount FROM assignment t,app_user_role r,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud   WHERE t.creator_id=ud.id AND ud.id=r.user_id AND r.role='TechAdmin'   AND t.create_time>="2014-08-11 00:00:00" AND  t.create_time<"2014-08-12 00:00:00"  GROUP BY ud.locid ) b ON l.id=b.locid LEFT JOIN (SELECT ud.locid locid,COUNT(DISTINCT ud.id) noAdminCount FROM assignment t,app_user_role r,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE t.creator_id=ud.id AND ud.id=r.user_id AND r.role='Technician'   AND t.create_time>="2014-08-11 00:00:00" AND  t.create_time<"2014-08-12 00:00:00"  GROUP BY ud.locid ) c ON l.id=c.locid  WHERE l.id IN(24561,28422) [ RunTime:0.011001s ]
SQL: SELECT l.name,COALESCE(a.worklogCount,0) a,COALESCE(a.uCount,0) b,COALESCE(b.docCount,0) c,COALESCE(c.phoCount,0) d,COALESCE(d.audioCount,0) e FROM location l LEFT JOIN  (SELECT ud.locid locid,COUNT(DISTINCT w.id) worklogCount,COUNT(DISTINCT w.owner_id) uCount FROM work_log w,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE w.owner_id=ud.id    AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00"  GROUP BY ud.locid) a ON l.id=a.locid LEFT JOIN  (SELECT ud.locid locid,i.media_type,COUNT(i.id) docCount FROM work_log w,work_log_item i,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE w.owner_id=ud.id AND w.id=i.work_log_id   AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00"  AND i.media_type=1   GROUP BY ud.locid ) b ON l.id=b.locid LEFT JOIN  (SELECT ud.locid locid,i.media_type,COUNT(i.id) phoCount FROM work_log w,work_log_item i,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE w.owner_id=ud.id AND w.id=i.work_log_id   AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00"  AND i.media_type=2   GROUP BY ud.locid ) c ON l.id=c.locid LEFT JOIN  (SELECT ud.locid locid,i.media_type,COUNT(i.id) audioCount FROM work_log w,work_log_item i,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE w.owner_id=ud.id AND w.id=i.work_log_id   AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00"  AND i.media_type=3   GROUP BY ud.locid ) d ON l.id=d.locid   WHERE l.id IN(24561,28422) [ RunTime:0.025001s ]
SQL: SELECT l.name,COALESCE(a.photoCount,0) a,COALESCE(a.ucount,0) b,COALESCE(b.priseCount,0) c,COALESCE(c.comCount,0) d FROM location l LEFT JOIN (SELECT ud.locid locid,COUNT(i.id) photoCount,COUNT(DISTINCT ud.id) ucount FROM album m,album_item i,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)  UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE m.owner_id=ud.id AND i.album_id=m.id   AND i.create_time>="2014-08-11 00:00:00" AND i.create_time<"2014-08-12 00:00:00"  GROUP BY ud.locid) a ON l.id=a.locid LEFT JOIN  (SELECT ud.locid locid,COUNT(uc.id) priseCount FROM user_comment uc,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)  UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE ud.id=uc.creator_id AND uc.obj_type='AlbumItem'   AND uc.create_time>"2014-08-11 00:00:00" AND uc.create_time<"2014-08-12 00:00:00"   GROUP BY ud.locid ) b ON l.id=b.locid LEFT JOIN (SELECT ud.locid locid,COUNT(uc.id) comCount FROM user_comment uc,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)  UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE ud.id=uc.creator_id AND uc.obj_type='SystemComment'   AND uc.create_time>="2014-08-11 00:00:00" AND uc.create_time<"2014-08-12 00:00:00"  GROUP BY ud.locid) c ON l.id=c.locid  WHERE l.id IN(24561,28422) [ RunTime:0.014001s ]
SQL: SELECT a.rname a,l.name b,d.name c,a.age d FROM (SELECT u.id uid,u.real_name rname,u.location_id locid,u.dept_id depId,(2014-(SELECT SUBSTR(u.identify_value,7,4))+0) age FROM app_user u WHERE NOT EXISTS ( SELECT lo.user_id FROM login_log lo WHERE u.id=lo.user_id  ) AND u.id IN( SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id FROM app_user u WHERE u.location_id IN(24561,28422) )) a,location l,department d WHERE a.depId=d.id AND a.locid=l.id [ RunTime:3.378194s ]
SQL: SELECT u.id,u.real_name,COALESCE(a.worklogCount,0) worklogCount,COALESCE(b.logCount,0) logCount FROM app_user u LEFT JOIN (SELECT w.owner_id uid,COALESCE(COUNT(w.id)) worklogCount FROM work_log w WHERE w.owner_id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24561 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24561 ) AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00" GROUP BY w.owner_id) a ON u.id=a.uid LEFT JOIN (SELECT lo.user_id uid,COUNT(lo.user_id) logCount FROM login_log lo WHERE lo.user_id IN( SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24561 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24561 ) AND lo.login_time>="2014-08-11 00:00:00" AND lo.login_time<"2014-08-12 00:00:00" GROUP BY lo.user_id ) b ON u.id=b.uid WHERE u.id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24561 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24561 ) ORDER BY a.worklogCount DESC,b.logCount DESC LIMIT 10 [ RunTime:0.478028s ]
SQL: SELECT u.id,u.real_name,COALESCE(a.worklogCount,0) worklogCount,COALESCE(b.logCount,0) logCount FROM app_user u LEFT JOIN (SELECT w.owner_id uid,COALESCE(COUNT(w.id)) worklogCount FROM work_log w WHERE w.owner_id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =28422 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =28422 ) AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00" GROUP BY w.owner_id) a ON u.id=a.uid LEFT JOIN (SELECT lo.user_id uid,COUNT(lo.user_id) logCount FROM login_log lo WHERE lo.user_id IN( SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =28422 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =28422 ) AND lo.login_time>="2014-08-11 00:00:00" AND lo.login_time<"2014-08-12 00:00:00" GROUP BY lo.user_id ) b ON u.id=b.uid WHERE u.id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =28422 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24561 ) ORDER BY a.worklogCount DESC,b.logCount DESC LIMIT 10 [ RunTime:0.478027s ]
SQL: SELECT u.id,u.real_name,COALESCE(a.worklogCount,0) worklogCount,COALESCE(b.logCount,0) logCount FROM app_user u LEFT JOIN (SELECT w.owner_id uid,COALESCE(COUNT(w.id)) worklogCount FROM work_log w WHERE w.owner_id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24561 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24561 ) AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00" GROUP BY w.owner_id) a ON u.id=a.uid LEFT JOIN (SELECT lo.user_id uid,COUNT(lo.user_id) logCount FROM login_log lo WHERE lo.user_id IN( SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24561 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24561 ) AND lo.login_time>="2014-08-11 00:00:00" AND lo.login_time<"2014-08-12 00:00:00" GROUP BY lo.user_id ) b ON u.id=b.uid WHERE u.id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24561 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24561 ) ORDER BY a.worklogCount DESC,b.logCount DESC LIMIT 10 [ RunTime:0.542031s ]
SQL: SELECT u.id,u.real_name,COALESCE(a.worklogCount,0) worklogCount,COALESCE(b.logCount,0) logCount FROM app_user u LEFT JOIN (SELECT w.owner_id uid,COALESCE(COUNT(w.id)) worklogCount FROM work_log w WHERE w.owner_id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24521 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24521 ) AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00" GROUP BY w.owner_id) a ON u.id=a.uid LEFT JOIN (SELECT lo.user_id uid,COUNT(lo.user_id) logCount FROM login_log lo WHERE lo.user_id IN( SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24521 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24521 ) AND lo.login_time>="2014-08-11 00:00:00" AND lo.login_time<"2014-08-12 00:00:00" GROUP BY lo.user_id ) b ON u.id=b.uid WHERE u.id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24521 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24521 ) ORDER BY a.worklogCount DESC,b.logCount DESC LIMIT 10 [ RunTime:0.441025s ]
SQL: SELECT u.id,u.real_name,COALESCE(a.worklogCount,0) worklogCount,COALESCE(b.logCount,0) logCount FROM app_user u LEFT JOIN (SELECT w.owner_id uid,COALESCE(COUNT(w.id)) worklogCount FROM work_log w WHERE w.owner_id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24543 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24543 ) AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00" GROUP BY w.owner_id) a ON u.id=a.uid LEFT JOIN (SELECT lo.user_id uid,COUNT(lo.user_id) logCount FROM login_log lo WHERE lo.user_id IN( SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24543 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24543 ) AND lo.login_time>="2014-08-11 00:00:00" AND lo.login_time<"2014-08-12 00:00:00" GROUP BY lo.user_id ) b ON u.id=b.uid WHERE u.id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24543 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24543 ) ORDER BY a.worklogCount DESC,b.logCount DESC LIMIT 10 [ RunTime:0.440025s ]
SQL: SELECT u.id,u.real_name,COALESCE(a.worklogCount,0) worklogCount,COALESCE(b.logCount,0) logCount FROM app_user u LEFT JOIN (SELECT w.owner_id uid,COALESCE(COUNT(w.id)) worklogCount FROM work_log w WHERE w.owner_id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =28422 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =28422 ) AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00" GROUP BY w.owner_id) a ON u.id=a.uid LEFT JOIN (SELECT lo.user_id uid,COUNT(lo.user_id) logCount FROM login_log lo WHERE lo.user_id IN( SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =28422 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =28422 ) AND lo.login_time>="2014-08-11 00:00:00" AND lo.login_time<"2014-08-12 00:00:00" GROUP BY lo.user_id ) b ON u.id=b.uid WHERE u.id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =28422 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =28422 ) ORDER BY a.worklogCount DESC,b.logCount DESC LIMIT 10 [ RunTime:0.430024s ]
SQL: SELECT l.name,COALESCE(a.ulcount,0) b FROM  location l LEFT JOIN (SELECT ud.locid locid,COUNT(DISTINCT ud.id) ulcount,COUNT(ud.id) logCount FROM login_log lo,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE lo.user_id=ud.id   AND lo.login_time>="2014-08-11 00:00:00"   GROUP BY ud.locid) a ON a.locid=l.id WHERE l.id IN (24561,28422) [ RunTime:0.027001s ]
SQL: 
				CALL count_worklog_all("2014-08-11 00:00:00","2014-08-12 00:00:00",("24561,28422"))
				 [ RunTime:0.021001s ]
INFO: [ view_parse ] --START--
INFO: ParseTemplate Behavior ::run [ RunTime:0.603034s ]
INFO: [ view_parse ] --END-- [ RunTime:0.607034s ]
INFO: [ view_filter ] --START--
INFO: ContentReplace Behavior ::run [ RunTime:0.008000s ]
INFO: TokenBuild Behavior ::run [ RunTime:0.009001s ]
INFO: WriteHtmlCache Behavior ::run [ RunTime:0.004000s ]
INFO: ShowRuntime Behavior ::run [ RunTime:0.011001s ]
INFO: [ view_filter ] --END-- [ RunTime:0.044003s ]
NOTIC: [2] Cannot modify header information - headers already sent by (output started at D:\Dropbox-List\Net\Dropbox\WebDev\xampp\htdocs\php_demo\shizhan\10\10wish\APP\Lib\Action\Njb\IndexAction.class.php:99) D:\Dropbox-List\Net\Dropbox\WebDev\xampp\htdocs\php_demo\shizhan\10\10wish\ThinkPHP\Lib\Core\View.class.php 第 95 行.
NOTIC: [2] Cannot modify header information - headers already sent by (output started at D:\Dropbox-List\Net\Dropbox\WebDev\xampp\htdocs\php_demo\shizhan\10\10wish\APP\Lib\Action\Njb\IndexAction.class.php:99) D:\Dropbox-List\Net\Dropbox\WebDev\xampp\htdocs\php_demo\shizhan\10\10wish\ThinkPHP\Lib\Core\View.class.php 第 96 行.
NOTIC: [2] Cannot modify header information - headers already sent by (output started at D:\Dropbox-List\Net\Dropbox\WebDev\xampp\htdocs\php_demo\shizhan\10\10wish\APP\Lib\Action\Njb\IndexAction.class.php:99) D:\Dropbox-List\Net\Dropbox\WebDev\xampp\htdocs\php_demo\shizhan\10\10wish\ThinkPHP\Lib\Core\View.class.php 第 97 行.
INFO: [ view_end ] --START--
INFO: ShowPageTrace Behavior ::run [ RunTime:0.024001s ]
INFO: [ view_end ] --END-- [ RunTime:0.029001s ]

[ 2014-08-12T10:25:37+08:00 ] 127.0.0.1 /php_demo/shizhan/10/10wish/index.php/Njb/Index/tongji?checkbox%5B%5D=24561&checkbox%5B%5D=28422&date_begin=2014-08-11&date_end=2014-08-12
INFO: [ route_check ] --START--
INFO: CheckRoute Behavior ::run [ RunTime:0.027001s ]
INFO: [ route_check ] --END-- [ RunTime:0.045003s ]
INFO: [ app_begin ] --START--
INFO: ReadHtmlCache Behavior ::run [ RunTime:0.021002s ]
INFO: [ app_begin ] --END-- [ RunTime:0.035002s ]
SQL: SELECT l.name,COALESCE(a.ucount,0) as yhs,COALESCE(c.ulcount,0) as dlyhs,COALESCE(c.logCount,0) as dlcs FROM location l LEFT JOIN (SELECT ud.locid locid,COUNT(ud.id) ucount FROM   (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)    UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud     GROUP BY ud.locid  ) a ON l.id=a.locid  LEFT JOIN (SELECT ud.locid locid,COUNT(DISTINCT ud.id) ulcount,COUNT(ud.id) logCount FROM login_log lo,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE lo.user_id=ud.id   AND lo.login_time>="2014-08-11 00:00:00" AND lo.login_time<"2014-08-12 00:00:00"   GROUP BY ud.locid) c ON l.id=c.locid WHERE l.id IN(24561,28422) [ RunTime:0.060003s ]
SQL: SELECT l.name,COALESCE(a.noticeCount,0) noticeCount,COALESCE(a.userCount,0) userCount FROM location l LEFT JOIN  (SELECT ud.locid locid,COUNT(n.id) noticeCount,COUNT(DISTINCT ud.id) userCount FROM notice n,   (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)    UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud   WHERE n.owner_id=ud.id AND n.publish_time>="2014-08-11 00:00:00"    AND n.publish_time<"2014-08-12 00:00:00" GROUP BY ud.locid) a  ON l.id=a.locid WHERE l.id IN(24561,28422) [ RunTime:0.007000s ]
SQL: SELECT l.name,COALESCE(a.asCount,0) a,COALESCE(b.adminCount,0) b,COALESCE(c.noAdminCount,0) c FROM location l LEFT JOIN  (SELECT ud.locid locid,COUNT(t.id) asCount FROM assignment t,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE t.creator_id=ud.id AND t.create_time>="2014-08-11 00:00:00" AND  t.create_time<"2014-08-12 00:00:00"  GROUP BY ud.locid) a ON l.id=a.locid  LEFT JOIN (SELECT ud.locid locid,COUNT(DISTINCT ud.id) adminCount FROM assignment t,app_user_role r,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud   WHERE t.creator_id=ud.id AND ud.id=r.user_id AND r.role='TechAdmin'   AND t.create_time>="2014-08-11 00:00:00" AND  t.create_time<"2014-08-12 00:00:00"  GROUP BY ud.locid ) b ON l.id=b.locid LEFT JOIN (SELECT ud.locid locid,COUNT(DISTINCT ud.id) noAdminCount FROM assignment t,app_user_role r,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE t.creator_id=ud.id AND ud.id=r.user_id AND r.role='Technician'   AND t.create_time>="2014-08-11 00:00:00" AND  t.create_time<"2014-08-12 00:00:00"  GROUP BY ud.locid ) c ON l.id=c.locid  WHERE l.id IN(24561,28422) [ RunTime:0.016001s ]
SQL: SELECT l.name,COALESCE(a.worklogCount,0) a,COALESCE(a.uCount,0) b,COALESCE(b.docCount,0) c,COALESCE(c.phoCount,0) d,COALESCE(d.audioCount,0) e FROM location l LEFT JOIN  (SELECT ud.locid locid,COUNT(DISTINCT w.id) worklogCount,COUNT(DISTINCT w.owner_id) uCount FROM work_log w,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE w.owner_id=ud.id    AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00"  GROUP BY ud.locid) a ON l.id=a.locid LEFT JOIN  (SELECT ud.locid locid,i.media_type,COUNT(i.id) docCount FROM work_log w,work_log_item i,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE w.owner_id=ud.id AND w.id=i.work_log_id   AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00"  AND i.media_type=1   GROUP BY ud.locid ) b ON l.id=b.locid LEFT JOIN  (SELECT ud.locid locid,i.media_type,COUNT(i.id) phoCount FROM work_log w,work_log_item i,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE w.owner_id=ud.id AND w.id=i.work_log_id   AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00"  AND i.media_type=2   GROUP BY ud.locid ) c ON l.id=c.locid LEFT JOIN  (SELECT ud.locid locid,i.media_type,COUNT(i.id) audioCount FROM work_log w,work_log_item i,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE w.owner_id=ud.id AND w.id=i.work_log_id   AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00"  AND i.media_type=3   GROUP BY ud.locid ) d ON l.id=d.locid   WHERE l.id IN(24561,28422) [ RunTime:0.040003s ]
SQL: SELECT l.name,COALESCE(a.photoCount,0) a,COALESCE(a.ucount,0) b,COALESCE(b.priseCount,0) c,COALESCE(c.comCount,0) d FROM location l LEFT JOIN (SELECT ud.locid locid,COUNT(i.id) photoCount,COUNT(DISTINCT ud.id) ucount FROM album m,album_item i,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)  UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE m.owner_id=ud.id AND i.album_id=m.id   AND i.create_time>="2014-08-11 00:00:00" AND i.create_time<"2014-08-12 00:00:00"  GROUP BY ud.locid) a ON l.id=a.locid LEFT JOIN  (SELECT ud.locid locid,COUNT(uc.id) priseCount FROM user_comment uc,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)  UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE ud.id=uc.creator_id AND uc.obj_type='AlbumItem'   AND uc.create_time>"2014-08-11 00:00:00" AND uc.create_time<"2014-08-12 00:00:00"   GROUP BY ud.locid ) b ON l.id=b.locid LEFT JOIN (SELECT ud.locid locid,COUNT(uc.id) comCount FROM user_comment uc,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)  UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE ud.id=uc.creator_id AND uc.obj_type='SystemComment'   AND uc.create_time>="2014-08-11 00:00:00" AND uc.create_time<"2014-08-12 00:00:00"  GROUP BY ud.locid) c ON l.id=c.locid  WHERE l.id IN(24561,28422) [ RunTime:0.012001s ]
SQL: SELECT a.rname a,l.name b,d.name c,a.age d FROM (SELECT u.id uid,u.real_name rname,u.location_id locid,u.dept_id depId,(2014-(SELECT SUBSTR(u.identify_value,7,4))+0) age FROM app_user u WHERE NOT EXISTS ( SELECT lo.user_id FROM login_log lo WHERE u.id=lo.user_id  ) AND u.id IN( SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id FROM app_user u WHERE u.location_id IN(24561,28422) )) a,location l,department d WHERE a.depId=d.id AND a.locid=l.id [ RunTime:3.394194s ]
SQL: SELECT u.id,u.real_name,COALESCE(a.worklogCount,0) worklogCount,COALESCE(b.logCount,0) logCount FROM app_user u LEFT JOIN (SELECT w.owner_id uid,COALESCE(COUNT(w.id)) worklogCount FROM work_log w WHERE w.owner_id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24561 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24561 ) AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00" GROUP BY w.owner_id) a ON u.id=a.uid LEFT JOIN (SELECT lo.user_id uid,COUNT(lo.user_id) logCount FROM login_log lo WHERE lo.user_id IN( SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24561 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24561 ) AND lo.login_time>="2014-08-11 00:00:00" AND lo.login_time<"2014-08-12 00:00:00" GROUP BY lo.user_id ) b ON u.id=b.uid WHERE u.id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24561 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24561 ) ORDER BY a.worklogCount DESC,b.logCount DESC LIMIT 10 [ RunTime:0.526030s ]
SQL: SELECT u.id,u.real_name,COALESCE(a.worklogCount,0) worklogCount,COALESCE(b.logCount,0) logCount FROM app_user u LEFT JOIN (SELECT w.owner_id uid,COALESCE(COUNT(w.id)) worklogCount FROM work_log w WHERE w.owner_id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =28422 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =28422 ) AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00" GROUP BY w.owner_id) a ON u.id=a.uid LEFT JOIN (SELECT lo.user_id uid,COUNT(lo.user_id) logCount FROM login_log lo WHERE lo.user_id IN( SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =28422 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =28422 ) AND lo.login_time>="2014-08-11 00:00:00" AND lo.login_time<"2014-08-12 00:00:00" GROUP BY lo.user_id ) b ON u.id=b.uid WHERE u.id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =28422 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24561 ) ORDER BY a.worklogCount DESC,b.logCount DESC LIMIT 10 [ RunTime:0.493028s ]
SQL: SELECT u.id,u.real_name,COALESCE(a.worklogCount,0) worklogCount,COALESCE(b.logCount,0) logCount FROM app_user u LEFT JOIN (SELECT w.owner_id uid,COALESCE(COUNT(w.id)) worklogCount FROM work_log w WHERE w.owner_id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24561 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24561 ) AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00" GROUP BY w.owner_id) a ON u.id=a.uid LEFT JOIN (SELECT lo.user_id uid,COUNT(lo.user_id) logCount FROM login_log lo WHERE lo.user_id IN( SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24561 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24561 ) AND lo.login_time>="2014-08-11 00:00:00" AND lo.login_time<"2014-08-12 00:00:00" GROUP BY lo.user_id ) b ON u.id=b.uid WHERE u.id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24561 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24561 ) ORDER BY a.worklogCount DESC,b.logCount DESC LIMIT 10 [ RunTime:0.514029s ]
SQL: SELECT u.id,u.real_name,COALESCE(a.worklogCount,0) worklogCount,COALESCE(b.logCount,0) logCount FROM app_user u LEFT JOIN (SELECT w.owner_id uid,COALESCE(COUNT(w.id)) worklogCount FROM work_log w WHERE w.owner_id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24521 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24521 ) AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00" GROUP BY w.owner_id) a ON u.id=a.uid LEFT JOIN (SELECT lo.user_id uid,COUNT(lo.user_id) logCount FROM login_log lo WHERE lo.user_id IN( SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24521 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24521 ) AND lo.login_time>="2014-08-11 00:00:00" AND lo.login_time<"2014-08-12 00:00:00" GROUP BY lo.user_id ) b ON u.id=b.uid WHERE u.id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24521 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24521 ) ORDER BY a.worklogCount DESC,b.logCount DESC LIMIT 10 [ RunTime:0.549031s ]
SQL: SELECT u.id,u.real_name,COALESCE(a.worklogCount,0) worklogCount,COALESCE(b.logCount,0) logCount FROM app_user u LEFT JOIN (SELECT w.owner_id uid,COALESCE(COUNT(w.id)) worklogCount FROM work_log w WHERE w.owner_id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24543 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24543 ) AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00" GROUP BY w.owner_id) a ON u.id=a.uid LEFT JOIN (SELECT lo.user_id uid,COUNT(lo.user_id) logCount FROM login_log lo WHERE lo.user_id IN( SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24543 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24543 ) AND lo.login_time>="2014-08-11 00:00:00" AND lo.login_time<"2014-08-12 00:00:00" GROUP BY lo.user_id ) b ON u.id=b.uid WHERE u.id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =24543 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =24543 ) ORDER BY a.worklogCount DESC,b.logCount DESC LIMIT 10 [ RunTime:0.523030s ]
SQL: SELECT u.id,u.real_name,COALESCE(a.worklogCount,0) worklogCount,COALESCE(b.logCount,0) logCount FROM app_user u LEFT JOIN (SELECT w.owner_id uid,COALESCE(COUNT(w.id)) worklogCount FROM work_log w WHERE w.owner_id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =28422 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =28422 ) AND w.create_time>="2014-08-11 00:00:00" AND w.create_time<"2014-08-12 00:00:00" GROUP BY w.owner_id) a ON u.id=a.uid LEFT JOIN (SELECT lo.user_id uid,COUNT(lo.user_id) logCount FROM login_log lo WHERE lo.user_id IN( SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =28422 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =28422 ) AND lo.login_time>="2014-08-11 00:00:00" AND lo.login_time<"2014-08-12 00:00:00" GROUP BY lo.user_id ) b ON u.id=b.uid WHERE u.id IN(SELECT u.id FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id =28422 UNION ALL SELECT u.id FROM app_user u WHERE u.location_id =28422 ) ORDER BY a.worklogCount DESC,b.logCount DESC LIMIT 10 [ RunTime:0.838048s ]
SQL: SELECT l.name,COALESCE(a.ulcount,0) b FROM  location l LEFT JOIN (SELECT ud.locid locid,COUNT(DISTINCT ud.id) ulcount,COUNT(ud.id) logCount FROM login_log lo,  (SELECT u.id,f.ancestor_id locid FROM app_user u,location_flat f WHERE u.location_id=f.location_id AND f.ancestor_id IN(24561,28422)   UNION ALL SELECT u.id,u.location_id locid FROM app_user u WHERE u.location_id IN(24561,28422)) ud  WHERE lo.user_id=ud.id   AND lo.login_time>="2014-08-11 00:00:00"   GROUP BY ud.locid) a ON a.locid=l.id WHERE l.id IN (24561,28422) [ RunTime:0.077004s ]
SQL: 
				CALL count_worklog_all("2014-08-11 00:00:00","2014-08-12 00:00:00",("24561,28422"))
				 [ RunTime:0.059003s ]
INFO: [ view_parse ] --START--
INFO: ParseTemplate Behavior ::run [ RunTime:1.415081s ]
INFO: [ view_parse ] --END-- [ RunTime:1.438082s ]
INFO: [ view_filter ] --START--
INFO: ContentReplace Behavior ::run [ RunTime:0.017001s ]
INFO: TokenBuild Behavior ::run [ RunTime:0.026002s ]
INFO: WriteHtmlCache Behavior ::run [ RunTime:0.012001s ]
INFO: ShowRuntime Behavior ::run [ RunTime:0.031002s ]
INFO: [ view_filter ] --END-- [ RunTime:0.121007s ]
INFO: [ view_end ] --START--
INFO: ShowPageTrace Behavior ::run [ RunTime:0.016000s ]
INFO: [ view_end ] --END-- [ RunTime:0.029002s ]

[ 2014-08-12T12:02:32+08:00 ] 127.0.0.1 /php_demo/shizhan/10/10wish/
INFO: [ app_begin ] --START--
INFO: ReadHtmlCache Behavior ::run [ RunTime:0.023002s ]
INFO: [ app_begin ] --END-- [ RunTime:0.039002s ]
SQL: SHOW COLUMNS FROM `tp_wish` [ RunTime:0.174010s ]
SQL: SELECT * FROM `tp_wish`  [ RunTime:0.003000s ]
INFO: [ view_parse ] --START--
INFO: ParseTemplate Behavior ::run [ RunTime:0.349020s ]
INFO: [ view_parse ] --END-- [ RunTime:0.363021s ]
INFO: [ view_filter ] --START--
INFO: ContentReplace Behavior ::run [ RunTime:0.057003s ]
INFO: TokenBuild Behavior ::run [ RunTime:0.022001s ]
INFO: WriteHtmlCache Behavior ::run [ RunTime:0.016001s ]
INFO: ShowRuntime Behavior ::run [ RunTime:0.033002s ]
INFO: [ view_filter ] --END-- [ RunTime:0.163009s ]
INFO: [ view_end ] --START--
INFO: ShowPageTrace Behavior ::run [ RunTime:0.049003s ]
INFO: [ view_end ] --END-- [ RunTime:0.062003s ]

[ 2014-08-12T13:48:01+08:00 ] 127.0.0.1 /php_demo/shizhan/10/10wish/index.php/Test
INFO: [ route_check ] --START--
INFO: CheckRoute Behavior ::run [ RunTime:0.022001s ]
INFO: [ route_check ] --END-- [ RunTime:0.036002s ]
INFO: [ app_begin ] --START--
INFO: ReadHtmlCache Behavior ::run [ RunTime:0.025001s ]
INFO: [ app_begin ] --END-- [ RunTime:0.038002s ]
INFO: [ view_parse ] --START--
INFO: ParseTemplate Behavior ::run [ RunTime:0.253014s ]
INFO: [ view_parse ] --END-- [ RunTime:0.266016s ]
INFO: [ view_filter ] --START--
INFO: ContentReplace Behavior ::run [ RunTime:0.018001s ]
INFO: TokenBuild Behavior ::run [ RunTime:0.022001s ]
INFO: WriteHtmlCache Behavior ::run [ RunTime:0.011000s ]
INFO: ShowRuntime Behavior ::run [ RunTime:0.033001s ]
INFO: [ view_filter ] --END-- [ RunTime:0.118007s ]
INFO: [ view_end ] --START--
INFO: ShowPageTrace Behavior ::run [ RunTime:0.020001s ]
INFO: [ view_end ] --END-- [ RunTime:0.033002s ]

[ 2014-08-12T13:48:08+08:00 ] 127.0.0.1 /php_demo/shizhan/10/10wish/index.php/Test/Map
INFO: [ route_check ] --START--
INFO: CheckRoute Behavior ::run [ RunTime:0.017001s ]
INFO: [ route_check ] --END-- [ RunTime:0.028001s ]
INFO: [ app_begin ] --START--
INFO: ReadHtmlCache Behavior ::run [ RunTime:0.021001s ]
INFO: [ app_begin ] --END-- [ RunTime:0.035002s ]

[ 2014-08-12T13:48:22+08:00 ] 127.0.0.1 /php_demo/shizhan/10/10wish/index.php/Test/Map
INFO: [ route_check ] --START--
INFO: CheckRoute Behavior ::run [ RunTime:0.016001s ]
INFO: [ route_check ] --END-- [ RunTime:0.030002s ]
INFO: [ app_begin ] --START--
INFO: ReadHtmlCache Behavior ::run [ RunTime:0.024001s ]
INFO: [ app_begin ] --END-- [ RunTime:0.036002s ]

[ 2014-08-12T13:48:34+08:00 ] 127.0.0.1 /php_demo/shizhan/10/10wish/index.php/Test/Map
INFO: [ route_check ] --START--
INFO: CheckRoute Behavior ::run [ RunTime:0.019001s ]
INFO: [ route_check ] --END-- [ RunTime:0.030002s ]
INFO: [ app_begin ] --START--
INFO: ReadHtmlCache Behavior ::run [ RunTime:0.025001s ]
INFO: [ app_begin ] --END-- [ RunTime:0.038002s ]

[ 2014-08-12T13:48:50+08:00 ] 127.0.0.1 /php_demo/shizhan/10/10wish/index.php/Test/Map/route
INFO: [ route_check ] --START--
INFO: CheckRoute Behavior ::run [ RunTime:0.017001s ]
INFO: [ route_check ] --END-- [ RunTime:0.031002s ]
INFO: [ app_begin ] --START--
INFO: ReadHtmlCache Behavior ::run [ RunTime:0.022001s ]
INFO: [ app_begin ] --END-- [ RunTime:0.035002s ]
INFO: [ view_parse ] --START--
INFO: ParseTemplate Behavior ::run [ RunTime:0.201011s ]
INFO: [ view_parse ] --END-- [ RunTime:0.219013s ]
INFO: [ view_filter ] --START--
INFO: ContentReplace Behavior ::run [ RunTime:0.018001s ]
INFO: TokenBuild Behavior ::run [ RunTime:0.022001s ]
INFO: WriteHtmlCache Behavior ::run [ RunTime:0.012000s ]
INFO: ShowRuntime Behavior ::run [ RunTime:0.033002s ]
INFO: [ view_filter ] --END-- [ RunTime:0.120007s ]
INFO: [ view_end ] --START--
INFO: ShowPageTrace Behavior ::run [ RunTime:0.027001s ]
INFO: [ view_end ] --END-- [ RunTime:0.038002s ]

[ 2014-08-12T13:49:31+08:00 ] 127.0.0.1 /php_demo/shizhan/10/10wish/index.php/Test/Map/route
INFO: [ route_check ] --START--
INFO: CheckRoute Behavior ::run [ RunTime:0.013001s ]
INFO: [ route_check ] --END-- [ RunTime:0.023001s ]
INFO: [ app_begin ] --START--
INFO: ReadHtmlCache Behavior ::run [ RunTime:0.018001s ]
INFO: [ app_begin ] --END-- [ RunTime:0.028001s ]
INFO: [ view_parse ] --START--
INFO: ParseTemplate Behavior ::run [ RunTime:0.246014s ]
INFO: [ view_parse ] --END-- [ RunTime:0.259015s ]
INFO: [ view_filter ] --START--
INFO: ContentReplace Behavior ::run [ RunTime:0.015001s ]
INFO: TokenBuild Behavior ::run [ RunTime:0.019001s ]
INFO: WriteHtmlCache Behavior ::run [ RunTime:0.010001s ]
INFO: ShowRuntime Behavior ::run [ RunTime:0.026002s ]
INFO: [ view_filter ] --END-- [ RunTime:0.097006s ]
INFO: [ view_end ] --START--
INFO: ShowPageTrace Behavior ::run [ RunTime:0.018001s ]
INFO: [ view_end ] --END-- [ RunTime:0.027001s ]

[ 2014-08-12T13:51:39+08:00 ] 127.0.0.1 /php_demo/shizhan/10/10wish/index.php/Test/Map/route
INFO: [ route_check ] --START--
INFO: CheckRoute Behavior ::run [ RunTime:0.014000s ]
INFO: [ route_check ] --END-- [ RunTime:0.027002s ]
INFO: [ app_begin ] --START--
INFO: ReadHtmlCache Behavior ::run [ RunTime:0.022001s ]
INFO: [ app_begin ] --END-- [ RunTime:0.036002s ]
INFO: [ view_parse ] --START--
INFO: ParseTemplate Behavior ::run [ RunTime:0.202011s ]
INFO: [ view_parse ] --END-- [ RunTime:0.215013s ]
INFO: [ view_filter ] --START--
INFO: ContentReplace Behavior ::run [ RunTime:0.014000s ]
INFO: TokenBuild Behavior ::run [ RunTime:0.018001s ]
INFO: WriteHtmlCache Behavior ::run [ RunTime:0.009001s ]
INFO: ShowRuntime Behavior ::run [ RunTime:0.025001s ]
INFO: [ view_filter ] --END-- [ RunTime:0.094006s ]
INFO: [ view_end ] --START--
INFO: ShowPageTrace Behavior ::run [ RunTime:0.019001s ]
INFO: [ view_end ] --END-- [ RunTime:0.033002s ]

[ 2014-08-12T13:58:33+08:00 ] 127.0.0.1 /php_demo/shizhan/10/10wish/index.php/Test/Map/route
INFO: [ route_check ] --START--
INFO: CheckRoute Behavior ::run [ RunTime:0.015001s ]
INFO: [ route_check ] --END-- [ RunTime:0.025001s ]
INFO: [ app_begin ] --START--
INFO: ReadHtmlCache Behavior ::run [ RunTime:0.018001s ]
INFO: [ app_begin ] --END-- [ RunTime:0.030002s ]
INFO: [ view_parse ] --START--
INFO: ParseTemplate Behavior ::run [ RunTime:0.192011s ]
INFO: [ view_parse ] --END-- [ RunTime:0.205011s ]
INFO: [ view_filter ] --START--
INFO: ContentReplace Behavior ::run [ RunTime:0.015001s ]
INFO: TokenBuild Behavior ::run [ RunTime:0.018001s ]
INFO: WriteHtmlCache Behavior ::run [ RunTime:0.009000s ]
INFO: ShowRuntime Behavior ::run [ RunTime:0.025001s ]
INFO: [ view_filter ] --END-- [ RunTime:0.096005s ]
INFO: [ view_end ] --START--
INFO: ShowPageTrace Behavior ::run [ RunTime:0.018001s ]
INFO: [ view_end ] --END-- [ RunTime:0.028002s ]

[ 2014-08-12T13:59:14+08:00 ] 127.0.0.1 /php_demo/shizhan/10/10wish/index.php/Test/Map/route
INFO: [ route_check ] --START--
INFO: CheckRoute Behavior ::run [ RunTime:0.015001s ]
INFO: [ route_check ] --END-- [ RunTime:0.025001s ]
INFO: [ app_begin ] --START--
INFO: ReadHtmlCache Behavior ::run [ RunTime:0.021001s ]
INFO: [ app_begin ] --END-- [ RunTime:0.031002s ]
INFO: [ view_parse ] --START--
INFO: ParseTemplate Behavior ::run [ RunTime:0.195011s ]
INFO: [ view_parse ] --END-- [ RunTime:0.209012s ]
INFO: [ view_filter ] --START--
INFO: ContentReplace Behavior ::run [ RunTime:0.019001s ]
INFO: TokenBuild Behavior ::run [ RunTime:0.027002s ]
INFO: WriteHtmlCache Behavior ::run [ RunTime:0.011001s ]
INFO: ShowRuntime Behavior ::run [ RunTime:0.036002s ]
INFO: [ view_filter ] --END-- [ RunTime:0.128007s ]
INFO: [ view_end ] --START--
INFO: ShowPageTrace Behavior ::run [ RunTime:0.017001s ]
INFO: [ view_end ] --END-- [ RunTime:0.028002s ]

[ 2014-08-12T13:59:58+08:00 ] 127.0.0.1 /php_demo/shizhan/10/10wish/index.php/Test/Map
INFO: [ route_check ] --START--
INFO: CheckRoute Behavior ::run [ RunTime:0.015001s ]
INFO: [ route_check ] --END-- [ RunTime:0.025002s ]
INFO: [ app_begin ] --START--
INFO: ReadHtmlCache Behavior ::run [ RunTime:0.021001s ]
INFO: [ app_begin ] --END-- [ RunTime:0.031002s ]

[ 2014-08-12T14:01:05+08:00 ] 127.0.0.1 /php_demo/shizhan/10/10wish/index.php/Test/Map/route
INFO: [ route_check ] --START--
INFO: CheckRoute Behavior ::run [ RunTime:0.017001s ]
INFO: [ route_check ] --END-- [ RunTime:0.028002s ]
INFO: [ app_begin ] --START--
INFO: ReadHtmlCache Behavior ::run [ RunTime:0.019001s ]
INFO: [ app_begin ] --END-- [ RunTime:0.031002s ]
INFO: [ view_parse ] --START--
INFO: ParseTemplate Behavior ::run [ RunTime:0.246014s ]
INFO: [ view_parse ] --END-- [ RunTime:0.257015s ]
INFO: [ view_filter ] --START--
INFO: ContentReplace Behavior ::run [ RunTime:0.034002s ]
INFO: TokenBuild Behavior ::run [ RunTime:0.024002s ]
INFO: WriteHtmlCache Behavior ::run [ RunTime:0.012001s ]
INFO: ShowRuntime Behavior ::run [ RunTime:0.025001s ]
INFO: [ view_filter ] --END-- [ RunTime:0.127008s ]
INFO: [ view_end ] --START--
INFO: ShowPageTrace Behavior ::run [ RunTime:0.016001s ]
INFO: [ view_end ] --END-- [ RunTime:0.028001s ]

[ 2014-08-12T15:56:16+08:00 ] 127.0.0.1 /php_demo/shizhan/10/10wish/index.php/Test/Map/route
INFO: [ route_check ] --START--
INFO: CheckRoute Behavior ::run [ RunTime:0.103005s ]
INFO: [ route_check ] --END-- [ RunTime:0.606035s ]
INFO: [ app_begin ] --START--
INFO: ReadHtmlCache Behavior ::run [ RunTime:0.057003s ]
INFO: [ app_begin ] --END-- [ RunTime:0.070004s ]
INFO: [ view_parse ] --START--
INFO: ParseTemplate Behavior ::run [ RunTime:0.590033s ]
INFO: [ view_parse ] --END-- [ RunTime:0.604035s ]
INFO: [ view_filter ] --START--
INFO: ContentReplace Behavior ::run [ RunTime:0.027001s ]
INFO: TokenBuild Behavior ::run [ RunTime:0.029001s ]
INFO: WriteHtmlCache Behavior ::run [ RunTime:0.016001s ]
INFO: ShowRuntime Behavior ::run [ RunTime:0.053003s ]
INFO: [ view_filter ] --END-- [ RunTime:0.159009s ]
INFO: [ view_end ] --START--
INFO: ShowPageTrace Behavior ::run [ RunTime:0.029001s ]
INFO: [ view_end ] --END-- [ RunTime:0.041003s ]

[ 2014-08-12T15:56:27+08:00 ] 127.0.0.1 /php_demo/shizhan/10/10wish/index.php/Test/Map/route
INFO: [ route_check ] --START--
INFO: CheckRoute Behavior ::run [ RunTime:0.020002s ]
INFO: [ route_check ] --END-- [ RunTime:0.032002s ]
INFO: [ app_begin ] --START--
INFO: ReadHtmlCache Behavior ::run [ RunTime:0.026002s ]
INFO: [ app_begin ] --END-- [ RunTime:0.038002s ]
INFO: [ view_parse ] --START--
INFO: ParseTemplate Behavior ::run [ RunTime:0.220012s ]
INFO: [ view_parse ] --END-- [ RunTime:0.235014s ]
INFO: [ view_filter ] --START--
INFO: ContentReplace Behavior ::run [ RunTime:0.021001s ]
INFO: TokenBuild Behavior ::run [ RunTime:0.023002s ]
INFO: WriteHtmlCache Behavior ::run [ RunTime:0.013001s ]
INFO: ShowRuntime Behavior ::run [ RunTime:0.031002s ]
INFO: [ view_filter ] --END-- [ RunTime:0.124008s ]
INFO: [ view_end ] --START--
INFO: ShowPageTrace Behavior ::run [ RunTime:0.021001s ]
INFO: [ view_end ] --END-- [ RunTime:0.033002s ]

[ 2014-08-12T15:57:02+08:00 ] 127.0.0.1 /php_demo/shizhan/10/10wish/index.php/Test/Map/route
INFO: [ route_check ] --START--
INFO: CheckRoute Behavior ::run [ RunTime:0.016001s ]
INFO: [ route_check ] --END-- [ RunTime:0.028002s ]
INFO: [ app_begin ] --START--
INFO: ReadHtmlCache Behavior ::run [ RunTime:0.021001s ]
INFO: [ app_begin ] --END-- [ RunTime:0.034002s ]
INFO: [ view_parse ] --START--
INFO: ParseTemplate Behavior ::run [ RunTime:0.214012s ]
INFO: [ view_parse ] --END-- [ RunTime:0.226013s ]
INFO: [ view_filter ] --START--
INFO: ContentReplace Behavior ::run [ RunTime:0.017001s ]
INFO: TokenBuild Behavior ::run [ RunTime:0.023002s ]
INFO: WriteHtmlCache Behavior ::run [ RunTime:0.013001s ]
INFO: ShowRuntime Behavior ::run [ RunTime:0.031002s ]
INFO: [ view_filter ] --END-- [ RunTime:0.116006s ]
INFO: [ view_end ] --START--
INFO: ShowPageTrace Behavior ::run [ RunTime:0.019002s ]
INFO: [ view_end ] --END-- [ RunTime:0.031002s ]

[ 2014-08-12T15:57:53+08:00 ] 127.0.0.1 /php_demo/shizhan/10/10wish/index.php/Test/Map/route
INFO: [ route_check ] --START--
INFO: CheckRoute Behavior ::run [ RunTime:0.013000s ]
INFO: [ route_check ] --END-- [ RunTime:0.024002s ]
INFO: [ app_begin ] --START--
INFO: ReadHtmlCache Behavior ::run [ RunTime:0.018001s ]
INFO: [ app_begin ] --END-- [ RunTime:0.028002s ]
INFO: [ view_parse ] --START--
INFO: ParseTemplate Behavior ::run [ RunTime:0.186011s ]
INFO: [ view_parse ] --END-- [ RunTime:0.196011s ]
INFO: [ view_filter ] --START--
INFO: ContentReplace Behavior ::run [ RunTime:0.021001s ]
INFO: TokenBuild Behavior ::run [ RunTime:0.020001s ]
INFO: WriteHtmlCache Behavior ::run [ RunTime:0.011001s ]
INFO: ShowRuntime Behavior ::run [ RunTime:0.025002s ]
INFO: [ view_filter ] --END-- [ RunTime:0.106006s ]
INFO: [ view_end ] --START--
INFO: ShowPageTrace Behavior ::run [ RunTime:0.017001s ]
INFO: [ view_end ] --END-- [ RunTime:0.028001s ]

[ 2014-08-12T16:01:33+08:00 ] 127.0.0.1 /php_demo/shizhan/10/10wish/index.php/Test/Map/route
INFO: [ route_check ] --START--
INFO: CheckRoute Behavior ::run [ RunTime:0.016001s ]
INFO: [ route_check ] --END-- [ RunTime:0.027002s ]
INFO: [ app_begin ] --START--
INFO: ReadHtmlCache Behavior ::run [ RunTime:0.019001s ]
INFO: [ app_begin ] --END-- [ RunTime:0.028002s ]
INFO: [ view_parse ] --START--
INFO: ParseTemplate Behavior ::run [ RunTime:0.179010s ]
INFO: [ view_parse ] --END-- [ RunTime:0.199012s ]
INFO: [ view_filter ] --START--
INFO: ContentReplace Behavior ::run [ RunTime:0.015000s ]
INFO: TokenBuild Behavior ::run [ RunTime:0.025001s ]
INFO: WriteHtmlCache Behavior ::run [ RunTime:0.014001s ]
INFO: ShowRuntime Behavior ::run [ RunTime:0.027001s ]
INFO: [ view_filter ] --END-- [ RunTime:0.112007s ]
INFO: [ view_end ] --START--
INFO: ShowPageTrace Behavior ::run [ RunTime:0.017001s ]
INFO: [ view_end ] --END-- [ RunTime:0.027002s ]

[ 2014-08-12T16:01:43+08:00 ] 127.0.0.1 /php_demo/shizhan/10/10wish/index.php/Test/Map/route
INFO: [ route_check ] --START--
INFO: CheckRoute Behavior ::run [ RunTime:0.018001s ]
INFO: [ route_check ] --END-- [ RunTime:0.034002s ]
INFO: [ app_begin ] --START--
INFO: ReadHtmlCache Behavior ::run [ RunTime:0.021001s ]
INFO: [ app_begin ] --END-- [ RunTime:0.035002s ]
INFO: [ view_parse ] --START--
INFO: ParseTemplate Behavior ::run [ RunTime:0.216013s ]
INFO: [ view_parse ] --END-- [ RunTime:0.229013s ]
INFO: [ view_filter ] --START--
INFO: ContentReplace Behavior ::run [ RunTime:0.019001s ]
INFO: TokenBuild Behavior ::run [ RunTime:0.021001s ]
INFO: WriteHtmlCache Behavior ::run [ RunTime:0.009001s ]
INFO: ShowRuntime Behavior ::run [ RunTime:0.024001s ]
INFO: [ view_filter ] --END-- [ RunTime:0.102006s ]
INFO: [ view_end ] --START--
INFO: ShowPageTrace Behavior ::run [ RunTime:0.017001s ]
INFO: [ view_end ] --END-- [ RunTime:0.030002s ]

[ 2014-08-12T16:02:11+08:00 ] 127.0.0.1 /php_demo/shizhan/10/10wish/index.php/Test/Map/route
INFO: [ route_check ] --START--
INFO: CheckRoute Behavior ::run [ RunTime:0.016001s ]
INFO: [ route_check ] --END-- [ RunTime:0.028001s ]
INFO: [ app_begin ] --START--
INFO: ReadHtmlCache Behavior ::run [ RunTime:0.023001s ]
INFO: [ app_begin ] --END-- [ RunTime:0.033002s ]
INFO: [ view_parse ] --START--
INFO: ParseTemplate Behavior ::run [ RunTime:0.207011s ]
INFO: [ view_parse ] --END-- [ RunTime:0.223013s ]
INFO: [ view_filter ] --START--
INFO: ContentReplace Behavior ::run [ RunTime:0.013001s ]
INFO: TokenBuild Behavior ::run [ RunTime:0.018001s ]
INFO: WriteHtmlCache Behavior ::run [ RunTime:0.012001s ]
INFO: ShowRuntime Behavior ::run [ RunTime:0.028002s ]
INFO: [ view_filter ] --END-- [ RunTime:0.102006s ]
INFO: [ view_end ] --START--
INFO: ShowPageTrace Behavior ::run [ RunTime:0.016001s ]
INFO: [ view_end ] --END-- [ RunTime:0.026001s ]

[ 2014-08-12T16:02:40+08:00 ] 127.0.0.1 /php_demo/shizhan/10/10wish/index.php/Test/Map/route
INFO: [ route_check ] --START--
INFO: CheckRoute Behavior ::run [ RunTime:0.015001s ]
INFO: [ route_check ] --END-- [ RunTime:0.026001s ]
INFO: [ app_begin ] --START--
INFO: ReadHtmlCache Behavior ::run [ RunTime:0.020002s ]
INFO: [ app_begin ] --END-- [ RunTime:0.032002s ]
INFO: [ view_parse ] --START--
INFO: ParseTemplate Behavior ::run [ RunTime:0.180010s ]
INFO: [ view_parse ] --END-- [ RunTime:0.195012s ]
INFO: [ view_filter ] --START--
INFO: ContentReplace Behavior ::run [ RunTime:0.015000s ]
INFO: TokenBuild Behavior ::run [ RunTime:0.017001s ]
INFO: WriteHtmlCache Behavior ::run [ RunTime:0.010001s ]
INFO: ShowRuntime Behavior ::run [ RunTime:0.032002s ]
INFO: [ view_filter ] --END-- [ RunTime:0.107006s ]
INFO: [ view_end ] --START--
INFO: ShowPageTrace Behavior ::run [ RunTime:0.017001s ]
INFO: [ view_end ] --END-- [ RunTime:0.030002s ]

[ 2014-08-12T16:04:35+08:00 ] 127.0.0.1 /php_demo/shizhan/10/10wish/index.php/Test/Map/route
INFO: [ route_check ] --START--
INFO: CheckRoute Behavior ::run [ RunTime:0.018001s ]
INFO: [ route_check ] --END-- [ RunTime:0.034002s ]
INFO: [ app_begin ] --START--
INFO: ReadHtmlCache Behavior ::run [ RunTime:0.020001s ]
INFO: [ app_begin ] --END-- [ RunTime:0.032001s ]
INFO: [ view_parse ] --START--
INFO: ParseTemplate Behavior ::run [ RunTime:0.387022s ]
INFO: [ view_parse ] --END-- [ RunTime:0.405023s ]
INFO: [ view_filter ] --START--
INFO: ContentReplace Behavior ::run [ RunTime:0.025002s ]
INFO: TokenBuild Behavior ::run [ RunTime:0.037002s ]
INFO: WriteHtmlCache Behavior ::run [ RunTime:0.011001s ]
INFO: ShowRuntime Behavior ::run [ RunTime:0.022002s ]
INFO: [ view_filter ] --END-- [ RunTime:0.172010s ]
INFO: [ view_end ] --START--
INFO: ShowPageTrace Behavior ::run [ RunTime:0.015001s ]
INFO: [ view_end ] --END-- [ RunTime:0.023001s ]

[ 2014-08-12T16:04:35+08:00 ] 127.0.0.1 /php_demo/shizhan/10/10wish/index.php/Test/Map/route
INFO: [ route_check ] --START--
INFO: CheckRoute Behavior ::run [ RunTime:0.025002s ]
INFO: [ route_check ] --END-- [ RunTime:0.044002s ]
INFO: [ app_begin ] --START--
INFO: ReadHtmlCache Behavior ::run [ RunTime:0.078004s ]
INFO: [ app_begin ] --END-- [ RunTime:0.098006s ]
INFO: [ view_parse ] --START--
INFO: ParseTemplate Behavior ::run [ RunTime:0.234014s ]
INFO: [ view_parse ] --END-- [ RunTime:0.244014s ]
INFO: [ view_filter ] --START--
INFO: ContentReplace Behavior ::run [ RunTime:0.014000s ]
INFO: TokenBuild Behavior ::run [ RunTime:0.028001s ]
INFO: WriteHtmlCache Behavior ::run [ RunTime:0.009000s ]
INFO: ShowRuntime Behavior ::run [ RunTime:0.020001s ]
INFO: [ view_filter ] --END-- [ RunTime:0.100006s ]
INFO: [ view_end ] --START--
INFO: ShowPageTrace Behavior ::run [ RunTime:0.115006s ]
INFO: [ view_end ] --END-- [ RunTime:0.126007s ]

[ 2014-08-12T16:06:31+08:00 ] 127.0.0.1 /php_demo/shizhan/10/10wish/index.php/Test/Map/route
INFO: [ route_check ] --START--
INFO: CheckRoute Behavior ::run [ RunTime:0.030001s ]
INFO: [ route_check ] --END-- [ RunTime:0.046003s ]
INFO: [ app_begin ] --START--
INFO: ReadHtmlCache Behavior ::run [ RunTime:0.022002s ]
INFO: [ app_begin ] --END-- [ RunTime:0.034002s ]
INFO: [ view_parse ] --START--
INFO: ParseTemplate Behavior ::run [ RunTime:0.252014s ]
INFO: [ view_parse ] --END-- [ RunTime:0.263015s ]
INFO: [ view_filter ] --START--
INFO: ContentReplace Behavior ::run [ RunTime:0.018001s ]
INFO: TokenBuild Behavior ::run [ RunTime:0.019001s ]
INFO: WriteHtmlCache Behavior ::run [ RunTime:0.013001s ]
INFO: ShowRuntime Behavior ::run [ RunTime:0.030002s ]
INFO: [ view_filter ] --END-- [ RunTime:0.111006s ]
INFO: [ view_end ] --START--
INFO: ShowPageTrace Behavior ::run [ RunTime:0.020002s ]
INFO: [ view_end ] --END-- [ RunTime:0.038002s ]

[ 2014-08-12T16:06:47+08:00 ] 127.0.0.1 /php_demo/shizhan/10/10wish/index.php/Test/Map/route
INFO: [ route_check ] --START--
INFO: CheckRoute Behavior ::run [ RunTime:0.015001s ]
INFO: [ route_check ] --END-- [ RunTime:0.026002s ]
INFO: [ app_begin ] --START--
INFO: ReadHtmlCache Behavior ::run [ RunTime:0.024002s ]
INFO: [ app_begin ] --END-- [ RunTime:0.046003s ]
INFO: [ view_parse ] --START--
INFO: ParseTemplate Behavior ::run [ RunTime:0.228013s ]
INFO: [ view_parse ] --END-- [ RunTime:0.243014s ]
INFO: [ view_filter ] --START--
INFO: ContentReplace Behavior ::run [ RunTime:0.022001s ]
INFO: TokenBuild Behavior ::run [ RunTime:0.022002s ]
INFO: WriteHtmlCache Behavior ::run [ RunTime:0.011001s ]
INFO: ShowRuntime Behavior ::run [ RunTime:0.037002s ]
INFO: [ view_filter ] --END-- [ RunTime:0.125008s ]
INFO: [ view_end ] --START--
INFO: ShowPageTrace Behavior ::run [ RunTime:0.016001s ]
INFO: [ view_end ] --END-- [ RunTime:0.028002s ]

[ 2014-08-12T16:07:53+08:00 ] 127.0.0.1 /php_demo/shizhan/10/10wish/index.php/Test/Map/route
INFO: [ route_check ] --START--
INFO: CheckRoute Behavior ::run [ RunTime:0.017001s ]
INFO: [ route_check ] --END-- [ RunTime:0.027002s ]
INFO: [ app_begin ] --START--
INFO: ReadHtmlCache Behavior ::run [ RunTime:0.018001s ]
INFO: [ app_begin ] --END-- [ RunTime:0.029002s ]
INFO: [ view_parse ] --START--
INFO: ParseTemplate Behavior ::run [ RunTime:0.181010s ]
INFO: [ view_parse ] --END-- [ RunTime:0.194011s ]
INFO: [ view_filter ] --START--
INFO: ContentReplace Behavior ::run [ RunTime:0.018001s ]
INFO: TokenBuild Behavior ::run [ RunTime:0.024001s ]
INFO: WriteHtmlCache Behavior ::run [ RunTime:0.012001s ]
INFO: ShowRuntime Behavior ::run [ RunTime:0.024001s ]
INFO: [ view_filter ] --END-- [ RunTime:0.113007s ]
INFO: [ view_end ] --START--
INFO: ShowPageTrace Behavior ::run [ RunTime:0.016001s ]
INFO: [ view_end ] --END-- [ RunTime:0.029002s ]

[ 2014-08-12T16:08:21+08:00 ] 127.0.0.1 /php_demo/shizhan/10/10wish/index.php/Test/Map/route
INFO: [ route_check ] --START--
INFO: CheckRoute Behavior ::run [ RunTime:0.013000s ]
INFO: [ route_check ] --END-- [ RunTime:0.022002s ]
INFO: [ app_begin ] --START--
INFO: ReadHtmlCache Behavior ::run [ RunTime:0.017001s ]
INFO: [ app_begin ] --END-- [ RunTime:0.026002s ]
INFO: [ view_parse ] --START--
INFO: ParseTemplate Behavior ::run [ RunTime:0.141008s ]
INFO: [ view_parse ] --END-- [ RunTime:0.152008s ]
INFO: [ view_filter ] --START--
INFO: ContentReplace Behavior ::run [ RunTime:0.011001s ]
INFO: TokenBuild Behavior ::run [ RunTime:0.017001s ]
INFO: WriteHtmlCache Behavior ::run [ RunTime:0.007001s ]
INFO: ShowRuntime Behavior ::run [ RunTime:0.022001s ]
INFO: [ view_filter ] --END-- [ RunTime:0.078004s ]
INFO: [ view_end ] --START--
INFO: ShowPageTrace Behavior ::run [ RunTime:0.013001s ]
INFO: [ view_end ] --END-- [ RunTime:0.023001s ]

[ 2014-08-12T20:12:02+08:00 ] 127.0.0.1 /php_demo/shizhan/10/10wish/index.php/Test/Map/route
INFO: [ route_check ] --START--
INFO: CheckRoute Behavior ::run [ RunTime:0.021002s ]
INFO: [ route_check ] --END-- [ RunTime:0.034002s ]
INFO: [ app_begin ] --START--
INFO: ReadHtmlCache Behavior ::run [ RunTime:0.022001s ]
INFO: [ app_begin ] --END-- [ RunTime:0.035002s ]

[ 2014-08-12T20:17:00+08:00 ] 127.0.0.1 /php_demo/shizhan/10/10wish/index.php/Test/Map/route
INFO: [ route_check ] --START--
INFO: CheckRoute Behavior ::run [ RunTime:0.018001s ]
INFO: [ route_check ] --END-- [ RunTime:0.041002s ]
INFO: [ app_begin ] --START--
INFO: ReadHtmlCache Behavior ::run [ RunTime:0.018001s ]
INFO: [ app_begin ] --END-- [ RunTime:0.027001s ]

[ 2014-08-12T20:17:17+08:00 ] 127.0.0.1 /php_demo/shizhan/10/10wish/index.php/Test/Map/route
INFO: [ route_check ] --START--
INFO: CheckRoute Behavior ::run [ RunTime:0.018001s ]
INFO: [ route_check ] --END-- [ RunTime:0.034002s ]
INFO: [ app_begin ] --START--
INFO: ReadHtmlCache Behavior ::run [ RunTime:0.020001s ]
INFO: [ app_begin ] --END-- [ RunTime:0.032002s ]
INFO: [ view_parse ] --START--
INFO: ParseTemplate Behavior ::run [ RunTime:0.336019s ]
INFO: [ view_parse ] --END-- [ RunTime:0.359020s ]
INFO: [ view_filter ] --START--
INFO: ContentReplace Behavior ::run [ RunTime:0.027001s ]
INFO: TokenBuild Behavior ::run [ RunTime:0.034002s ]
INFO: WriteHtmlCache Behavior ::run [ RunTime:0.014001s ]
INFO: ShowRuntime Behavior ::run [ RunTime:0.044002s ]
INFO: [ view_filter ] --END-- [ RunTime:0.166010s ]
NOTIC: [2] Cannot modify header information - headers already sent by (output started at D:\Dropbox-List\Net\Dropbox\WebDev\xampp\htdocs\php_demo\shizhan\10\10wish\APP\Lib\Action\Test\MapAction.class.php:20) D:\Dropbox-List\Net\Dropbox\WebDev\xampp\htdocs\php_demo\shizhan\10\10wish\ThinkPHP\Lib\Core\View.class.php 第 95 行.
NOTIC: [2] Cannot modify header information - headers already sent by (output started at D:\Dropbox-List\Net\Dropbox\WebDev\xampp\htdocs\php_demo\shizhan\10\10wish\APP\Lib\Action\Test\MapAction.class.php:20) D:\Dropbox-List\Net\Dropbox\WebDev\xampp\htdocs\php_demo\shizhan\10\10wish\ThinkPHP\Lib\Core\View.class.php 第 96 行.
NOTIC: [2] Cannot modify header information - headers already sent by (output started at D:\Dropbox-List\Net\Dropbox\WebDev\xampp\htdocs\php_demo\shizhan\10\10wish\APP\Lib\Action\Test\MapAction.class.php:20) D:\Dropbox-List\Net\Dropbox\WebDev\xampp\htdocs\php_demo\shizhan\10\10wish\ThinkPHP\Lib\Core\View.class.php 第 97 行.
INFO: [ view_end ] --START--
INFO: ShowPageTrace Behavior ::run [ RunTime:0.026001s ]
INFO: [ view_end ] --END-- [ RunTime:0.040002s ]

[ 2014-08-12T20:19:22+08:00 ] 127.0.0.1 /php_demo/shizhan/10/10wish/index.php/Test/Map/route
INFO: [ route_check ] --START--
INFO: CheckRoute Behavior ::run [ RunTime:0.014001s ]
INFO: [ route_check ] --END-- [ RunTime:0.027001s ]
INFO: [ app_begin ] --START--
INFO: ReadHtmlCache Behavior ::run [ RunTime:0.018001s ]
INFO: [ app_begin ] --END-- [ RunTime:0.030002s ]
INFO: [ view_parse ] --START--
INFO: ParseTemplate Behavior ::run [ RunTime:0.178010s ]
INFO: [ view_parse ] --END-- [ RunTime:0.198011s ]
INFO: [ view_filter ] --START--
INFO: ContentReplace Behavior ::run [ RunTime:0.026002s ]
INFO: TokenBuild Behavior ::run [ RunTime:0.023001s ]
INFO: WriteHtmlCache Behavior ::run [ RunTime:0.013000s ]
INFO: ShowRuntime Behavior ::run [ RunTime:0.027001s ]
INFO: [ view_filter ] --END-- [ RunTime:0.117006s ]
NOTIC: [2] Cannot modify header information - headers already sent by (output started at D:\Dropbox-List\Net\Dropbox\WebDev\xampp\htdocs\php_demo\shizhan\10\10wish\APP\Lib\Action\Test\MapAction.class.php:20) D:\Dropbox-List\Net\Dropbox\WebDev\xampp\htdocs\php_demo\shizhan\10\10wish\ThinkPHP\Lib\Core\View.class.php 第 95 行.
NOTIC: [2] Cannot modify header information - headers already sent by (output started at D:\Dropbox-List\Net\Dropbox\WebDev\xampp\htdocs\php_demo\shizhan\10\10wish\APP\Lib\Action\Test\MapAction.class.php:20) D:\Dropbox-List\Net\Dropbox\WebDev\xampp\htdocs\php_demo\shizhan\10\10wish\ThinkPHP\Lib\Core\View.class.php 第 96 行.
NOTIC: [2] Cannot modify header information - headers already sent by (output started at D:\Dropbox-List\Net\Dropbox\WebDev\xampp\htdocs\php_demo\shizhan\10\10wish\APP\Lib\Action\Test\MapAction.class.php:20) D:\Dropbox-List\Net\Dropbox\WebDev\xampp\htdocs\php_demo\shizhan\10\10wish\ThinkPHP\Lib\Core\View.class.php 第 97 行.
INFO: [ view_end ] --START--
INFO: ShowPageTrace Behavior ::run [ RunTime:0.017001s ]
INFO: [ view_end ] --END-- [ RunTime:0.027001s ]

[ 2014-08-12T20:23:39+08:00 ] 127.0.0.1 /php_demo/shizhan/10/10wish/index.php/Test/Map/route
INFO: [ route_check ] --START--
INFO: CheckRoute Behavior ::run [ RunTime:0.019001s ]
INFO: [ route_check ] --END-- [ RunTime:0.031002s ]
INFO: [ app_begin ] --START--
INFO: ReadHtmlCache Behavior ::run [ RunTime:0.026002s ]
INFO: [ app_begin ] --END-- [ RunTime:0.036002s ]
INFO: [ view_parse ] --START--
INFO: ParseTemplate Behavior ::run [ RunTime:0.373021s ]
INFO: [ view_parse ] --END-- [ RunTime:0.395023s ]
INFO: [ view_filter ] --START--
INFO: ContentReplace Behavior ::run [ RunTime:0.022001s ]
INFO: TokenBuild Behavior ::run [ RunTime:0.019001s ]
INFO: WriteHtmlCache Behavior ::run [ RunTime:0.011001s ]
INFO: ShowRuntime Behavior ::run [ RunTime:0.028001s ]
INFO: [ view_filter ] --END-- [ RunTime:0.118006s ]
NOTIC: [2] Cannot modify header information - headers already sent by (output started at D:\Dropbox-List\Net\Dropbox\WebDev\xampp\htdocs\php_demo\shizhan\10\10wish\APP\Lib\Action\Test\MapAction.class.php:20) D:\Dropbox-List\Net\Dropbox\WebDev\xampp\htdocs\php_demo\shizhan\10\10wish\ThinkPHP\Lib\Core\View.class.php 第 95 行.
NOTIC: [2] Cannot modify header information - headers already sent by (output started at D:\Dropbox-List\Net\Dropbox\WebDev\xampp\htdocs\php_demo\shizhan\10\10wish\APP\Lib\Action\Test\MapAction.class.php:20) D:\Dropbox-List\Net\Dropbox\WebDev\xampp\htdocs\php_demo\shizhan\10\10wish\ThinkPHP\Lib\Core\View.class.php 第 96 行.
NOTIC: [2] Cannot modify header information - headers already sent by (output started at D:\Dropbox-List\Net\Dropbox\WebDev\xampp\htdocs\php_demo\shizhan\10\10wish\APP\Lib\Action\Test\MapAction.class.php:20) D:\Dropbox-List\Net\Dropbox\WebDev\xampp\htdocs\php_demo\shizhan\10\10wish\ThinkPHP\Lib\Core\View.class.php 第 97 行.
INFO: [ view_end ] --START--
INFO: ShowPageTrace Behavior ::run [ RunTime:0.015001s ]
INFO: [ view_end ] --END-- [ RunTime:0.024001s ]

[ 2014-08-12T20:25:45+08:00 ] 127.0.0.1 /php_demo/shizhan/10/10wish/index.php/Test/Map/route
INFO: [ route_check ] --START--
INFO: CheckRoute Behavior ::run [ RunTime:0.018001s ]
INFO: [ route_check ] --END-- [ RunTime:0.030001s ]
INFO: [ app_begin ] --START--
INFO: ReadHtmlCache Behavior ::run [ RunTime:0.024001s ]
INFO: [ app_begin ] --END-- [ RunTime:0.035002s ]
INFO: [ view_parse ] --START--
INFO: ParseTemplate Behavior ::run [ RunTime:0.405023s ]
INFO: [ view_parse ] --END-- [ RunTime:0.423024s ]
INFO: [ view_filter ] --START--
INFO: ContentReplace Behavior ::run [ RunTime:0.027002s ]
INFO: TokenBuild Behavior ::run [ RunTime:0.040003s ]
INFO: WriteHtmlCache Behavior ::run [ RunTime:0.011001s ]
INFO: ShowRuntime Behavior ::run [ RunTime:0.048003s ]
INFO: [ view_filter ] --END-- [ RunTime:0.183011s ]
NOTIC: [2] Cannot modify header information - headers already sent by (output started at D:\Dropbox-List\Net\Dropbox\WebDev\xampp\htdocs\php_demo\shizhan\10\10wish\APP\Lib\Action\Test\MapAction.class.php:20) D:\Dropbox-List\Net\Dropbox\WebDev\xampp\htdocs\php_demo\shizhan\10\10wish\ThinkPHP\Lib\Core\View.class.php 第 95 行.
NOTIC: [2] Cannot modify header information - headers already sent by (output started at D:\Dropbox-List\Net\Dropbox\WebDev\xampp\htdocs\php_demo\shizhan\10\10wish\APP\Lib\Action\Test\MapAction.class.php:20) D:\Dropbox-List\Net\Dropbox\WebDev\xampp\htdocs\php_demo\shizhan\10\10wish\ThinkPHP\Lib\Core\View.class.php 第 96 行.
NOTIC: [2] Cannot modify header information - headers already sent by (output started at D:\Dropbox-List\Net\Dropbox\WebDev\xampp\htdocs\php_demo\shizhan\10\10wish\APP\Lib\Action\Test\MapAction.class.php:20) D:\Dropbox-List\Net\Dropbox\WebDev\xampp\htdocs\php_demo\shizhan\10\10wish\ThinkPHP\Lib\Core\View.class.php 第 97 行.
INFO: [ view_end ] --START--
INFO: ShowPageTrace Behavior ::run [ RunTime:0.027002s ]
INFO: [ view_end ] --END-- [ RunTime:0.042002s ]

[ 2014-08-12T20:27:00+08:00 ] 127.0.0.1 /php_demo/shizhan/10/10wish/index.php/Test/Map/route
INFO: [ route_check ] --START--
INFO: CheckRoute Behavior ::run [ RunTime:0.017001s ]
INFO: [ route_check ] --END-- [ RunTime:0.030002s ]
INFO: [ app_begin ] --START--
INFO: ReadHtmlCache Behavior ::run [ RunTime:0.022002s ]
INFO: [ app_begin ] --END-- [ RunTime:0.035002s ]
INFO: [ view_parse ] --START--
INFO: ParseTemplate Behavior ::run [ RunTime:0.423024s ]
INFO: [ view_parse ] --END-- [ RunTime:0.441025s ]
INFO: [ view_filter ] --START--
INFO: ContentReplace Behavior ::run [ RunTime:0.022001s ]
INFO: TokenBuild Behavior ::run [ RunTime:0.024001s ]
INFO: WriteHtmlCache Behavior ::run [ RunTime:0.014001s ]
INFO: ShowRuntime Behavior ::run [ RunTime:0.041003s ]
INFO: [ view_filter ] --END-- [ RunTime:0.151009s ]
NOTIC: [2] Cannot modify header information - headers already sent by (output started at D:\Dropbox-List\Net\Dropbox\WebDev\xampp\htdocs\php_demo\shizhan\10\10wish\APP\Lib\Action\Test\MapAction.class.php:20) D:\Dropbox-List\Net\Dropbox\WebDev\xampp\htdocs\php_demo\shizhan\10\10wish\ThinkPHP\Lib\Core\View.class.php 第 95 行.
NOTIC: [2] Cannot modify header information - headers already sent by (output started at D:\Dropbox-List\Net\Dropbox\WebDev\xampp\htdocs\php_demo\shizhan\10\10wish\APP\Lib\Action\Test\MapAction.class.php:20) D:\Dropbox-List\Net\Dropbox\WebDev\xampp\htdocs\php_demo\shizhan\10\10wish\ThinkPHP\Lib\Core\View.class.php 第 96 行.
NOTIC: [2] Cannot modify header information - headers already sent by (output started at D:\Dropbox-List\Net\Dropbox\WebDev\xampp\htdocs\php_demo\shizhan\10\10wish\APP\Lib\Action\Test\MapAction.class.php:20) D:\Dropbox-List\Net\Dropbox\WebDev\xampp\htdocs\php_demo\shizhan\10\10wish\ThinkPHP\Lib\Core\View.class.php 第 97 行.
INFO: [ view_end ] --START--
INFO: ShowPageTrace Behavior ::run [ RunTime:0.024001s ]
INFO: [ view_end ] --END-- [ RunTime:0.039003s ]

[ 2014-08-12T20:27:34+08:00 ] 127.0.0.1 /php_demo/shizhan/10/10wish/index.php/Test/Map/route
INFO: [ route_check ] --START--
INFO: CheckRoute Behavior ::run [ RunTime:0.018001s ]
INFO: [ route_check ] --END-- [ RunTime:0.032002s ]
INFO: [ app_begin ] --START--
INFO: ReadHtmlCache Behavior ::run [ RunTime:0.024001s ]
INFO: [ app_begin ] --END-- [ RunTime:0.037002s ]
INFO: [ view_parse ] --START--
INFO: ParseTemplate Behavior ::run [ RunTime:0.393023s ]
INFO: [ view_parse ] --END-- [ RunTime:0.423025s ]
INFO: [ view_filter ] --START--
INFO: ContentReplace Behavior ::run [ RunTime:0.020001s ]
INFO: TokenBuild Behavior ::run [ RunTime:0.029002s ]
INFO: WriteHtmlCache Behavior ::run [ RunTime:0.014001s ]
INFO: ShowRuntime Behavior ::run [ RunTime:0.041002s ]
INFO: [ view_filter ] --END-- [ RunTime:0.146009s ]
NOTIC: [2] Cannot modify header information - headers already sent by (output started at D:\Dropbox-List\Net\Dropbox\WebDev\xampp\htdocs\php_demo\shizhan\10\10wish\APP\Lib\Action\Test\MapAction.class.php:20) D:\Dropbox-List\Net\Dropbox\WebDev\xampp\htdocs\php_demo\shizhan\10\10wish\ThinkPHP\Lib\Core\View.class.php 第 95 行.
NOTIC: [2] Cannot modify header information - headers already sent by (output started at D:\Dropbox-List\Net\Dropbox\WebDev\xampp\htdocs\php_demo\shizhan\10\10wish\APP\Lib\Action\Test\MapAction.class.php:20) D:\Dropbox-List\Net\Dropbox\WebDev\xampp\htdocs\php_demo\shizhan\10\10wish\ThinkPHP\Lib\Core\View.class.php 第 96 行.
NOTIC: [2] Cannot modify header information - headers already sent by (output started at D:\Dropbox-List\Net\Dropbox\WebDev\xampp\htdocs\php_demo\shizhan\10\10wish\APP\Lib\Action\Test\MapAction.class.php:20) D:\Dropbox-List\Net\Dropbox\WebDev\xampp\htdocs\php_demo\shizhan\10\10wish\ThinkPHP\Lib\Core\View.class.php 第 97 行.
INFO: [ view_end ] --START--
INFO: ShowPageTrace Behavior ::run [ RunTime:0.026002s ]
INFO: [ view_end ] --END-- [ RunTime:0.057003s ]

[ 2014-08-12T20:28:41+08:00 ] 127.0.0.1 /php_demo/shizhan/10/10wish/index.php/Test/Map/route
INFO: [ route_check ] --START--
INFO: CheckRoute Behavior ::run [ RunTime:0.014001s ]
INFO: [ route_check ] --END-- [ RunTime:0.025002s ]
INFO: [ app_begin ] --START--
INFO: ReadHtmlCache Behavior ::run [ RunTime:0.020001s ]
INFO: [ app_begin ] --END-- [ RunTime:0.030002s ]
INFO: [ view_parse ] --START--
INFO: ParseTemplate Behavior ::run [ RunTime:0.317018s ]
INFO: [ view_parse ] --END-- [ RunTime:0.329019s ]
INFO: [ view_filter ] --START--
INFO: ContentReplace Behavior ::run [ RunTime:0.013001s ]
INFO: TokenBuild Behavior ::run [ RunTime:0.017001s ]
INFO: WriteHtmlCache Behavior ::run [ RunTime:0.016000s ]
INFO: ShowRuntime Behavior ::run [ RunTime:0.036002s ]
INFO: [ view_filter ] --END-- [ RunTime:0.114006s ]
NOTIC: [2] Cannot modify header information - headers already sent by (output started at D:\Dropbox-List\Net\Dropbox\WebDev\xampp\htdocs\php_demo\shizhan\10\10wish\APP\Lib\Action\Test\MapAction.class.php:20) D:\Dropbox-List\Net\Dropbox\WebDev\xampp\htdocs\php_demo\shizhan\10\10wish\ThinkPHP\Lib\Core\View.class.php 第 95 行.
NOTIC: [2] Cannot modify header information - headers already sent by (output started at D:\Dropbox-List\Net\Dropbox\WebDev\xampp\htdocs\php_demo\shizhan\10\10wish\APP\Lib\Action\Test\MapAction.class.php:20) D:\Dropbox-List\Net\Dropbox\WebDev\xampp\htdocs\php_demo\shizhan\10\10wish\ThinkPHP\Lib\Core\View.class.php 第 96 行.
NOTIC: [2] Cannot modify header information - headers already sent by (output started at D:\Dropbox-List\Net\Dropbox\WebDev\xampp\htdocs\php_demo\shizhan\10\10wish\APP\Lib\Action\Test\MapAction.class.php:20) D:\Dropbox-List\Net\Dropbox\WebDev\xampp\htdocs\php_demo\shizhan\10\10wish\ThinkPHP\Lib\Core\View.class.php 第 97 行.
INFO: [ view_end ] --START--
INFO: ShowPageTrace Behavior ::run [ RunTime:0.015000s ]
INFO: [ view_end ] --END-- [ RunTime:0.028002s ]

[ 2014-08-12T20:30:39+08:00 ] 127.0.0.1 /php_demo/shizhan/10/10wish/index.php/Test/Map/route
INFO: [ route_check ] --START--
INFO: CheckRoute Behavior ::run [ RunTime:0.014001s ]
INFO: [ route_check ] --END-- [ RunTime:0.026001s ]
INFO: [ app_begin ] --START--
INFO: ReadHtmlCache Behavior ::run [ RunTime:0.022001s ]
INFO: [ app_begin ] --END-- [ RunTime:0.036003s ]
INFO: [ view_parse ] --START--
INFO: ParseTemplate Behavior ::run [ RunTime:0.430025s ]
INFO: [ view_parse ] --END-- [ RunTime:0.457026s ]
INFO: [ view_filter ] --START--
INFO: ContentReplace Behavior ::run [ RunTime:0.026002s ]
INFO: TokenBuild Behavior ::run [ RunTime:0.029002s ]
INFO: WriteHtmlCache Behavior ::run [ RunTime:0.013001s ]
INFO: ShowRuntime Behavior ::run [ RunTime:0.034002s ]
INFO: [ view_filter ] --END-- [ RunTime:0.143008s ]
NOTIC: [2] Cannot modify header information - headers already sent by (output started at D:\Dropbox-List\Net\Dropbox\WebDev\xampp\htdocs\php_demo\shizhan\10\10wish\APP\Lib\Action\Test\MapAction.class.php:20) D:\Dropbox-List\Net\Dropbox\WebDev\xampp\htdocs\php_demo\shizhan\10\10wish\ThinkPHP\Lib\Core\View.class.php 第 95 行.
NOTIC: [2] Cannot modify header information - headers already sent by (output started at D:\Dropbox-List\Net\Dropbox\WebDev\xampp\htdocs\php_demo\shizhan\10\10wish\APP\Lib\Action\Test\MapAction.class.php:20) D:\Dropbox-List\Net\Dropbox\WebDev\xampp\htdocs\php_demo\shizhan\10\10wish\ThinkPHP\Lib\Core\View.class.php 第 96 行.
NOTIC: [2] Cannot modify header information - headers already sent by (output started at D:\Dropbox-List\Net\Dropbox\WebDev\xampp\htdocs\php_demo\shizhan\10\10wish\APP\Lib\Action\Test\MapAction.class.php:20) D:\Dropbox-List\Net\Dropbox\WebDev\xampp\htdocs\php_demo\shizhan\10\10wish\ThinkPHP\Lib\Core\View.class.php 第 97 行.
INFO: [ view_end ] --START--
INFO: ShowPageTrace Behavior ::run [ RunTime:0.019001s ]
INFO: [ view_end ] --END-- [ RunTime:0.030002s ]

[ 2014-08-12T20:31:47+08:00 ] 127.0.0.1 /php_demo/shizhan/10/10wish/index.php/Test/Map/route
INFO: [ route_check ] --START--
INFO: CheckRoute Behavior ::run [ RunTime:0.016001s ]
INFO: [ route_check ] --END-- [ RunTime:0.031001s ]
INFO: [ app_begin ] --START--
INFO: ReadHtmlCache Behavior ::run [ RunTime:0.025001s ]
INFO: [ app_begin ] --END-- [ RunTime:0.037002s ]
INFO: [ view_parse ] --START--
INFO: ParseTemplate Behavior ::run [ RunTime:0.434025s ]
INFO: [ view_parse ] --END-- [ RunTime:0.459026s ]
INFO: [ view_filter ] --START--
INFO: ContentReplace Behavior ::run [ RunTime:0.037002s ]
INFO: TokenBuild Behavior ::run [ RunTime:0.039002s ]
INFO: WriteHtmlCache Behavior ::run [ RunTime:0.015001s ]
INFO: ShowRuntime Behavior ::run [ RunTime:0.060004s ]
INFO: [ view_filter ] --END-- [ RunTime:0.215012s ]
NOTIC: [2] Cannot modify header information - headers already sent by (output started at D:\Dropbox-List\Net\Dropbox\WebDev\xampp\htdocs\php_demo\shizhan\10\10wish\APP\Lib\Action\Test\MapAction.class.php:20) D:\Dropbox-List\Net\Dropbox\WebDev\xampp\htdocs\php_demo\shizhan\10\10wish\ThinkPHP\Lib\Core\View.class.php 第 95 行.
NOTIC: [2] Cannot modify header information - headers already sent by (output started at D:\Dropbox-List\Net\Dropbox\WebDev\xampp\htdocs\php_demo\shizhan\10\10wish\APP\Lib\Action\Test\MapAction.class.php:20) D:\Dropbox-List\Net\Dropbox\WebDev\xampp\htdocs\php_demo\shizhan\10\10wish\ThinkPHP\Lib\Core\View.class.php 第 96 行.
NOTIC: [2] Cannot modify header information - headers already sent by (output started at D:\Dropbox-List\Net\Dropbox\WebDev\xampp\htdocs\php_demo\shizhan\10\10wish\APP\Lib\Action\Test\MapAction.class.php:20) D:\Dropbox-List\Net\Dropbox\WebDev\xampp\htdocs\php_demo\shizhan\10\10wish\ThinkPHP\Lib\Core\View.class.php 第 97 行.
INFO: [ view_end ] --START--
INFO: ShowPageTrace Behavior ::run [ RunTime:0.029002s ]
INFO: [ view_end ] --END-- [ RunTime:0.042002s ]

[ 2014-08-12T21:31:30+08:00 ] 127.0.0.1 /php_demo/shizhan/10/10wish/index.php/Test/Map/route
INFO: [ route_check ] --START--
INFO: CheckRoute Behavior ::run [ RunTime:0.021002s ]
INFO: [ route_check ] --END-- [ RunTime:0.036002s ]
INFO: [ app_begin ] --START--
INFO: ReadHtmlCache Behavior ::run [ RunTime:0.016001s ]
INFO: [ app_begin ] --END-- [ RunTime:0.025002s ]
NOTIC: [8] Undefined variable: json D:\Dropbox-List\Net\Dropbox\WebDev\xampp\htdocs\php_demo\shizhan\10\10wish\APP\Lib\Action\Test\MapAction.class.php 第 22 行.

[ 2014-08-12T21:31:51+08:00 ] 127.0.0.1 /php_demo/shizhan/10/10wish/index.php/Test/Map/route
INFO: [ route_check ] --START--
INFO: CheckRoute Behavior ::run [ RunTime:0.026001s ]
INFO: [ route_check ] --END-- [ RunTime:0.039003s ]
INFO: [ app_begin ] --START--
INFO: ReadHtmlCache Behavior ::run [ RunTime:0.025001s ]
INFO: [ app_begin ] --END-- [ RunTime:0.043003s ]
NOTIC: [8] Undefined variable: json D:\Dropbox-List\Net\Dropbox\WebDev\xampp\htdocs\php_demo\shizhan\10\10wish\APP\Lib\Action\Test\MapAction.class.php 第 22 行.

[ 2014-08-12T21:33:08+08:00 ] 127.0.0.1 /php_demo/shizhan/10/10wish/index.php/Test/Map/route
INFO: [ route_check ] --START--
INFO: CheckRoute Behavior ::run [ RunTime:0.017001s ]
INFO: [ route_check ] --END-- [ RunTime:0.029002s ]
INFO: [ app_begin ] --START--
INFO: ReadHtmlCache Behavior ::run [ RunTime:0.015001s ]
INFO: [ app_begin ] --END-- [ RunTime:0.024002s ]

[ 2014-08-12T21:33:18+08:00 ] 127.0.0.1 /php_demo/shizhan/10/10wish/index.php/Test/Map/route
INFO: [ route_check ] --START--
INFO: CheckRoute Behavior ::run [ RunTime:0.031002s ]
INFO: [ route_check ] --END-- [ RunTime:0.050002s ]
INFO: [ app_begin ] --START--
INFO: ReadHtmlCache Behavior ::run [ RunTime:0.020001s ]
INFO: [ app_begin ] --END-- [ RunTime:0.033002s ]

[ 2014-08-12T21:33:39+08:00 ] 127.0.0.1 /php_demo/shizhan/10/10wish/index.php/Test/Map/route
INFO: [ route_check ] --START--
INFO: CheckRoute Behavior ::run [ RunTime:0.018001s ]
INFO: [ route_check ] --END-- [ RunTime:0.031002s ]
INFO: [ app_begin ] --START--
INFO: ReadHtmlCache Behavior ::run [ RunTime:0.023001s ]
INFO: [ app_begin ] --END-- [ RunTime:0.035002s ]

[ 2014-08-12T21:34:09+08:00 ] 127.0.0.1 /php_demo/shizhan/10/10wish/index.php/Test/Map/route
INFO: [ route_check ] --START--
INFO: CheckRoute Behavior ::run [ RunTime:0.015001s ]
INFO: [ route_check ] --END-- [ RunTime:0.024001s ]
INFO: [ app_begin ] --START--
INFO: ReadHtmlCache Behavior ::run [ RunTime:0.021002s ]
INFO: [ app_begin ] --END-- [ RunTime:0.034002s ]
NOTIC: [2] Invalid argument supplied for foreach() D:\Dropbox-List\Net\Dropbox\WebDev\xampp\htdocs\php_demo\shizhan\10\10wish\APP\Lib\Action\Test\MapAction.class.php 第 48 行.
INFO: [ view_parse ] --START--
INFO: ParseTemplate Behavior ::run [ RunTime:0.188011s ]
INFO: [ view_parse ] --END-- [ RunTime:0.199011s ]
INFO: [ view_filter ] --START--
INFO: ContentReplace Behavior ::run [ RunTime:0.017001s ]
INFO: TokenBuild Behavior ::run [ RunTime:0.024001s ]
INFO: WriteHtmlCache Behavior ::run [ RunTime:0.010001s ]
INFO: ShowRuntime Behavior ::run [ RunTime:0.029002s ]
INFO: [ view_filter ] --END-- [ RunTime:0.110006s ]
INFO: [ view_end ] --START--
INFO: ShowPageTrace Behavior ::run [ RunTime:0.015001s ]
INFO: [ view_end ] --END-- [ RunTime:0.024001s ]

[ 2014-08-12T21:35:26+08:00 ] 127.0.0.1 /php_demo/shizhan/10/10wish/index.php/Test/Map/route
INFO: [ route_check ] --START--
INFO: CheckRoute Behavior ::run [ RunTime:0.020001s ]
INFO: [ route_check ] --END-- [ RunTime:0.033002s ]
INFO: [ app_begin ] --START--
INFO: ReadHtmlCache Behavior ::run [ RunTime:0.025002s ]
INFO: [ app_begin ] --END-- [ RunTime:0.036002s ]
NOTIC: [2] Invalid argument supplied for foreach() D:\Dropbox-List\Net\Dropbox\WebDev\xampp\htdocs\php_demo\shizhan\10\10wish\APP\Lib\Action\Test\MapAction.class.php 第 48 行.
INFO: [ view_parse ] --START--
INFO: ParseTemplate Behavior ::run [ RunTime:0.241013s ]
INFO: [ view_parse ] --END-- [ RunTime:0.263015s ]
INFO: [ view_filter ] --START--
INFO: ContentReplace Behavior ::run [ RunTime:0.024001s ]
INFO: TokenBuild Behavior ::run [ RunTime:0.038002s ]
INFO: WriteHtmlCache Behavior ::run [ RunTime:0.018001s ]
INFO: ShowRuntime Behavior ::run [ RunTime:0.030002s ]
INFO: [ view_filter ] --END-- [ RunTime:0.149008s ]
INFO: [ view_end ] --START--
INFO: ShowPageTrace Behavior ::run [ RunTime:0.021001s ]
INFO: [ view_end ] --END-- [ RunTime:0.033002s ]

[ 2014-08-12T21:37:25+08:00 ] 127.0.0.1 /php_demo/shizhan/10/10wish/index.php/Test/Map/route
INFO: [ route_check ] --START--
INFO: CheckRoute Behavior ::run [ RunTime:0.016001s ]
INFO: [ route_check ] --END-- [ RunTime:0.026001s ]
INFO: [ app_begin ] --START--
INFO: ReadHtmlCache Behavior ::run [ RunTime:0.021001s ]
INFO: [ app_begin ] --END-- [ RunTime:0.030001s ]

[ 2014-08-12T21:38:44+08:00 ] 127.0.0.1 /php_demo/shizhan/10/10wish/index.php/Test/Map/route
INFO: [ route_check ] --START--
INFO: CheckRoute Behavior ::run [ RunTime:0.017001s ]
INFO: [ route_check ] --END-- [ RunTime:0.029002s ]
INFO: [ app_begin ] --START--
INFO: ReadHtmlCache Behavior ::run [ RunTime:0.023001s ]
INFO: [ app_begin ] --END-- [ RunTime:0.035002s ]

[ 2014-08-12T21:39:36+08:00 ] 127.0.0.1 /php_demo/shizhan/10/10wish/index.php/Test/Map/route
INFO: [ route_check ] --START--
INFO: CheckRoute Behavior ::run [ RunTime:0.019001s ]
INFO: [ route_check ] --END-- [ RunTime:0.033002s ]
INFO: [ app_begin ] --START--
INFO: ReadHtmlCache Behavior ::run [ RunTime:0.019001s ]
INFO: [ app_begin ] --END-- [ RunTime:0.030001s ]

[ 2014-08-12T21:42:06+08:00 ] 127.0.0.1 /php_demo/shizhan/10/10wish/index.php/Test/Map/route
INFO: [ route_check ] --START--
INFO: CheckRoute Behavior ::run [ RunTime:0.018001s ]
INFO: [ route_check ] --END-- [ RunTime:0.033002s ]
INFO: [ app_begin ] --START--
INFO: ReadHtmlCache Behavior ::run [ RunTime:0.026002s ]
INFO: [ app_begin ] --END-- [ RunTime:0.041002s ]

[ 2014-08-12T21:42:25+08:00 ] 127.0.0.1 /php_demo/shizhan/10/10wish/index.php/Test/Map/route
INFO: [ route_check ] --START--
INFO: CheckRoute Behavior ::run [ RunTime:0.187011s ]
INFO: [ route_check ] --END-- [ RunTime:0.201011s ]
INFO: [ app_begin ] --START--
INFO: ReadHtmlCache Behavior ::run [ RunTime:0.026001s ]
INFO: [ app_begin ] --END-- [ RunTime:0.037002s ]
INFO: [ view_parse ] --START--
INFO: ParseTemplate Behavior ::run [ RunTime:0.452025s ]
INFO: [ view_parse ] --END-- [ RunTime:0.472027s ]
INFO: [ view_filter ] --START--
INFO: ContentReplace Behavior ::run [ RunTime:0.020001s ]
INFO: TokenBuild Behavior ::run [ RunTime:0.023002s ]
INFO: WriteHtmlCache Behavior ::run [ RunTime:0.011001s ]
INFO: ShowRuntime Behavior ::run [ RunTime:0.026001s ]
INFO: [ view_filter ] --END-- [ RunTime:0.115007s ]
NOTIC: [2] Cannot modify header information - headers already sent by (output started at D:\Dropbox-List\Net\Dropbox\WebDev\xampp\htdocs\php_demo\shizhan\10\10wish\APP\Lib\Action\Test\MapAction.class.php:23) D:\Dropbox-List\Net\Dropbox\WebDev\xampp\htdocs\php_demo\shizhan\10\10wish\ThinkPHP\Lib\Core\View.class.php 第 95 行.
NOTIC: [2] Cannot modify header information - headers already sent by (output started at D:\Dropbox-List\Net\Dropbox\WebDev\xampp\htdocs\php_demo\shizhan\10\10wish\APP\Lib\Action\Test\MapAction.class.php:23) D:\Dropbox-List\Net\Dropbox\WebDev\xampp\htdocs\php_demo\shizhan\10\10wish\ThinkPHP\Lib\Core\View.class.php 第 96 行.
NOTIC: [2] Cannot modify header information - headers already sent by (output started at D:\Dropbox-List\Net\Dropbox\WebDev\xampp\htdocs\php_demo\shizhan\10\10wish\APP\Lib\Action\Test\MapAction.class.php:23) D:\Dropbox-List\Net\Dropbox\WebDev\xampp\htdocs\php_demo\shizhan\10\10wish\ThinkPHP\Lib\Core\View.class.php 第 97 行.
INFO: [ view_end ] --START--
INFO: ShowPageTrace Behavior ::run [ RunTime:0.021001s ]
INFO: [ view_end ] --END-- [ RunTime:0.033001s ]

[ 2014-08-12T21:44:14+08:00 ] 127.0.0.1 /php_demo/shizhan/10/10wish/index.php/Test/Map/route
INFO: [ route_check ] --START--
INFO: CheckRoute Behavior ::run [ RunTime:0.019001s ]
INFO: [ route_check ] --END-- [ RunTime:0.038003s ]
INFO: [ app_begin ] --START--
INFO: ReadHtmlCache Behavior ::run [ RunTime:0.029002s ]
INFO: [ app_begin ] --END-- [ RunTime:0.045002s ]
INFO: [ view_parse ] --START--
INFO: ParseTemplate Behavior ::run [ RunTime:0.330019s ]
INFO: [ view_parse ] --END-- [ RunTime:0.357021s ]
INFO: [ view_filter ] --START--
INFO: ContentReplace Behavior ::run [ RunTime:0.023001s ]
INFO: TokenBuild Behavior ::run [ RunTime:0.026001s ]
INFO: WriteHtmlCache Behavior ::run [ RunTime:0.015001s ]
INFO: ShowRuntime Behavior ::run [ RunTime:0.037002s ]
INFO: [ view_filter ] --END-- [ RunTime:0.148009s ]
INFO: [ view_end ] --START--
INFO: ShowPageTrace Behavior ::run [ RunTime:0.020002s ]
INFO: [ view_end ] --END-- [ RunTime:0.038002s ]

[ 2014-08-12T21:44:41+08:00 ] 127.0.0.1 /php_demo/shizhan/10/10wish/index.php/Test/Map/route
INFO: [ route_check ] --START--
INFO: CheckRoute Behavior ::run [ RunTime:0.020001s ]
INFO: [ route_check ] --END-- [ RunTime:0.033002s ]
INFO: [ app_begin ] --START--
INFO: ReadHtmlCache Behavior ::run [ RunTime:0.025002s ]
INFO: [ app_begin ] --END-- [ RunTime:0.040002s ]
INFO: [ view_parse ] --START--
INFO: ParseTemplate Behavior ::run [ RunTime:0.248014s ]
INFO: [ view_parse ] --END-- [ RunTime:0.262015s ]
INFO: [ view_filter ] --START--
INFO: ContentReplace Behavior ::run [ RunTime:0.019001s ]
INFO: TokenBuild Behavior ::run [ RunTime:0.022001s ]
INFO: WriteHtmlCache Behavior ::run [ RunTime:0.014001s ]
INFO: ShowRuntime Behavior ::run [ RunTime:0.039002s ]
INFO: [ view_filter ] --END-- [ RunTime:0.132008s ]
INFO: [ view_end ] --START--
INFO: ShowPageTrace Behavior ::run [ RunTime:0.021001s ]
INFO: [ view_end ] --END-- [ RunTime:0.035002s ]

